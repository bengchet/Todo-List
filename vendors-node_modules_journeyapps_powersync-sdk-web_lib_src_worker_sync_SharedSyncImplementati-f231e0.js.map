{"version":3,"file":"vendors-node_modules_journeyapps_powersync-sdk-web_lib_src_worker_sync_SharedSyncImplementati-f231e0.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAoC;AACW;AAChB;AACQ;AACuB;AACE;AACX;AACF;AACA;AACkB;AACjB;AACA;AACY;AACoC;AACpG,MAAMc,qBAAqB,GAAG,+BAA+B;AAC7D,MAAMC,gCAAgC,GAAG;EACrCC,UAAU,EAAE;AAChB,CAAC;AACM,MAAMC,+BAA+B,GAAG;EAC3CC,UAAU,EAAE;AAChB,CAAC;AACM,MAAMC,yBAAyB,GAAG,EAAE;AACpC,MAAMC,4BAA4B,GAAG;EACxCC,UAAU,EAAE,IAAI;EAChBC,MAAM,EAAEpB,oDAAU,CAAC,mBAAmB,CAAC;EACvCsB,oBAAoB,EAAEX,8GAA+BA;AACzD,CAAC;AACD;AACA;AACA;AACA;AACA;AACO,MAAMY,uBAAuB,GAAG,OAAO,CAAC,CAAC;AACzC,MAAMC,yBAAyB,SAASpB,6DAAY,CAAC;EACxDqB,OAAO;EACP;AACJ;AACA;AACA;EACI,OAAOC,gBAAgB,GAAG,IAAI5B,8CAAK,CAAC,CAAC;EACrC;AACJ;AACA;EACI6B,MAAM;EACNC,KAAK;EACL;AACJ;AACA;EACIC,aAAa;EACbC,wBAAwB;EACxBC,UAAU;EACVC,oBAAoB;EACpBC,0BAA0B;EAC1BC,eAAe;EACfC,OAAO;EACPC,WAAWA,CAACX,OAAO,EAAE;IACjB,KAAK,CAAC,CAAC;IACP,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACO,oBAAoB,GAAG,IAAI,CAACK,4BAA4B,CAAC,CAAC;IAC/D,IAAI,CAACV,MAAM,GAAG,KAAK;IACnB,IAAI,CAACE,aAAa,GAAGS,SAAS;IAC9B,IAAI,CAACb,OAAO,GAAG;MAAE,GAAGP,4BAA4B;MAAE,GAAGO;IAAQ,CAAC;IAC9D,IAAI,CAACU,OAAO,GAAGV,OAAO,CAACc,MAAM;IAC7B,IAAI,CAACX,KAAK,GAAG,KAAK;IAClB,IAAI,CAACG,UAAU,GAAG,EAAE;IACpB;IACA,IAAI,CAACG,eAAe,GAAG,IAAI,CAACM,UAAU,CAAC,CAAC;EAC5C;EACA;AACJ;AACA;EACI,IAAID,MAAMA,CAAA,EAAG;IACT,OAAO,IAAI,CAACJ,OAAO;EACvB;EACA;AACJ;AACA;AACA;AACA;EACI,IAAIM,QAAQA,CAAA,EAAG;IACX,OAAO,IAAI,CAAChB,OAAO,CAACgB,QAAQ;EAChC;EACA;AACJ;AACA;EACI,IAAIC,SAASA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACb,aAAa,EAAEa,SAAS,IAAI,KAAK;EACjD;EACA;AACJ;AACA;EACUC,YAAYA,CAAA,EAAG;IAAA,IAAAC,KAAA;IAAA,OAAAC,2HAAA;MACjB,IAAID,KAAI,CAAChB,KAAK,EAAE;QACZ;MACJ;MACA,MAAMgB,KAAI,CAACV,eAAe;IAAC;EAC/B;EACA;AACJ;AACA;AACA;EACUM,UAAUA,CAAA,EAAG;IAAA,IAAAM,MAAA;IAAA,OAAAD,2HAAA;MACf,MAAMC,MAAI,CAACC,WAAW,CAAC,CAAC;MACxB,MAAMD,MAAI,CAACd,oBAAoB,CAACgB,IAAI,CAAC,CAAC;MACtC,MAAMC,OAAO,SAASH,MAAI,CAACrB,OAAO,CAACgB,QAAQ,CAACS,OAAO,CAAC,+BAA+B,CAAC;MACpFJ,MAAI,CAACf,UAAU,GAAGkB,OAAO,CAACE,IAAI,EAAEC,IAAI,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,IAAI,EAAE;MACvE,MAAMN,MAAI,CAACO,YAAY,CAACP,MAAI,CAACrB,OAAO,CAACc,MAAM,CAAC;MAC5CO,MAAI,CAAClB,KAAK,GAAG,IAAI;MACjBkB,MAAI,CAACQ,gBAAgB,CAAEC,EAAE,IAAKA,EAAE,CAACC,WAAW,GAAG,CAAC,CAAC;IAAC;EACtD;EACA;AACJ;AACA;AACA;AACA;EACUH,YAAYA,CAACd,MAAM,EAAE;IAAA,IAAAkB,MAAA;IAAA,OAAAZ,2HAAA;MACvB,IAAIY,MAAI,CAAC3B,wBAAwB,EAAE;QAC/B,MAAM,IAAI4B,KAAK,CAAC,sCAAsC,CAAC;MAC3D;MACA;AACR;AACA;AACA;AACA;MACQ,IAAI;QACAnB,MAAM,CAACoB,QAAQ,CAAC,CAAC;MACrB,CAAC,CACD,OAAOC,EAAE,EAAE;QACPH,MAAI,CAAChC,OAAO,CAACL,MAAM,EAAEyC,IAAI,CAAC,4DAA4D,EAAED,EAAE,CAAC;MAC/F;MACAH,MAAI,CAACtB,OAAO,GAAGI,MAAM;MACrB,MAAMkB,MAAI,CAAChB,QAAQ,CAACS,OAAO,CAAC,oCAAoC,EAAE,CAACY,IAAI,CAACC,SAAS,CAACN,MAAI,CAAClB,MAAM,CAACyB,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAAC;EAC9G;EACA;AACJ;AACA;AACA;EACUhB,IAAIA,CAAA,EAAG;IAAA,IAAAiB,MAAA;IAAA,OAAApB,2HAAA;MACT,OAAOoB,MAAI,CAACtB,YAAY,CAAC,CAAC;IAAC;EAC/B;EACA;AACJ;AACA;EACUuB,OAAOA,CAACC,SAAS,EAAE;IAAA,IAAAC,MAAA;IAAA,OAAAvB,2HAAA;MACrB,MAAMuB,MAAI,CAACzB,YAAY,CAAC,CAAC;MACzB;MACA,MAAMyB,MAAI,CAACpD,UAAU,CAAC,CAAC;MACvB,IAAIoD,MAAI,CAACzC,MAAM,EAAE;QACb,MAAM,IAAI+B,KAAK,CAAC,sCAAsC,CAAC;MAC3D;MACAU,MAAI,CAACtC,wBAAwB,GAAGsC,MAAI,CAACC,gCAAgC,CAACF,SAAS,CAAC;MAChFC,MAAI,CAACnC,0BAA0B,GAAGmC,MAAI,CAACtC,wBAAwB,CAACwC,gBAAgB,CAAC;QAC7EC,aAAa,EAAGC,MAAM,IAAK;UACvBJ,MAAI,CAACvC,aAAa,GAAG2C,MAAM;UAC3BJ,MAAI,CAACd,gBAAgB,CAAEC,EAAE,IAAKA,EAAE,CAACgB,aAAa,GAAGC,MAAM,CAAC,CAAC;QAC7D;MACJ,CAAC,CAAC;MACF,MAAMJ,MAAI,CAACtC,wBAAwB,CAACa,YAAY,CAAC,CAAC;MAClDyB,MAAI,CAACtC,wBAAwB,CAAC2C,iBAAiB,CAAC,CAAC;MACjDL,MAAI,CAACtC,wBAAwB,CAACoC,OAAO,CAAC,CAAC;IAAC;EAC5C;EACA;AACJ;AACA;AACA;AACA;EACUlD,UAAUA,CAAA,EAAG;IAAA,IAAA0D,MAAA;IAAA,OAAA7B,2HAAA;MACf,MAAM6B,MAAI,CAAC5C,wBAAwB,EAAEd,UAAU,CAAC,CAAC;MACjD0D,MAAI,CAACzC,0BAA0B,GAAG,CAAC;MACnC,MAAMyC,MAAI,CAAC5C,wBAAwB,EAAE6C,OAAO,CAAC,CAAC;MAC9CD,MAAI,CAAC5C,wBAAwB,GAAGQ,SAAS;IAAC;EAC9C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACUsC,kBAAkBA,CAACnD,OAAO,GAAGZ,gCAAgC,EAAE;IAAA,IAAAgE,MAAA;IAAA,OAAAhC,2HAAA;MACjE,MAAMgC,MAAI,CAAC7D,UAAU,CAAC,CAAC;MACvB,MAAM6D,MAAI,CAAClC,YAAY,CAAC,CAAC;MACzB,MAAM;QAAE7B;MAAW,CAAC,GAAGW,OAAO;MAC9B;MACA,MAAMoD,MAAI,CAACpC,QAAQ,CAACqC,gBAAgB;QAAA,IAAAC,IAAA,GAAAlC,2HAAA,CAAC,WAAOmC,EAAE,EAAK;UAC/C,MAAMA,EAAE,CAAC9B,OAAO,CAAE,eAAc3C,+EAAe,CAAC0E,KAAM,EAAC,CAAC;UACxD,MAAMD,EAAE,CAAC9B,OAAO,CAAE,eAAc3C,+EAAe,CAAC2E,IAAK,EAAC,CAAC;UACvD,MAAMF,EAAE,CAAC9B,OAAO,CAAE,eAAc3C,+EAAe,CAAC4E,OAAQ,EAAC,CAAC;UAC1D,MAAMC,SAAS,GAAGtE,UAAU,GAAG,WAAW,GAAG,YAAY;UACzD,MAAMuE,iBAAiB,SAASL,EAAE,CAAC9B,OAAO,CAAE;AACxD;AACA,OAAO,EAAE,CAACkC,SAAS,CAAC,CAAC;UACT,IAAI,CAACC,iBAAiB,CAAClC,IAAI,EAAEmC,MAAM,EAAE;YACjC;UACJ;UACA,KAAK,MAAMC,GAAG,IAAIF,iBAAiB,CAAClC,IAAI,CAACqC,MAAM,EAAE;YAC7C,MAAMR,EAAE,CAAC9B,OAAO,CAAE,eAAc5C,gEAAe,CAACiF,GAAG,CAACE,IAAI,CAAE,UAAS,CAAC;UACxE;QACJ,CAAC;QAAA,iBAAAC,EAAA;UAAA,OAAAX,IAAA,CAAAY,KAAA,OAAAC,SAAA;QAAA;MAAA,IAAC;IAAC;EACP;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACUC,KAAKA,CAACpE,OAAO,GAAGV,+BAA+B,EAAE;IAAA,IAAA+E,MAAA;IAAA,OAAAjD,2HAAA;MACnD,MAAMiD,MAAI,CAACnD,YAAY,CAAC,CAAC;MACzB,MAAM;QAAE3B;MAAW,CAAC,GAAGS,OAAO;MAC9B,IAAIT,UAAU,EAAE;QACZ,MAAM8E,MAAI,CAAC9E,UAAU,CAAC,CAAC;MAC3B;MACA,MAAM8E,MAAI,CAAChE,wBAAwB,EAAE6C,OAAO,CAAC,CAAC;MAC9CmB,MAAI,CAACrD,QAAQ,CAACoD,KAAK,CAAC,CAAC;MACrBC,MAAI,CAACnE,MAAM,GAAG,IAAI;IAAC;EACvB;EACA;AACJ;AACA;EACUoE,mBAAmBA,CAACC,WAAW,EAAE;IAAA,IAAAC,MAAA;IAAA,OAAApD,2HAAA;MACnC,OAAOoD,MAAI,CAACC,eAAe;QAAA,IAAAC,KAAA,GAAAtD,2HAAA,CAAC,WAAOmC,EAAE,EAAK;UACtC,IAAIgB,WAAW,EAAE;YACb,MAAMI,MAAM,SAASpB,EAAE,CAAC9B,OAAO,CAAE,uEAAsE3C,+EAAe,CAAC2E,IAAK,EAAC,CAAC;YAC9H,MAAMK,GAAG,GAAGa,MAAM,CAACjD,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;YAC/B,OAAO,IAAIjD,wEAAgB,CAACoF,GAAG,EAAEc,KAAK,IAAI,CAAC,EAAEd,GAAG,EAAEe,IAAI,IAAI,CAAC,CAAC;UAChE,CAAC,MACI;YACD,MAAMF,MAAM,SAASpB,EAAE,CAAC9B,OAAO,CAAE,iCAAgC3C,+EAAe,CAAC2E,IAAK,EAAC,CAAC;YACxF,MAAMK,GAAG,GAAGa,MAAM,CAACjD,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;YAC/B,OAAO,IAAIjD,wEAAgB,CAACoF,GAAG,EAAEc,KAAK,IAAI,CAAC,CAAC;UAChD;QACJ,CAAC;QAAA,iBAAAE,GAAA;UAAA,OAAAJ,KAAA,CAAAR,KAAA,OAAAC,SAAA;QAAA;MAAA,IAAC;IAAC;EACP;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACUY,YAAYA,CAACC,KAAK,EAAE;IAAA,IAAAC,OAAA;IAAA,OAAA7D,2HAAA;MACtB,MAAMuD,MAAM,SAASM,OAAI,CAACC,MAAM,CAAE,+BAA8BpG,+EAAe,CAAC2E,IAAK,0BAAyB,EAAE,CAACuB,KAAK,GAAG,CAAC,CAAC,CAAC;MAC5H,MAAMG,GAAG,GAAGR,MAAM,CAACS,GAAG,CAAEtB,GAAG,IAAK9E,8DAAS,CAACqG,OAAO,CAACvB,GAAG,CAAC,CAAC,IAAI,EAAE;MAC7D,IAAIwB,QAAQ,GAAG,KAAK;MACpB,IAAIH,GAAG,CAACtB,MAAM,GAAGmB,KAAK,EAAE;QACpBG,GAAG,CAACI,GAAG,CAAC,CAAC;QACTD,QAAQ,GAAG,IAAI;MACnB;MACA,IAAIH,GAAG,CAACtB,MAAM,IAAI,CAAC,EAAE;QACjB,OAAO,IAAI;MACf;MACA,MAAM2B,IAAI,GAAGL,GAAG,CAACA,GAAG,CAACtB,MAAM,GAAG,CAAC,CAAC;MAChC,OAAO,IAAI9E,8DAAS,CAACoG,GAAG,EAAEG,QAAQ;QAAA,IAAAG,KAAA,GAAArE,2HAAA,CAAE,WAAOsE,eAAe;UAAA,OAAKT,OAAI,CAACU,oBAAoB,CAACH,IAAI,CAACI,QAAQ,EAAEF,eAAe,CAAC;QAAA;QAAA,iBAAAG,GAAA;UAAA,OAAAJ,KAAA,CAAAvB,KAAA,OAAAC,SAAA;QAAA;MAAA,IAAC;IAAC;EAC9H;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACU2B,sBAAsBA,CAAA,EAAG;IAAA,IAAAC,OAAA;IAAA,OAAA3E,2HAAA;MAC3B,aAAa2E,OAAI,CAACtB,eAAe;QAAA,IAAAuB,KAAA,GAAA5E,2HAAA,CAAC,WAAOmC,EAAE,EAAK;UAC5C,MAAM0C,KAAK,SAAS1C,EAAE,CAAC2C,WAAW,CAAE,+BAA8BpH,+EAAe,CAAC2E,IAAK,0BAAyB,CAAC;UACjH,IAAI,CAACwC,KAAK,EAAE;YACR,OAAO,IAAI;UACf;UACA,MAAME,IAAI,GAAGF,KAAK,CAACG,KAAK;UACxB,IAAIjB,GAAG;UACP,IAAI,CAACgB,IAAI,EAAE;YACPhB,GAAG,GAAG,CAACnG,8DAAS,CAACqG,OAAO,CAACY,KAAK,CAAC,CAAC;UACpC,CAAC,MACI;YACD,MAAMtB,MAAM,SAASpB,EAAE,CAAC2B,MAAM,CAAE,+BAA8BpG,+EAAe,CAAC2E,IAAK,kCAAiC,EAAE,CAAC0C,IAAI,CAAC,CAAC;YAC7HhB,GAAG,GAAGR,MAAM,CAACS,GAAG,CAAEtB,GAAG,IAAK9E,8DAAS,CAACqG,OAAO,CAACvB,GAAG,CAAC,CAAC;UACrD;UACA,MAAM0B,IAAI,GAAGL,GAAG,CAACA,GAAG,CAACtB,MAAM,GAAG,CAAC,CAAC;UAChC,OAAO,IAAI5E,0EAAe,CAACkG,GAAG;YAAA,IAAAkB,KAAA,GAAAjF,2HAAA,CAAE,WAAOsE,eAAe;cAAA,OAAKK,OAAI,CAACJ,oBAAoB,CAACH,IAAI,CAACI,QAAQ,EAAEF,eAAe,CAAC;YAAA;YAAA,iBAAAY,GAAA;cAAA,OAAAD,KAAA,CAAAnC,KAAA,OAAAC,SAAA;YAAA;UAAA,KAAEgC,IAAI,CAAC;QAC/H,CAAC;QAAA,iBAAAI,GAAA;UAAA,OAAAP,KAAA,CAAA9B,KAAA,OAAAC,SAAA;QAAA;MAAA,IAAC;IAAC;EACP;EACMwB,oBAAoBA,CAACa,YAAY,EAAEd,eAAe,EAAE;IAAA,IAAAe,OAAA;IAAA,OAAArF,2HAAA;MACtD,OAAOqF,OAAI,CAACpD,gBAAgB;QAAA,IAAAqD,KAAA,GAAAtF,2HAAA,CAAC,WAAOmC,EAAE,EAAK;UACvC,MAAMA,EAAE,CAAC9B,OAAO,CAAE,eAAc3C,+EAAe,CAAC2E,IAAK,gBAAe,EAAE,CAAC+C,YAAY,CAAC,CAAC;UACrF,IAAId,eAAe,EAAE;YACjB,MAAMiB,KAAK,SAASpD,EAAE,CAAC9B,OAAO,CAAE,iBAAgB3C,+EAAe,CAAC2E,IAAK,UAAS,CAAC;YAC/E,IAAI,CAACkD,KAAK,CAACjF,IAAI,EAAEmC,MAAM,EAAE;cACrB,MAAMN,EAAE,CAAC9B,OAAO,CAAE,UAAS3C,+EAAe,CAAC4E,OAAQ,wCAAuC,EAAE,CACxFgC,eAAe,CAClB,CAAC;YACN;UACJ,CAAC,MACI;YACD,MAAMnC,EAAE,CAAC9B,OAAO,CAAE,UAAS3C,+EAAe,CAAC4E,OAAQ,wCAAuC,EAAE,CACxF+C,OAAI,CAAClG,oBAAoB,CAACqG,UAAU,CAAC,CAAC,CACzC,CAAC;UACN;QACJ,CAAC;QAAA,iBAAAC,GAAA;UAAA,OAAAH,KAAA,CAAAxC,KAAA,OAAAC,SAAA;QAAA;MAAA,IAAC;IAAC;EACP;EACA;AACJ;AACA;AACA;EACU1C,OAAOA,CAACqF,GAAG,EAAEC,UAAU,EAAE;IAAA,IAAAC,OAAA;IAAA,OAAA5F,2HAAA;MAC3B,MAAM4F,OAAI,CAAC9F,YAAY,CAAC,CAAC;MACzB,OAAO8F,OAAI,CAAChG,QAAQ,CAACS,OAAO,CAACqF,GAAG,EAAEC,UAAU,CAAC;IAAC;EAClD;EACA;AACJ;AACA;EACU7B,MAAMA,CAAC4B,GAAG,EAAEC,UAAU,EAAE;IAAA,IAAAE,OAAA;IAAA,OAAA7F,2HAAA;MAC1B,MAAM6F,OAAI,CAAC/F,YAAY,CAAC,CAAC;MACzB,OAAO+F,OAAI,CAACjG,QAAQ,CAACkE,MAAM,CAAC4B,GAAG,EAAEC,UAAU,CAAC;IAAC;EACjD;EACA;AACJ;AACA;EACUb,WAAWA,CAACY,GAAG,EAAEC,UAAU,EAAE;IAAA,IAAAG,OAAA;IAAA,OAAA9F,2HAAA;MAC/B,MAAM8F,OAAI,CAAChG,YAAY,CAAC,CAAC;MACzB,OAAOgG,OAAI,CAAClG,QAAQ,CAACkF,WAAW,CAACY,GAAG,EAAEC,UAAU,CAAC;IAAC;EACtD;EACA;AACJ;AACA;EACUnH,GAAGA,CAACkH,GAAG,EAAEC,UAAU,EAAE;IAAA,IAAAI,OAAA;IAAA,OAAA/F,2HAAA;MACvB,MAAM+F,OAAI,CAACjG,YAAY,CAAC,CAAC;MACzB,OAAOiG,OAAI,CAACnG,QAAQ,CAACpB,GAAG,CAACkH,GAAG,EAAEC,UAAU,CAAC;IAAC;EAC9C;EACA;AACJ;AACA;AACA;EACUK,QAAQA,CAACC,QAAQ,EAAE;IAAA,IAAAC,OAAA;IAAA,OAAAlG,2HAAA;MACrB,MAAMkG,OAAI,CAACpG,YAAY,CAAC,CAAC;MACzB,OAAOtC,+DAAiB,CAACmB,yBAAyB,CAACE,gBAAgB,EAAE,MAAMoH,QAAQ,CAACC,OAAI,CAACtG,QAAQ,CAAC,CAAC;IAAC;EACxG;EACA;AACJ;AACA;AACA;EACUuG,SAASA,CAACF,QAAQ,EAAE;IAAA,IAAAG,OAAA;IAAA,OAAApG,2HAAA;MACtB,MAAMoG,OAAI,CAACtG,YAAY,CAAC,CAAC;MACzB,OAAOtC,+DAAiB,CAACmB,yBAAyB,CAACE,gBAAgB,eAAAmB,2HAAA,CAAE,aAAY;QAC7E,MAAMqG,GAAG,SAASJ,QAAQ,CAACG,OAAI,CAACxG,QAAQ,CAAC;QACzC,OAAOyG,GAAG;MACd,CAAC,EAAC;IAAC;EACP;EACA;AACJ;AACA;AACA;AACA;EACUhD,eAAeA,CAAC4C,QAAQ,EAAEK,WAAW,GAAG5H,uBAAuB,EAAE;IAAA,IAAA6H,OAAA;IAAA,OAAAvG,2HAAA;MACnE,MAAMuG,OAAI,CAACzG,YAAY,CAAC,CAAC;MACzB,OAAOyG,OAAI,CAAC3G,QAAQ,CAACyD,eAAe;QAAA,IAAAmD,KAAA,GAAAxG,2HAAA,CAAC,WAAOmC,EAAE,EAAK;UAC/C,MAAMkE,GAAG,SAASJ,QAAQ,CAAC;YAAE,GAAG9D;UAAG,CAAC,CAAC;UACrC,MAAMA,EAAE,CAACsE,QAAQ,CAAC,CAAC;UACnB,OAAOJ,GAAG;QACd,CAAC;QAAA,iBAAAK,GAAA;UAAA,OAAAF,KAAA,CAAA1D,KAAA,OAAAC,SAAA;QAAA;MAAA,KAAE;QAAE4D,SAAS,EAAEL;MAAY,CAAC,CAAC;IAAC;EACnC;EACA;AACJ;AACA;AACA;AACA;EACUrE,gBAAgBA,CAACgE,QAAQ,EAAEK,WAAW,GAAG5H,uBAAuB,EAAE;IAAA,IAAAkI,OAAA;IAAA,OAAA5G,2HAAA;MACpE,MAAM4G,OAAI,CAAC9G,YAAY,CAAC,CAAC;MACzB,OAAO8G,OAAI,CAAChH,QAAQ,CAACqC,gBAAgB;QAAA,IAAA4E,KAAA,GAAA7G,2HAAA,CAAC,WAAOmC,EAAE,EAAK;UAChD,MAAMkE,GAAG,SAASJ,QAAQ,CAAC9D,EAAE,CAAC;UAC9B,MAAMA,EAAE,CAAC2E,MAAM,CAAC,CAAC;UACjB,OAAOT,GAAG;QACd,CAAC;QAAA,iBAAAU,GAAA;UAAA,OAAAF,KAAA,CAAA/D,KAAA,OAAAC,SAAA;QAAA;MAAA,KAAE;QAAE4D,SAAS,EAAEL;MAAY,CAAC,CAAC;IAAC;EACnC;EACAU,KAAKA,CAACtB,GAAG,EAAEC,UAAU,EAAEsB,gBAAgB,EAAEC,YAAY,EAAE;IACnD,IAAID,gBAAgB,IAAI,OAAOA,gBAAgB,KAAK,QAAQ,IAAI,UAAU,IAAIA,gBAAgB,EAAE;MAC5F,MAAME,OAAO,GAAGF,gBAAgB;MAChC,MAAMrI,OAAO,GAAGsI,YAAY;MAC5B,OAAO,IAAI,CAACE,iBAAiB,CAAC1B,GAAG,EAAEC,UAAU,EAAEwB,OAAO,EAAEvI,OAAO,CAAC;IACpE;IACA,MAAMA,OAAO,GAAGqI,gBAAgB;IAChC,OAAO,IAAI,CAACI,uBAAuB,CAAC3B,GAAG,EAAEC,UAAU,EAAE/G,OAAO,CAAC;EACjE;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIwI,iBAAiBA,CAAC1B,GAAG,EAAEC,UAAU,EAAEwB,OAAO,EAAEvI,OAAO,EAAE;IAAA,IAAA0I,OAAA;IACjD,MAAM;MAAEC,QAAQ;MAAEC,OAAO,GAAG,IAAI,CAAC5I,OAAO,CAACL,MAAM,EAAEkJ;IAAM,CAAC,GAAGN,OAAO,IAAI,CAAC,CAAC;IACxE,IAAI,CAACI,QAAQ,EAAE;MACX,MAAM,IAAI1G,KAAK,CAAC,sBAAsB,CAAC;IAC3C;IACAb,2HAAA,CAAC,aAAY;MACT,IAAI;QACA;QACAuH,QAAQ,OAAOD,OAAI,CAACI,eAAe,CAAChC,GAAG,EAAEC,UAAU,CAAC,CAAC;QACrD,MAAMgC,cAAc,SAASL,OAAI,CAACM,aAAa,CAAClC,GAAG,EAAEC,UAAU,EAAE/G,OAAO,CAAC;QACzE0I,OAAI,CAACO,oBAAoB,CAAC;UAAEC,QAAQ;YAAA,IAAAC,MAAA,GAAA/H,2HAAA,CAAE;cAAA,OAAYuH,QAAQ,OAAOD,OAAI,CAACI,eAAe,CAAChC,GAAG,EAAEC,UAAU,CAAC,CAAC;YAAA;YAAA,gBAAAmC,SAAA;cAAA,OAAAC,MAAA,CAAAjF,KAAA,OAAAC,SAAA;YAAA;UAAA;UAAEyE;QAAQ,CAAC,EAAE;UAChH,IAAI5I,OAAO,IAAI,CAAC,CAAC,CAAC;UAClBoJ,MAAM,EAAEL;QACZ,CAAC,CAAC;MACN,CAAC,CACD,OAAOF,KAAK,EAAE;QACVD,OAAO,GAAGC,KAAK,CAAC;MACpB;IACJ,CAAC,EAAE,CAAC;EACR;EACA;AACJ;AACA;AACA;AACA;EACIJ,uBAAuBA,CAAC3B,GAAG,EAAEC,UAAU,EAAE/G,OAAO,EAAE;IAAA,IAAAqJ,OAAA;IAC9C,OAAO,IAAI/K,yDAAa,CAAEgL,YAAY,IAAK;MACvClI,2HAAA,CAAC,aAAY;QACT;QACAkI,YAAY,CAACC,IAAI,OAAOF,OAAI,CAACP,eAAe,CAAChC,GAAG,EAAEC,UAAU,CAAC,CAAC;QAC9D,MAAMgC,cAAc,SAASM,OAAI,CAACL,aAAa,CAAClC,GAAG,EAAEC,UAAU,EAAE/G,OAAO,CAAC;QAAC,IAAAwJ,yBAAA;QAAA,IAAAC,iBAAA;QAAA,IAAAC,cAAA;QAAA;UAC1E,SAAAC,SAAA,GAAAC,wHAAA,CAA0BP,OAAI,CAACQ,0BAA0B,CAAC;cACtD,IAAI7J,OAAO,IAAI,CAAC,CAAC,CAAC;cAClBoJ,MAAM,EAAEL;YACZ,CAAC,CAAC,GAAAe,KAAA,EAAAN,yBAAA,KAAAM,KAAA,SAAAH,SAAA,CAAAI,IAAA,IAAAC,IAAA,EAAAR,yBAAA,UAAE;YAAA,MAHaS,KAAK,GAAAH,KAAA,CAAAI,KAAA;YAAA;cAIlBZ,YAAY,CAACC,IAAI,OAAOF,OAAI,CAACP,eAAe,CAAChC,GAAG,EAAEC,UAAU,CAAC,CAAC;YAAC;UACnE;QAAC,SAAAoD,GAAA;UAAAV,iBAAA;UAAAC,cAAA,GAAAS,GAAA;QAAA;UAAA;YAAA,IAAAX,yBAAA,IAAAG,SAAA,CAAAS,MAAA;cAAA,MAAAT,SAAA,CAAAS,MAAA;YAAA;UAAA;YAAA,IAAAX,iBAAA;cAAA,MAAAC,cAAA;YAAA;UAAA;QAAA;MACL,CAAC,EAAE,CAAC;IACR,CAAC,CAAC;EACN;EACMV,aAAaA,CAAClC,GAAG,EAAEC,UAAU,EAAE/G,OAAO,EAAE;IAAA,IAAAqK,OAAA;IAAA,OAAAjJ,2HAAA;MAC1C,MAAM2H,cAAc,GAAG/I,OAAO,EAAEoJ,MAAM,GAAG,CAAC,GAAGpJ,OAAO,CAACoJ,MAAM,CAAC,GAAG,EAAE;MACjE,IAAI,CAACpJ,OAAO,EAAEoJ,MAAM,EAAE;QAClB,MAAMkB,SAAS,SAASD,OAAI,CAACnF,MAAM,CAAE,WAAU4B,GAAI,EAAC,EAAEC,UAAU,CAAC;QACjE,MAAMwD,SAAS,GAAGD,SAAS,CACtBE,MAAM,CAAE1G,GAAG,IAAKA,GAAG,CAAC2G,MAAM,IAAI,UAAU,IAAI3G,GAAG,CAAC4G,EAAE,IAAI,CAAC,IAAI,OAAO5G,GAAG,CAAC6G,EAAE,IAAI,QAAQ,CAAC,CACrFvF,GAAG,CAAEtB,GAAG,IAAKA,GAAG,CAAC6G,EAAE,CAAC;QACzB,MAAMvB,MAAM,SAASiB,OAAI,CAACnF,MAAM,CAAE,0GAAyG,EAAE,CAAC7C,IAAI,CAACC,SAAS,CAACiI,SAAS,CAAC,CAAC,CAAC;QACzK,KAAK,IAAIK,KAAK,IAAIxB,MAAM,EAAE;UACtBL,cAAc,CAACQ,IAAI,CAACqB,KAAK,CAACC,QAAQ,CAACC,OAAO,CAAC3L,qBAAqB,EAAE,EAAE,CAAC,CAAC;QAC1E;MACJ;MACA,OAAO4J,cAAc;IAAC;EAC1B;EACAG,QAAQA,CAACb,gBAAgB,EAAEC,YAAY,EAAE;IACrC,IAAID,gBAAgB,IAAI,OAAOA,gBAAgB,KAAK,QAAQ,IAAI,UAAU,IAAIA,gBAAgB,EAAE;MAC5F,MAAME,OAAO,GAAGF,gBAAgB;MAChC,MAAMrI,OAAO,GAAGsI,YAAY;MAC5B,OAAO,IAAI,CAACW,oBAAoB,CAACV,OAAO,EAAEvI,OAAO,CAAC;IACtD;IACA,MAAMA,OAAO,GAAGqI,gBAAgB;IAChC,OAAO,IAAI,CAACwB,0BAA0B,CAAC7J,OAAO,CAAC;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIiJ,oBAAoBA,CAACV,OAAO,EAAEvI,OAAO,EAAE;IAAA,IAAA+K,OAAA;IACnC,MAAM;MAAE7B,QAAQ;MAAEN,OAAO,GAAG,IAAI,CAAC5I,OAAO,CAACL,MAAM,EAAEkJ;IAAM,CAAC,GAAGN,OAAO,IAAI,CAAC,CAAC;IACxE,IAAI,CAACW,QAAQ,EAAE;MACX,MAAM,IAAIjH,KAAK,CAAC,sBAAsB,CAAC;IAC3C;IACA,MAAM+I,eAAe,GAAGhL,OAAO,IAAI,CAAC,CAAC;IACrC,MAAMiL,aAAa,GAAG,IAAIC,GAAG,CAACF,eAAe,CAAC5B,MAAM,IAAI,EAAE,CAAC;IAC3D,MAAM+B,aAAa,GAAG,IAAID,GAAG,CAAC,CAAC;IAC/B,MAAME,UAAU,GAAGJ,eAAe,CAACI,UAAU,IAAI5L,yBAAyB;IAC1E,MAAM6L,iBAAiB,GAAG7M,sDAAQ,CAAC,MAAM,IAAI,CAAC8M,kBAAkB,CAACH,aAAa,EAAEF,aAAa,EAAGM,YAAY,IAAK;MAC7GrC,QAAQ,CAAC;QAAEiC,aAAa,EAAEI;MAAa,CAAC,CAAC;IAC7C,CAAC,CAAC,EAAEH,UAAU,EAAE;MAAEI,OAAO,EAAE,KAAK;MAAEC,QAAQ,EAAE;IAAK,CAAC,CAAC;IACnD,MAAMvI,OAAO,GAAG,IAAI,CAAClC,QAAQ,CAAC6B,gBAAgB,CAAC;MAC3C6I,aAAa;QAAA,IAAAC,MAAA,GAAAvK,2HAAA,CAAE,WAAOwK,MAAM,EAAK;UAC7B,IAAI;YACA,MAAM;cAAEC;YAAc,CAAC,GAAGb,eAAe;YACzCD,OAAI,CAACe,mBAAmB,CAACF,MAAM,EAAEC,aAAa,EAAEV,aAAa,CAAC;YAC9DE,iBAAiB,CAAC,CAAC;UACvB,CAAC,CACD,OAAOxC,KAAK,EAAE;YACVD,OAAO,GAAGC,KAAK,CAAC;UACpB;QACJ,CAAC;QAAA,gBAAA6C,cAAAK,GAAA;UAAA,OAAAJ,MAAA,CAAAzH,KAAA,OAAAC,SAAA;QAAA;MAAA;IACL,CAAC,CAAC;IACF6G,eAAe,CAACgB,MAAM,EAAEC,gBAAgB,CAAC,OAAO,EAAE,MAAM;MACpD/I,OAAO,CAAC,CAAC;IACb,CAAC,CAAC;IACF,OAAO,MAAMA,OAAO,CAAC,CAAC;EAC1B;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI2G,0BAA0BA,CAAC7J,OAAO,EAAE;IAChC,MAAMgL,eAAe,GAAGhL,OAAO,IAAI,CAAC,CAAC;IACrC,OAAO,IAAI1B,yDAAa,CAAEgL,YAAY,IAAK;MACvC,MAAMpG,OAAO,GAAG,IAAI,CAAC+F,oBAAoB,CAAC;QACtCC,QAAQ,EAAGe,KAAK,IAAK;UAAEX,YAAY,CAACC,IAAI,CAACU,KAAK,CAAC;QAAE,CAAC;QAClDrB,OAAO,EAAGC,KAAK,IAAK;UAAES,YAAY,CAAC4C,IAAI,CAACrD,KAAK,CAAC;QAAE;MACpD,CAAC,EAAE7I,OAAO,CAAC;MACXgL,eAAe,CAACgB,MAAM,EAAEC,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACpD3C,YAAY,CAAC6C,IAAI,CAAC,CAAC;QACnB;MACJ,CAAC,CAAC;MACF,OAAO,MAAMjJ,OAAO,CAAC,CAAC;IAC1B,CAAC,CAAC;EACN;EACAoI,kBAAkBA,CAACH,aAAa,EAAEF,aAAa,EAAEmB,iBAAiB,EAAE;IAChE,IAAIjB,aAAa,CAACtG,IAAI,GAAG,CAAC,EAAE;MACxB,MAAM0G,YAAY,GAAGc,KAAK,CAACC,IAAI,CAACnB,aAAa,CAACoB,MAAM,CAAC,CAAC,CAAC,CAAC/B,MAAM,CAAEgC,MAAM,IAAKvB,aAAa,CAACwB,GAAG,CAACD,MAAM,CAAC,CAAC;MACrG,IAAIjB,YAAY,CAAC1H,MAAM,EAAE;QACrBuI,iBAAiB,CAACb,YAAY,CAAC;MACnC;IACJ;IACAJ,aAAa,CAACuB,KAAK,CAAC,CAAC;EACzB;EACAZ,mBAAmBA,CAACa,kBAAkB,EAAEd,aAAa,EAAEV,aAAa,EAAE;IAClE,MAAM/B,MAAM,GAAG3K,0EAA2B,CAACkO,kBAAkB,CAAC,GAAGA,kBAAkB,CAACvD,MAAM,GAAG,CAACuD,kBAAkB,CAAC/B,KAAK,CAAC;IACvH,MAAMgC,cAAc,GAAGf,aAAa,GAAGzC,MAAM,GAAGA,MAAM,CAACoB,MAAM,CAAEqC,CAAC,IAAK,CAAC,CAACA,CAAC,CAACC,KAAK,CAAC3N,qBAAqB,CAAC,CAAC;IACtG,IAAI,CAACyN,cAAc,CAAC/I,MAAM,EAAE;MACxB;IACJ;IACA;IACA,MAAMkJ,gBAAgB,GAAGlB,aAAa,GAChCe,cAAc,GACdA,cAAc,CAACxH,GAAG,CAAEyH,CAAC,IAAKA,CAAC,CAAC/B,OAAO,CAAC3L,qBAAqB,EAAE,EAAE,CAAC,CAAC;IACrE,KAAK,IAAIyL,KAAK,IAAImC,gBAAgB,EAAE;MAChC5B,aAAa,CAAC6B,GAAG,CAACpC,KAAK,CAAC;IAC5B;EACJ;EACA;AACJ;AACA;EACU9B,eAAeA,CAAChC,GAAG,EAAEmG,MAAM,EAAE;IAAA,IAAAC,OAAA;IAAA,OAAA9L,2HAAA;MAC/B,MAAM8L,OAAI,CAAChM,YAAY,CAAC,CAAC;MACzB,OAAOgM,OAAI,CAAClM,QAAQ,CAACoG,QAAQ,CAAE7D,EAAE,IAAKA,EAAE,CAAC9B,OAAO,CAACqF,GAAG,EAAEmG,MAAM,CAAC,CAAC;IAAC;EACnE;AACJ;AACA;;;;;;;;;;;;;;;;;ACljB+B;AACxB,MAAME,oCAAoC,CAAC;EAC9CnN,OAAO;EACPW,WAAWA,CAACX,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtBA,OAAO,CAACL,MAAM,GAAGK,OAAO,CAACL,MAAM,IAAIpB,oDAAU,CAAE,aAAY,IAAI,CAACyB,OAAO,CAACoN,UAAW,EAAC,CAAC;EACzF;EACA;AACJ;AACA;EACI,IAAItM,MAAMA,CAAA,EAAG;IACT,OAAO,IAAI,CAACd,OAAO,CAACc,MAAM;EAC9B;EACAuM,eAAeA,CAAA,EAAG;IACd,OAAO;MACHrM,QAAQ,EAAE,IAAI,CAACsM,MAAM,CAAC,CAAC;MACvB,GAAG,IAAI,CAACtN;IACZ,CAAC;EACL;EACAuN,WAAWA,CAAA,EAAG;IACV,MAAMvN,OAAO,GAAG,IAAI,CAACqN,eAAe,CAAC,CAAC;IACtC,OAAO,IAAI,CAACG,gBAAgB,CAACxN,OAAO,CAAC;EACzC;AACJ;AACA;;;;;;;;;;;;ACxBU;AACV;;;;;;;;;;;;ACDU;AACV;;;;;;;;;;;;;;;ACDO,IAAIlB,eAAe,gBACzB,UAAUA,eAAe,EAAE;EACxBA,eAAe,CAAC,MAAM,CAAC,GAAG,SAAS;EACnCA,eAAe,CAAC,MAAM,CAAC,GAAG,SAAS;EACnCA,eAAe,CAAC,SAAS,CAAC,GAAG,YAAY;EACzCA,eAAe,CAAC,OAAO,CAAC,GAAG,UAAU;EAAC,OAJ/BA,eAAe;AAK1B,CAAC,CAAEA,eAAe,IAAuB,CAAC,CAAE,CANlB;;AAO1B;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACO,MAAMC,SAAS,CAAC;EACnB0O,IAAI;EACJnI,QAAQ;EACRoI,QAAQ;EACR/M,WAAWA;EACX;AACJ;AACA;EACI8M,IAAI;EACJ;AACJ;AACA;EACInI,QAAQ;EACR;AACJ;AACA;EACIoI,QAAQ,EAAE;IACN,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACnI,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACoI,QAAQ,GAAGA,QAAQ;EAC5B;AACJ;AACA;;;;;;;;;;;;;;;;ACzBA;AACA;AACA;AACO,IAAIC,UAAU,gBACpB,UAAUA,UAAU,EAAE;EACnB;EACAA,UAAU,CAAC,KAAK,CAAC,GAAG,KAAK;EACzB;EACAA,UAAU,CAAC,OAAO,CAAC,GAAG,OAAO;EAC7B;EACAA,UAAU,CAAC,QAAQ,CAAC,GAAG,QAAQ;EAAC,OANzBA,UAAU;AAOrB,CAAC,CAAEA,UAAU,IAAkB,CAAC,CAAE,CARb;AASrB;AACA;AACA;AACO,MAAM3O,SAAS,CAAC;EACnB;AACJ;AACA;EACI4G,QAAQ;EACR;AACJ;AACA;EACIgI,EAAE;EACF;AACJ;AACA;EACIC,EAAE;EACF;AACJ;AACA;EACIC,MAAM;EACN;AACJ;AACA;EACIlD,KAAK;EACL;AACJ;AACA;EACImD,aAAa;EACb,OAAO1I,OAAOA,CAAC2I,KAAK,EAAE;IAClB,MAAMC,IAAI,GAAG5L,IAAI,CAAC6L,KAAK,CAACF,KAAK,CAACC,IAAI,CAAC;IACnC,OAAO,IAAIjP,SAAS,CAACmP,QAAQ,CAACH,KAAK,CAACJ,EAAE,CAAC,EAAEK,IAAI,CAACJ,EAAE,EAAEI,IAAI,CAACG,IAAI,EAAEH,IAAI,CAACL,EAAE,EAAEI,KAAK,CAAC5H,KAAK,EAAE6H,IAAI,CAACA,IAAI,CAAC;EACjG;EACAtN,WAAWA,CAACiF,QAAQ,EAAEiI,EAAE,EAAEjD,KAAK,EAAEgD,EAAE,EAAEG,aAAa,EAAED,MAAM,EAAE;IACxD,IAAI,CAAClI,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACgI,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAAClD,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACmD,aAAa,GAAGA,aAAa;EACtC;EACA;AACJ;AACA;EACIxL,MAAMA,CAAA,EAAG;IACL,OAAO;MACH8L,KAAK,EAAE,IAAI,CAACzI,QAAQ;MACpBiI,EAAE,EAAE,IAAI,CAACA,EAAE;MACXO,IAAI,EAAE,IAAI,CAACxD,KAAK;MAChBgD,EAAE,EAAE,IAAI,CAACA,EAAE;MACXxH,KAAK,EAAE,IAAI,CAAC2H,aAAa;MACzBE,IAAI,EAAE,IAAI,CAACH;IACf,CAAC;EACL;EACAQ,MAAMA,CAACC,KAAK,EAAE;IACV,OAAOlM,IAAI,CAACC,SAAS,CAAC,IAAI,CAACkM,iBAAiB,CAAC,CAAC,CAAC,IAAInM,IAAI,CAACC,SAAS,CAACiM,KAAK,CAACC,iBAAiB,CAAC,CAAC,CAAC;EAChG;EACA;AACJ;AACA;AACA;AACA;AACA;EACIC,QAAQA,CAAA,EAAG;IACP,OAAOpM,IAAI,CAACC,SAAS,CAAC,IAAI,CAACkM,iBAAiB,CAAC,CAAC,CAAC;EACnD;EACA;AACJ;AACA;EACIA,iBAAiBA,CAAA,EAAG;IAChB,OAAO,CAAC,IAAI,CAACT,aAAa,EAAE,IAAI,CAACnI,QAAQ,EAAE,IAAI,CAACiI,EAAE,EAAE,IAAI,CAACjD,KAAK,EAAE,IAAI,CAACgD,EAAE,EAAE,IAAI,CAACE,MAAM,CAAC;EACzF;AACJ;AACA;;;;;;;;;;;;;;;;ACpFwC;AACjC,MAAM7O,eAAe,SAASF,iDAAS,CAAC;EAC3C0O,IAAI;EACJC,QAAQ;EACRK,aAAa;EACbpN,WAAWA;EACX;AACJ;AACA;EACI8M,IAAI;EACJ;AACJ;AACA;EACIC,QAAQ;EACR;AACJ;AACA;EACIK,aAAa,EAAE;IACX,KAAK,CAACN,IAAI,EAAE,KAAK,EAAEC,QAAQ,CAAC;IAC5B,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACK,aAAa,GAAGA,aAAa;EACtC;AACJ;AACA;;;;;;;;;;;;;;;;ACxBO,IAAIW,UAAU,gBACpB,UAAUA,UAAU,EAAE;EACnBA,UAAU,CAACA,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO;EAC7CA,UAAU,CAACA,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM;EAC3CA,UAAU,CAACA,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK;EACzCA,UAAU,CAACA,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ;EAAC,OAJzCA,UAAU;AAKrB,CAAC,CAAEA,UAAU,IAAkB,CAAC,CAAE,CANb;AAOrB;AACA;AACA;AACO,MAAMC,MAAM,CAAC;EAChBzE,KAAK;EACL,OAAO0E,QAAQA,CAACC,SAAS,EAAE;IACvB,OAAO,IAAIF,MAAM,CAACD,UAAU,CAACG,SAAS,CAAC,CAAC;EAC5C;EACAlO,WAAWA,CAACuJ,KAAK,EAAE;IACf,IAAI,CAACA,KAAK,GAAGA,KAAK;EACtB;EACA3H,MAAMA,CAAA,EAAG;IACL,OAAOuM,MAAM,CAACC,OAAO,CAACL,UAAU,CAAC,CAACM,IAAI,CAAC,CAAC,GAAG9E,KAAK,CAAC,KAAKA,KAAK,KAAK,IAAI,CAACA,KAAK,CAAC,CAAC,CAAC,CAAC;EAClF;AACJ;AACA;;;;;;;;;;;;;;;;ACtBkC;AAC3B,MAAM+E,UAAU,CAAC;EACpBZ,KAAK;EACLR,EAAE;EACFqB,QAAQ;EACRC,MAAM;EACNC,WAAW;EACXC,SAAS;EACTpB,IAAI;EACJ,OAAO5I,OAAOA,CAACvB,GAAG,EAAE;IAChB,OAAO,IAAImL,UAAU,CAACnL,GAAG,CAACuK,KAAK,EAAEM,2CAAM,CAACC,QAAQ,CAAC9K,GAAG,CAAC+J,EAAE,CAAC,EAAE/J,GAAG,CAACoL,QAAQ,EAAE,OAAOpL,GAAG,CAACqL,MAAM,IAAI,QAAQ,GAAGrL,GAAG,CAACqL,MAAM,GAAG9M,IAAI,CAACC,SAAS,CAACwB,GAAG,CAACqL,MAAM,CAAC,EAAErL,GAAG,CAACsL,WAAW,EAAEtL,GAAG,CAACuL,SAAS,EAAEvL,GAAG,CAACmK,IAAI,CAAC;EAC9L;EACAtN,WAAWA,CAAC0N,KAAK,EAAER,EAAE,EAAEqB,QAAQ,EAAEC,MAAM,EAAEC,WAAW,EAAEC,SAAS,EAAEpB,IAAI,EAAE;IACnE,IAAI,CAACI,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACR,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACqB,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACpB,IAAI,GAAGA,IAAI;EACpB;EACA1L,MAAMA,CAAA,EAAG;IACL,OAAO;MACH8L,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBR,EAAE,EAAE,IAAI,CAACA,EAAE,CAACtL,MAAM,CAAC,CAAC;MACpB6M,WAAW,EAAE,IAAI,CAACA,WAAW;MAC7BC,SAAS,EAAE,IAAI,CAACA,SAAS;MACzBH,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACvBjB,IAAI,EAAE,IAAI,CAACA,IAAI;MACfkB,MAAM,EAAE9M,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC6M,MAAM;IACtC,CAAC;EACL;AACJ;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCkC;AAC0B;AACH;AACnB;AACE;AACT;AAC4B;AAC3D,MAAMM,0BAA0B,GAAG,KAAK;AACjC,IAAMC,mBAAmB;EAAzB,MAAMA,mBAAmB,SAAS/Q,6DAAY,CAAC;IAClDgR,EAAE;IACFC,KAAK;IACLjQ,MAAM;IACN,OAAOkQ,SAAS,GAAG,qBAAqB;IACxCC,UAAU;IACVC,oBAAoB;IACpBC,iBAAiB;IACjBC,cAAc;IACd;AACJ;AACA;IACIC,cAAc,GAAGT,0BAA0B;IAC3C9O,WAAWA,CAACgP,EAAE,EAAEC,KAAK,EAAEjQ,MAAM,GAAGpB,oDAAU,CAAC,qBAAqB,CAAC,EAAE;MAC/D,KAAK,CAAC,CAAC;MACP,IAAI,CAACoR,EAAE,GAAGA,EAAE;MACZ,IAAI,CAACC,KAAK,GAAGA,KAAK;MAClB,IAAI,CAACjQ,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACqQ,iBAAiB,GAAG,KAAK;MAC9B,IAAI,CAACD,oBAAoB,GAAG,IAAI;MAChC,IAAI,CAACD,UAAU,GAAG,IAAI5E,GAAG,CAAC,CAAC;MAC3B,IAAI,CAAC+E,cAAc,GAAGN,EAAE,CAAC9M,gBAAgB,CAAC;QACtC6I,aAAa,EAAGE,MAAM,IAAK;UACvB,MAAMxC,MAAM,GAAGoG,kEAAmB,CAAC5D,MAAM,CAAC;UAC1C,IAAIxC,MAAM,CAAC+G,QAAQ,CAACrR,kEAAe,CAAC2E,IAAI,CAAC,EAAE;YACvC,IAAI,CAAC5B,gBAAgB,CAAEuO,CAAC,IAAKA,CAAC,CAACC,UAAU,GAAG,CAAC,CAAC;UAClD;QACJ;MACJ,CAAC,CAAC;IACN;IACM9O,IAAIA,CAAA,EAAG;MAAA,IAAAJ,KAAA;MAAA,OAAAC,2HAAA;QACTD,KAAI,CAAC6O,iBAAiB,GAAG,KAAK;QAC9B,MAAMpM,iBAAiB,SAASzC,KAAI,CAACwO,EAAE,CAAClO,OAAO,CAAE,6EAA4E,CAAC;QAC9H,KAAK,MAAMqC,GAAG,IAAIF,iBAAiB,CAAClC,IAAI,EAAEqC,MAAM,IAAI,EAAE,EAAE;UACpD5C,KAAI,CAAC2O,UAAU,CAAC9C,GAAG,CAAClJ,GAAG,CAACE,IAAI,CAAC;QACjC;MAAC;IACL;IACMd,OAAOA,CAAA,EAAG;MAAA,IAAA7B,MAAA;MAAA,OAAAD,2HAAA;QACZC,MAAI,CAAC4O,cAAc,GAAG,CAAC;MAAC;IAC5B;IACArJ,UAAUA,CAAA,EAAG;MACT,OAAO8I,mBAAmB,CAACG,SAAS;IACxC;IACA;AACJ;AACA;IACIS,YAAYA,CAAA,EAAG,CAAE;IACXC,eAAeA,CAAA,EAAG;MAAA,IAAAvO,MAAA;MAAA,OAAAZ,2HAAA;QACpB,MAAMuD,MAAM,SAAS3C,MAAI,CAAC2N,EAAE,CAAClO,OAAO,CAAC,gGAAgG,CAAC;QACtI,OAAOkD,MAAM,CAACjD,IAAI,EAAEqC,MAAM,IAAI,EAAE;MAAC;IACrC;IACMyM,YAAYA,CAACC,KAAK,EAAE;MAAA,IAAAjO,MAAA;MAAA,OAAApB,2HAAA;QACtB,MAAMoB,MAAI,CAACa,gBAAgB;UAAA,IAAAC,IAAA,GAAAlC,2HAAA,CAAC,WAAOmC,EAAE,EAAK;YACtC,IAAIqB,KAAK,GAAG,CAAC;YACb,KAAK,MAAM8L,CAAC,IAAID,KAAK,CAACE,OAAO,EAAE;cAC3B,MAAMhM,MAAM,SAASpB,EAAE,CAAC9B,OAAO,CAAC,yDAAyD,EAAE,CACvF,MAAM,EACNY,IAAI,CAACC,SAAS,CAAC;gBAAEqO,OAAO,EAAE,CAACD,CAAC,CAACnO,MAAM,CAAC,CAAC;cAAE,CAAC,CAAC,CAC5C,CAAC;cACFC,MAAI,CAAC7C,MAAM,CAACiR,KAAK,CAAC,cAAc,EAAEvO,IAAI,CAACC,SAAS,CAACqC,MAAM,CAAC,CAAC;cACzDC,KAAK,IAAI8L,CAAC,CAACzC,IAAI,CAACpK,MAAM;YAC1B;YACArB,MAAI,CAAC0N,cAAc,IAAItL,KAAK;UAChC,CAAC;UAAA,iBAAAX,EAAA;YAAA,OAAAX,IAAA,CAAAY,KAAA,OAAAC,SAAA;UAAA;QAAA,IAAC;MAAC;IACP;IACM0M,aAAaA,CAACF,OAAO,EAAE;MAAA,IAAAhO,MAAA;MAAA,OAAAvB,2HAAA;QACzB,KAAK,MAAM0P,MAAM,IAAIH,OAAO,EAAE;UAC1B,MAAMhO,MAAI,CAACoO,YAAY,CAACD,MAAM,CAAC;QACnC;MAAC;IACL;IACA;AACJ;AACA;IACUC,YAAYA,CAACD,MAAM,EAAE;MAAA,IAAA7N,MAAA;MAAA,OAAA7B,2HAAA;QACvB;QACA;QACA;QACA;QACA,MAAM4P,OAAO,GAAI,WAAUF,MAAO,IAAGvB,wCAAI,CAAC,CAAE,EAAC;QAC7CtM,MAAI,CAACtD,MAAM,CAACiR,KAAK,CAAC,iBAAiB,EAAEE,MAAM,CAAC;QAC5C;QACA,MAAM7N,MAAI,CAACI,gBAAgB;UAAA,IAAAqB,KAAA,GAAAtD,2HAAA,CAAC,WAAOmC,EAAE,EAAK;YACtC,MAAMA,EAAE,CAAC9B,OAAO,CAAE,0BAAyBiN,+CAAU,CAACuC,MAAO,wBAAuBvC,+CAAU,CAACwC,GAAI,gCAA+B,EAAE,CAACJ,MAAM,CAAC,CAAC;YAC7I;YACA,MAAMvN,EAAE,CAAC9B,OAAO,CAAC,6CAA6C,EAAE,CAACuP,OAAO,EAAEF,MAAM,CAAC,CAAC;YAClF,MAAMvN,EAAE,CAAC9B,OAAO,CAAC,uCAAuC,EAAE,CAACqP,MAAM,CAAC,CAAC;YACnE,MAAMvN,EAAE,CAAC9B,OAAO,CAAC,yHAAyH,EAAE,CAACuP,OAAO,EAAEA,OAAO,CAAC,CAAC;UACnK,CAAC;UAAA,iBAAAlM,GAAA;YAAA,OAAAJ,KAAA,CAAAR,KAAA,OAAAC,SAAA;UAAA;QAAA,IAAC;QACFlB,MAAI,CAACtD,MAAM,CAACiR,KAAK,CAAC,sBAAsB,CAAC;QACzC3N,MAAI,CAAC8M,oBAAoB,GAAG,IAAI;MAAC;IACrC;IACMoB,gBAAgBA,CAAA,EAAG;MAAA,IAAA/N,MAAA;MAAA,OAAAhC,2HAAA;QACrB,IAAIgC,MAAI,CAAC4M,iBAAiB,EAAE;UACxB,OAAO,IAAI;QACf;QACA,MAAMoB,CAAC,SAAShO,MAAI,CAACuM,EAAE,CAAClO,OAAO,CAAE,gFAA+E,CAAC;QACjH,MAAM4P,SAAS,GAAG,CAAC,CAACD,CAAC,CAAC1P,IAAI,EAAEmC,MAAM;QAClC,IAAIwN,SAAS,EAAE;UACXjO,MAAI,CAAC4M,iBAAiB,GAAG,IAAI;QACjC;QACA,OAAOqB,SAAS;MAAC;IACrB;IACMC,iBAAiBA,CAACC,UAAU,EAAE;MAAA,IAAAlN,MAAA;MAAA,OAAAjD,2HAAA;QAChC,MAAMgQ,CAAC,SAAS/M,MAAI,CAACmN,iBAAiB,CAACD,UAAU,CAAC;QAClD,IAAI,CAACH,CAAC,CAACK,eAAe,EAAE;UACpBpN,MAAI,CAAC1E,MAAM,CAACkJ,KAAK,CAAC,sBAAsB,EAAEuI,CAAC,CAACM,kBAAkB,CAAC;UAC/D,KAAK,MAAMhB,CAAC,IAAIU,CAAC,CAACM,kBAAkB,IAAI,EAAE,EAAE;YACxC,MAAMrN,MAAI,CAAC0M,YAAY,CAACL,CAAC,CAAC;UAC9B;UACA,OAAO;YAAEvQ,KAAK,EAAE,KAAK;YAAEsR,eAAe,EAAE,KAAK;YAAEC,kBAAkB,EAAEN,CAAC,CAACM;UAAmB,CAAC;QAC7F;QACA,MAAMC,WAAW,GAAGJ,UAAU,CAACZ,OAAO,CAACvL,GAAG,CAAEsL,CAAC,IAAKA,CAAC,CAACI,MAAM,CAAC;QAC3D,MAAMzM,MAAI,CAAChB,gBAAgB;UAAA,IAAAoC,KAAA,GAAArE,2HAAA,CAAC,WAAOmC,EAAE,EAAK;YACtC,MAAMA,EAAE,CAAC9B,OAAO,CAAE,4FAA2F,EAAE,CAC3G8P,UAAU,CAACK,UAAU,EACrBvP,IAAI,CAACC,SAAS,CAACqP,WAAW,CAAC,CAC9B,CAAC;YACF,IAAIJ,UAAU,CAACM,gBAAgB,EAAE;cAC7B,MAAMtO,EAAE,CAAC9B,OAAO,CAAC,yDAAyD,EAAE,CAAC8P,UAAU,CAACM,gBAAgB,CAAC,CAAC;YAC9G;UACJ,CAAC;UAAA,iBAAAhM,GAAA;YAAA,OAAAJ,KAAA,CAAAvB,KAAA,OAAAC,SAAA;UAAA;QAAA,IAAC;QACF,MAAM2N,KAAK,SAASzN,MAAI,CAAC0N,wBAAwB,CAACR,UAAU,CAAC;QAC7D,IAAI,CAACO,KAAK,EAAE;UACRzN,MAAI,CAAC1E,MAAM,CAACiR,KAAK,CAAC,yDAAyD,CAAC;UAC5E,OAAO;YAAEzQ,KAAK,EAAE,KAAK;YAAEsR,eAAe,EAAE;UAAK,CAAC;QAClD;QACA,MAAMpN,MAAI,CAAC2N,YAAY,CAAC,CAAC;QACzB,OAAO;UACH7R,KAAK,EAAE,IAAI;UACXsR,eAAe,EAAE;QACrB,CAAC;MAAC;IACN;IACA;AACJ;AACA;AACA;AACA;IACUM,wBAAwBA,CAACR,UAAU,EAAE;MAAA,IAAA/M,MAAA;MAAA,OAAApD,2HAAA;QACvC,OAAOoD,MAAI,CAACnB,gBAAgB;UAAA,IAAA2C,KAAA,GAAA5E,2HAAA,CAAC,WAAOmC,EAAE,EAAK;YACvC,MAAM;cAAE0O,QAAQ,EAAEtN;YAAO,CAAC,SAASpB,EAAE,CAAC9B,OAAO,CAAC,yDAAyD,EAAE,CACrG,YAAY,EACZ,EAAE,CACL,CAAC;YACF,OAAOkD,MAAM,IAAI,CAAC;UACtB,CAAC;UAAA,iBAAA4B,GAAA;YAAA,OAAAP,KAAA,CAAA9B,KAAA,OAAAC,SAAA;UAAA;QAAA,IAAC;MAAC;IACP;IACMqN,iBAAiBA,CAACD,UAAU,EAAE;MAAA,IAAAtM,OAAA;MAAA,OAAA7D,2HAAA;QAChC,MAAM8Q,EAAE,SAASjN,OAAI,CAAC0K,EAAE,CAAClO,OAAO,CAAC,mDAAmD,EAAE,CAACY,IAAI,CAACC,SAAS,CAACiP,UAAU,CAAC,CAAC,CAAC;QACnH,MAAMY,UAAU,GAAGD,EAAE,CAACxQ,IAAI,EAAEC,IAAI,CAAC,CAAC,CAAC;QACnCsD,OAAI,CAACtF,MAAM,CAACiR,KAAK,CAAC,+BAA+B,EAAEuB,UAAU,CAAC;QAC9D,IAAI,CAACA,UAAU,EAAE;UACb,OAAO;YACHV,eAAe,EAAE,KAAK;YACtBtR,KAAK,EAAE,KAAK;YACZuR,kBAAkB,EAAE;UACxB,CAAC;QACL;QACA,MAAM/M,MAAM,GAAGtC,IAAI,CAAC6L,KAAK,CAACiE,UAAU,CAAC,QAAQ,CAAC,CAAC;QAC/C,IAAIxN,MAAM,CAAC,OAAO,CAAC,EAAE;UACjB,OAAO;YAAExE,KAAK,EAAE,IAAI;YAAEsR,eAAe,EAAE;UAAK,CAAC;QACjD,CAAC,MACI;UACD,OAAO;YACHA,eAAe,EAAE,KAAK;YACtBtR,KAAK,EAAE,KAAK;YACZuR,kBAAkB,EAAE/M,MAAM,CAAC,gBAAgB;UAC/C,CAAC;QACL;MAAC;IACL;IACA;AACJ;AACA;IACUqN,YAAYA,CAAA,EAAG;MAAA,IAAAjM,OAAA;MAAA,OAAA3E,2HAAA;QACjB2E,OAAI,CAACmK,cAAc,GAAGT,0BAA0B;QAChD1J,OAAI,CAACgK,oBAAoB,GAAG,IAAI;QAChC,MAAMhK,OAAI,CAACqM,WAAW,CAAC,CAAC;MAAC;IAC7B;IACMA,WAAWA,CAAA,EAAG;MAAA,IAAA3L,OAAA;MAAA,OAAArF,2HAAA;QAChB,MAAMqF,OAAI,CAAC4L,oBAAoB,CAAC,CAAC;QACjC,MAAM5L,OAAI,CAAC6L,cAAc,CAAC,CAAC;MAAC;IAChC;IACMD,oBAAoBA,CAAA,EAAG;MAAA,IAAArL,OAAA;MAAA,OAAA5F,2HAAA;QACzB,IAAI4F,OAAI,CAAC+I,oBAAoB,KAAK,KAAK,EAAE;UACrC,MAAM/I,OAAI,CAAC3D,gBAAgB;YAAA,IAAAgD,KAAA,GAAAjF,2HAAA,CAAC,WAAOmC,EAAE,EAAK;cACtC,MAAMA,EAAE,CAAC9B,OAAO,CAAC,oJAAoJ,CAAC;cACtK,MAAM8B,EAAE,CAAC9B,OAAO,CAAC,wGAAwG,CAAC;YAC9H,CAAC;YAAA,iBAAA6E,GAAA;cAAA,OAAAD,KAAA,CAAAnC,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;UACF;UACA6C,OAAI,CAAC+I,oBAAoB,GAAG,KAAK;QACrC;MAAC;IACL;IACMuC,cAAcA,CAAA,EAAG;MAAA,IAAArL,OAAA;MAAA,OAAA7F,2HAAA;QACnB,IAAI6F,OAAI,CAACiJ,cAAc,GAAGT,0BAA0B,EAAE;UAClD;QACJ;QACA,MAAMxI,OAAI,CAAC5D,gBAAgB;UAAA,IAAAqD,KAAA,GAAAtF,2HAAA,CAAC,WAAOmC,EAAE,EAAK;YACtC,MAAMA,EAAE,CAAC9B,OAAO,CAAC,0DAA0D,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC;UAC1G,CAAC;UAAA,iBAAAoF,GAAA;YAAA,OAAAH,KAAA,CAAAxC,KAAA,OAAAC,SAAA;UAAA;QAAA,IAAC;QACF8C,OAAI,CAACiJ,cAAc,GAAG,CAAC;MAAC;IAC5B;IACMqC,iBAAiBA,CAACzQ,EAAE,EAAE;MAAA,IAAAoF,OAAA;MAAA,OAAA9F,2HAAA;QACxB,MAAMoR,GAAG,SAAStL,OAAI,CAACyI,EAAE,CAAClO,OAAO,CAAC,0EAA0E,EAAE,CAC1GiO,mBAAmB,CAACG,SAAS,CAChC,CAAC;QACF,IAAI,CAAC2C,GAAG,CAAC9Q,IAAI,EAAEmC,MAAM,EAAE;UACnB;UACA,OAAO,KAAK;QAChB;QACA,MAAMqO,EAAE,SAAShL,OAAI,CAACyI,EAAE,CAAClO,OAAO,CAAC,wDAAwD,CAAC;QAC1F,IAAI,CAACyQ,EAAE,CAACxQ,IAAI,EAAEmC,MAAM,EAAE;UAClB;UACA,OAAO,KAAK;QAChB;QACA,MAAM4O,SAAS,GAAGP,EAAE,CAACxQ,IAAI,EAAEC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QACzC,MAAM+Q,IAAI,SAAS5Q,EAAE,CAAC,CAAC;QACvBoF,OAAI,CAACvH,MAAM,CAACiR,KAAK,CAAE,qDAAoD8B,IAAK,EAAC,CAAC;QAC9E,OAAOxL,OAAI,CAAC7D,gBAAgB;UAAA,IAAAsP,KAAA,GAAAvR,2HAAA,CAAC,WAAOmC,EAAE,EAAK;YACvC,MAAMqP,OAAO,SAASrP,EAAE,CAAC9B,OAAO,CAAC,+BAA+B,CAAC;YACjE,IAAImR,OAAO,CAAClR,IAAI,EAAEmC,MAAM,EAAE;cACtB;cACAqD,OAAI,CAACvH,MAAM,CAACiR,KAAK,CAAC,mBAAmB,EAAE,sBAAsB,CAAC;cAC9D,OAAO,KAAK;YAChB;YACA,MAAMsB,EAAE,SAAS3O,EAAE,CAAC9B,OAAO,CAAC,wDAAwD,CAAC;YACrF,IAAI,CAACyQ,EAAE,CAACxQ,IAAI,EAAEmC,MAAM,EAAE;cAClB;cACA,MAAM,IAAI5B,KAAK,CAAC,qCAAqC,CAAC;YAC1D;YACA,MAAM4Q,QAAQ,GAAGX,EAAE,CAACxQ,IAAI,EAAEC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YACxCuF,OAAI,CAACvH,MAAM,CAACiR,KAAK,CAAC,UAAU,EAAEvO,IAAI,CAACC,SAAS,CAAC4P,EAAE,CAACxQ,IAAI,EAAEC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/D,IAAIkR,QAAQ,IAAIJ,SAAS,EAAE;cACvBvL,OAAI,CAACvH,MAAM,CAACiR,KAAK,CAAC,uBAAuB,EAAEiC,QAAQ,EAAEJ,SAAS,CAAC;cAC/D;cACA,OAAO,KAAK;YAChB;YACA,MAAMK,QAAQ,SAASvP,EAAE,CAAC9B,OAAO,CAAC,yDAAyD,EAAE,CAACiR,IAAI,CAAC,CAAC;YACpGxL,OAAI,CAACvH,MAAM,CAACiR,KAAK,CAAC,CAAC,uDAAuD,EAAEvO,IAAI,CAACC,SAAS,CAACwQ,QAAQ,CAAC,CAAC,CAAC;YACtG,OAAO,IAAI;UACf,CAAC;UAAA,iBAAAhL,GAAA;YAAA,OAAA6K,KAAA,CAAAzO,KAAA,OAAAC,SAAA;UAAA;QAAA,IAAC;MAAC;IACP;IACM4O,OAAOA,CAAA,EAAG;MAAA,IAAA5L,OAAA;MAAA,OAAA/F,2HAAA;QACZ,MAAMwR,OAAO,SAASzL,OAAI,CAACwI,EAAE,CAAClO,OAAO,CAAC,+BAA+B,CAAC;QACtE,OAAO,CAAC,CAACmR,OAAO,CAAClR,IAAI,EAAEmC,MAAM;MAAC;IAClC;IACA;AACJ;AACA;AACA;IACUkB,YAAYA,CAACC,KAAK,GAAG,GAAG,EAAE;MAAA,IAAAsC,OAAA;MAAA,OAAAlG,2HAAA;QAC5B,IAAI,QAAQkG,OAAI,CAACyL,OAAO,CAAC,CAAC,CAAC,EAAE;UACzB,OAAO,IAAI;QACf;QACA,MAAMC,UAAU,SAAS1L,OAAI,CAACqI,EAAE,CAAClO,OAAO,CAAC,+CAA+C,EAAE,CAACuD,KAAK,CAAC,CAAC;QAClG,MAAMG,GAAG,GAAG,EAAE;QACd,KAAK,MAAMrB,GAAG,IAAIkP,UAAU,CAACtR,IAAI,EAAEqC,MAAM,IAAI,EAAE,EAAE;UAC7CoB,GAAG,CAACoE,IAAI,CAACvK,iDAAS,CAACqG,OAAO,CAACvB,GAAG,CAAC,CAAC;QACpC;QACA,IAAIqB,GAAG,CAACtB,MAAM,KAAK,CAAC,EAAE;UAClB,OAAO,IAAI;QACf;QACA,MAAM2B,IAAI,GAAGL,GAAG,CAACA,GAAG,CAACtB,MAAM,GAAG,CAAC,CAAC;QAChC,OAAO;UACH4J,IAAI,EAAEtI,GAAG;UACTG,QAAQ,EAAE,IAAI;UACdoI,QAAQ;YAAA,IAAA9F,KAAA,GAAAxG,2HAAA,CAAE,WAAOsE,eAAe,EAAK;cACjC,OAAO4B,OAAI,CAACjE,gBAAgB;gBAAA,IAAA4E,KAAA,GAAA7G,2HAAA,CAAC,WAAOmC,EAAE,EAAK;kBACvC,MAAMA,EAAE,CAAC9B,OAAO,CAAC,mCAAmC,EAAE,CAAC+D,IAAI,CAACI,QAAQ,CAAC,CAAC;kBACtE,IAAIF,eAAe,EAAE;oBACjB,MAAMsN,UAAU,SAASzP,EAAE,CAAC9B,OAAO,CAAC,+BAA+B,CAAC;oBACpE,IAAIuR,UAAU,CAACtR,IAAI,EAAEmC,MAAM,EAAE;sBACzB,MAAMN,EAAE,CAAC9B,OAAO,CAAC,yDAAyD,EAAE,CAACiE,eAAe,CAAC,CAAC;oBAClG;kBACJ,CAAC,MACI;oBACD,MAAMnC,EAAE,CAAC9B,OAAO,CAAC,yDAAyD,EAAE,CAAC6F,OAAI,CAACV,UAAU,CAAC,CAAC,CAAC,CAAC;kBACpG;gBACJ,CAAC;gBAAA,iBAAAmF,GAAA;kBAAA,OAAA9D,KAAA,CAAA/D,KAAA,OAAAC,SAAA;gBAAA;cAAA,IAAC;YACN,CAAC;YAAA,gBAAAuJ,SAAAvF,GAAA;cAAA,OAAAP,KAAA,CAAA1D,KAAA,OAAAC,SAAA;YAAA;UAAA;QACL,CAAC;MAAC;IACN;IACMd,gBAAgBA,CAACgE,QAAQ,EAAErH,OAAO,EAAE;MAAA,IAAAwH,OAAA;MAAA,OAAApG,2HAAA;QACtC,OAAOoG,OAAI,CAACmI,EAAE,CAACtM,gBAAgB,CAACgE,QAAQ,EAAErH,OAAO,CAAC;MAAC;IACvD;IACA;AACJ;AACA;IACUiT,mBAAmBA,CAAC1B,UAAU,EAAE;MAAA,OAAAnQ,2HAAA;IAEtC,CAAC,CADG;EAER;EAAC,OAjSYsO,mBAAmB;AAAA;AAkShC;;;;;;;;;;;;;;;;AC1SkD;AAClD;AACO,MAAMyD,aAAa,CAAC;EACvBxC,OAAO;EACP,OAAO/B,QAAQA,CAACwE,IAAI,EAAE;IAClB,OAAO,IAAID,aAAa,CAACC,IAAI,CAACzC,OAAO,CAACvL,GAAG,CAAE0L,MAAM,IAAKoC,2DAAc,CAAC7N,OAAO,CAACyL,MAAM,CAAC,CAAC,CAAC;EAC1F;EACAnQ,WAAWA,CAACgQ,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAGA,OAAO;EAC1B;AACJ;AACA;;;;;;;;;;;;;;;;;ACX0C;AACnC,MAAMd,SAAS,GAAG,qBAAqB;AACvC,MAAMqD,cAAc,CAAC;EACxBpC,MAAM;EACN7C,IAAI;EACJoF,QAAQ;EACRC,KAAK;EACLC,UAAU;EACV,OAAOlO,OAAOA,CAACvB,GAAG,EAAE;IAChB,OAAO,IAAIoP,cAAc,CAACpP,GAAG,CAACgN,MAAM,EAAEhN,GAAG,CAACmK,IAAI,CAAC7I,GAAG,CAAEmJ,KAAK,IAAKU,mDAAU,CAAC5J,OAAO,CAACkJ,KAAK,CAAC,CAAC,EAAEzK,GAAG,CAACuP,QAAQ,IAAI,KAAK,EAAEvP,GAAG,CAACwP,KAAK,EAAExP,GAAG,CAACyP,UAAU,CAAC;EAC/I;EACA5S,WAAWA,CAACmQ,MAAM,EAAE7C,IAAI;EACxB;AACJ;AACA;EACIoF,QAAQ;EACR;AACJ;AACA;EACIC,KAAK;EACL;AACJ;AACA;EACIC,UAAU,EAAE;IACR,IAAI,CAACzC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAAC7C,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACoF,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,UAAU,GAAGA,UAAU;EAChC;EACAhR,MAAMA,CAAA,EAAG;IACL,OAAO;MACHuO,MAAM,EAAE,IAAI,CAACA,MAAM;MACnBuC,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACvBC,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBC,UAAU,EAAE,IAAI,CAACA,UAAU;MAC3BtF,IAAI,EAAE,IAAI,CAACA,IAAI,CAAC7I,GAAG,CAAEmJ,KAAK,IAAKA,KAAK,CAAChM,MAAM,CAAC,CAAC;IACjD,CAAC;EACL;AACJ;AACA;;;;;;;;;;;;;;;;;;;;ACxC+B;AAC/B;AACA,MAAMiR,oCAAoC,GAAG,MAAM;AAC5C,MAAMC,qBAAqB,GAAGlV,oDAAU,CAAC,iBAAiB,CAAC;AAC3D,MAAMmV,cAAc,CAAC;EACxBhR,SAAS;EACT/C,MAAM;EACNgU,WAAW,GAAG,IAAI;EAClBhT,WAAWA,CAAC+B,SAAS,EAAE/C,MAAM,GAAG8T,qBAAqB,EAAE;IACnD,IAAI,CAAC/Q,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAAC/C,MAAM,GAAGA,MAAM;EACxB;EACMiU,cAAcA,CAAA,EAAG;IAAA,IAAAzS,KAAA;IAAA,OAAAC,2HAAA;MACnB,MAAM;QAAEyS;MAAU,CAAC,GAAG1S,KAAI,CAACwS,WAAW,IAAI,CAAC,CAAC;MAC5C,IAAIE,SAAS,IAAIA,SAAS,GAAG,IAAIC,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,GAAGP,oCAAoC,CAAC,EAAE;QAChG,OAAOrS,KAAI,CAACwS,WAAW;MAC3B;MACAxS,KAAI,CAACwS,WAAW,SAASxS,KAAI,CAACuB,SAAS,CAACsR,gBAAgB,CAAC,CAAC;MAC1D,OAAO7S,KAAI,CAACwS,WAAW;IAAC;EAC5B;EACMM,YAAYA,CAACC,IAAI,EAAE;IAAA,IAAA7S,MAAA;IAAA,OAAAD,2HAAA;MACrB,MAAMuS,WAAW,SAAStS,MAAI,CAACuS,cAAc,CAAC,CAAC;MAC/C,IAAID,WAAW,IAAI,IAAI,KAAKA,WAAW,CAACQ,QAAQ,IAAI,IAAI,IAAIR,WAAW,CAACQ,QAAQ,IAAI,EAAE,CAAC,EAAE;QACrF,MAAM,IAAIlS,KAAK,CAAC,mCAAmC,CAAC;MACxD,CAAC,MACI,IAAI0R,WAAW,EAAES,KAAK,IAAI,IAAI,IAAIT,WAAW,EAAES,KAAK,IAAI,EAAE,EAAE;QAC7D,MAAMvL,KAAK,GAAG,IAAI5G,KAAK,CAAE,eAAc,CAAC;QACxC4G,KAAK,CAAC9F,MAAM,GAAG,GAAG;QAClB,MAAM8F,KAAK;MACf;MACA,OAAO;QACHwL,GAAG,EAAEV,WAAW,CAACQ,QAAQ,GAAGD,IAAI;QAChCI,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAG,SAAQZ,WAAW,CAACS,KAAM;QAC9C;MACJ,CAAC;IAAC;EACN;EACAI,WAAWA,CAAA,EAAG;IACV,OAAO,IAAI;EACf;AACJ;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1CuC;AACR;AACiJ;AACnI;AACY;AACC;AACC;AACpD,IAAIQ,QAAQ,gBAClB,UAAUA,QAAQ,EAAE;EACjBA,QAAQ,CAAC,MAAM,CAAC,GAAG,MAAM;EACzBA,QAAQ,CAAC,MAAM,CAAC,GAAG,MAAM;EAAC,OAFnBA,QAAQ;AAGnB,CAAC,CAAEA,QAAQ,IAAgB,CAAC,CAAE,CAJX;AAKZ,MAAM9V,+BAA+B,GAAG,IAAI;AAC5C,MAAM+V,8BAA8B,GAAG;EAC1CC,YAAY,EAAE,IAAI;EAClBvV,MAAM,EAAEpB,oDAAU,CAAC,iBAAiB,CAAC;EACrCsB,oBAAoB,EAAEX;AAC1B,CAAC;AACM,MAAMiW,mCAAmC,SAASxW,8DAAY,CAAC;EAClEyW,aAAa;EACbpV,OAAO;EACPqV,eAAe;EACfC,kBAAkB;EAClBC,UAAU;EACVvS,iBAAiB;EACjBrC,WAAWA,CAACX,OAAO,EAAE;IACjB,KAAK,CAAC,CAAC;IACP,IAAI,CAACA,OAAO,GAAG;MAAE,GAAGiV,8BAA8B;MAAE,GAAGjV;IAAQ,CAAC;IAChE,IAAI,CAACuV,UAAU,GAAG,IAAIR,2DAAU,CAAC;MAC7B9T,SAAS,EAAE,KAAK;MAChBuU,YAAY,EAAE3U,SAAS;MACvB4U,QAAQ,EAAE;QACNC,SAAS,EAAE,KAAK;QAChBC,WAAW,EAAE;MACjB;IACJ,CAAC,CAAC;IACF,IAAI,CAACN,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACrS,iBAAiB,GAAGxE,sDAAQ,CAAC,MAAM;MACpC,IAAI,CAAC,IAAI,CAAC+W,UAAU,CAACtU,SAAS,IAAI,IAAI,CAACsU,UAAU,CAACK,cAAc,CAACF,SAAS,EAAE;QACxE;MACJ;MACA,IAAI,CAACG,cAAc,CAAC,CAAC;IACzB,CAAC,EAAE,IAAI,CAAC7V,OAAO,CAACH,oBAAoB,EAAE;MAAE4L,QAAQ,EAAE;IAAK,CAAC,CAAC;EAC7D;EACMvK,YAAYA,CAAA,EAAG;IAAA,OAAAE,2HAAA;EAAE;EACvB0U,aAAaA,CAAC/S,MAAM,EAAE;IAClB,OAAO,IAAIgT,OAAO,CAAEC,OAAO,IAAK;MAC5B,MAAM5F,CAAC,GAAG,IAAI,CAACvN,gBAAgB,CAAC;QAC5BC,aAAa,EAAGmT,aAAa,IAAK;UAC9B;AACpB;AACA;AACA;UACoB,MAAMC,kBAAkB,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;YACzC,OAAOtH,MAAM,CAACC,OAAO,CAACoH,KAAK,CAAC,CAACE,KAAK,CAAC,CAAC,CAACC,GAAG,EAAEpM,KAAK,CAAC,KAAK;cACjD,MAAMqM,gBAAgB,GAAGH,KAAK,CAACE,GAAG,CAAC;cACnC,IAAI,OAAOpM,KAAK,IAAI,QAAQ,IAAI,OAAOqM,gBAAgB,IAAI,QAAQ,EAAE;gBACjE,OAAOL,kBAAkB,CAAChM,KAAK,EAAEqM,gBAAgB,CAAC;cACtD;cACA,OAAOrM,KAAK,IAAIqM,gBAAgB;YACpC,CAAC,CAAC;UACN,CAAC;UACD,IAAIL,kBAAkB,CAACnT,MAAM,EAAEkT,aAAa,CAAC1T,MAAM,CAAC,CAAC,CAAC,EAAE;YACpDyT,OAAO,CAAC,CAAC;YACT5F,CAAC,GAAG,CAAC;UACT;QACJ;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EACA,IAAIoF,YAAYA,CAAA,EAAG;IACf,MAAMgB,UAAU,GAAG,IAAI,CAACjB,UAAU,CAACC,YAAY;IAC/C,OAAOgB,UAAU,IAAI,IAAI1C,IAAI,CAAC0C,UAAU,CAAC;EAC7C;EACA,IAAIC,WAAWA,CAAA,EAAG;IACd,OAAO,IAAI,CAAClB,UAAU,CAACtU,SAAS;EACpC;EACA,IAAItB,MAAMA,CAAA,EAAG;IACT,OAAO,IAAI,CAACK,OAAO,CAACL,MAAM;EAC9B;EACMuD,OAAOA,CAAA,EAAG;IAAA,IAAA7B,MAAA;IAAA,OAAAD,2HAAA;MACZC,MAAI,CAACiU,kBAAkB,GAAG,CAAC;MAC3BjU,MAAI,CAACiU,kBAAkB,GAAGzU,SAAS;IAAC;EACxC;EACMsQ,gBAAgBA,CAAA,EAAG;IAAA,IAAAnP,MAAA;IAAA,OAAAZ,2HAAA;MACrB,OAAOY,MAAI,CAAChC,OAAO,CAAC0W,OAAO,CAACvF,gBAAgB,CAAC,CAAC;IAAC;EACnD;EACMwF,kBAAkBA,CAAA,EAAG;IAAA,IAAAnU,MAAA;IAAA,OAAApB,2HAAA;MACvB,MAAM0R,QAAQ,SAAStQ,MAAI,CAACxC,OAAO,CAAC4W,MAAM,CAAChX,GAAG,CAAC,yBAAyB,CAAC;MACzE,OAAOkT,QAAQ,CAAC,MAAM,CAAC,CAAC,kBAAkB,CAAC;IAAC;EAChD;EACM+C,cAAcA,CAAA,EAAG;IAAA,IAAAlT,MAAA;IAAA,OAAAvB,2HAAA;MACnB,OAAOuB,MAAI,CAACkU,UAAU,CAAC;QACnBzI,IAAI,EAAE4G,QAAQ,CAACvR,IAAI;QACnB4D,QAAQ;UAAA,IAAA/D,IAAA,GAAAlC,2HAAA,CAAE,aAAY;YAClBuB,MAAI,CAACmU,gBAAgB,CAAC;cAClBrB,QAAQ,EAAE;gBACNC,SAAS,EAAE;cACf;YACJ,CAAC,CAAC;YACF,OAAO,IAAI,EAAE;cACT,IAAI;gBACA,MAAM1L,IAAI,SAASrH,MAAI,CAACoU,eAAe,CAAC,CAAC;gBACzC,IAAI/M,IAAI,EAAE;kBACN;gBACJ;cACJ,CAAC,CACD,OAAO7H,EAAE,EAAE;gBACPQ,MAAI,CAACmU,gBAAgB,CAAC;kBAClB7V,SAAS,EAAE,KAAK;kBAChBwU,QAAQ,EAAE;oBACNC,SAAS,EAAE;kBACf;gBACJ,CAAC,CAAC;gBACF,MAAM/S,MAAI,CAACqU,UAAU,CAAC,CAAC;gBACvB;cACJ,CAAC,SACO;gBACJrU,MAAI,CAACmU,gBAAgB,CAAC;kBAClBrB,QAAQ,EAAE;oBACNC,SAAS,EAAE;kBACf;gBACJ,CAAC,CAAC;cACN;YACJ;UACJ,CAAC;UAAA,gBAAArO,SAAA;YAAA,OAAA/D,IAAA,CAAAY,KAAA,OAAAC,SAAA;UAAA;QAAA;MACL,CAAC,CAAC;IAAC;EACP;EACM4S,eAAeA,CAAA,EAAG;IAAA,IAAA9T,MAAA;IAAA,OAAA7B,2HAAA;MACpB,MAAM2R,OAAO,SAAS9P,MAAI,CAACjD,OAAO,CAAC0W,OAAO,CAAC3D,OAAO,CAAC,CAAC;MACpD,IAAIA,OAAO,EAAE;QACT,MAAM9P,MAAI,CAACjD,OAAO,CAACiX,UAAU,CAAC,CAAC;QAC/B,OAAO,KAAK;MAChB,CAAC,MACI;QACD,MAAMhU,MAAI,CAACjD,OAAO,CAAC0W,OAAO,CAACnE,iBAAiB,CAAC,MAAMtP,MAAI,CAAC0T,kBAAkB,CAAC,CAAC,CAAC;QAC7E,OAAO,IAAI;MACf;IAAC;EACL;EACMlU,OAAOA,CAAA,EAAG;IAAA,IAAAW,MAAA;IAAA,OAAAhC,2HAAA;MACZ,IAAIgC,MAAI,CAACiS,eAAe,EAAE;QACtB,MAAMjS,MAAI,CAAC7D,UAAU,CAAC,CAAC;MAC3B;MACA6D,MAAI,CAACiS,eAAe,GAAG,IAAI6B,eAAe,CAAC,CAAC;MAC5C9T,MAAI,CAAC+T,aAAa,CAAC/T,MAAI,CAACiS,eAAe,CAACrJ,MAAM,CAAC;MAC/C,OAAO5I,MAAI,CAAC0S,aAAa,CAAC;QAAE7U,SAAS,EAAE;MAAK,CAAC,CAAC;IAAC;EACnD;EACM1B,UAAUA,CAAA,EAAG;IAAA,IAAA8E,MAAA;IAAA,OAAAjD,2HAAA;MACf,IAAI,CAACiD,MAAI,CAACgR,eAAe,EAAE;QACvB,MAAM,IAAIpT,KAAK,CAAC,yBAAyB,CAAC;MAC9C;MACAoC,MAAI,CAACgR,eAAe,CAAC+B,KAAK,CAAC,cAAc,CAAC;MAC1C/S,MAAI,CAACgR,eAAe,GAAG,IAAI;MAC3BhR,MAAI,CAACyS,gBAAgB,CAAC;QAAE7V,SAAS,EAAE;MAAM,CAAC,CAAC;IAAC;EAChD;EACA;AACJ;AACA;EACUkW,aAAaA,CAACnL,MAAM,EAAE;IAAA,IAAAxH,MAAA;IAAA,OAAApD,2HAAA;MACxB,IAAI,CAAC4K,MAAM,EAAE;QACTxH,MAAI,CAAC6Q,eAAe,GAAG,IAAI6B,eAAe,CAAC,CAAC;QAC5ClL,MAAM,GAAGxH,MAAI,CAAC6Q,eAAe,CAACrJ,MAAM;MACxC;MACA;AACR;AACA;MACQxH,MAAI,CAAC8Q,kBAAkB,GAAG9Q,MAAI,CAACxE,OAAO,CAAC0W,OAAO,CAAC7T,gBAAgB,CAAC;QAC5DwN,UAAU,EAAEA,CAAA,KAAM7L,MAAI,CAACxB,iBAAiB,CAAC;MAC7C,CAAC,CAAC;MACF;AACR;AACA;AACA;MACQ,IAAIqU,qBAAqB,GAAG,IAAIH,eAAe,CAAC,CAAC;MACjDlL,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACnCoL,qBAAqB,CAACD,KAAK,CAAC,CAAC;QAC7B5S,MAAI,CAAC8Q,kBAAkB,GAAG,CAAC;QAC3B9Q,MAAI,CAAC8Q,kBAAkB,GAAGzU,SAAS;QACnC2D,MAAI,CAACsS,gBAAgB,CAAC;UAClB7V,SAAS,EAAE,KAAK;UAChBwU,QAAQ,EAAE;YACNE,WAAW,EAAE;UACjB;QACJ,CAAC,CAAC;MACN,CAAC,CAAC;MACF,OAAO,IAAI,EAAE;QACT,IAAI;UACA,IAAI3J,MAAM,EAAEsL,OAAO,EAAE;YACjB;UACJ;UACA,MAAM;YAAEC;UAAM,CAAC,SAAS/S,MAAI,CAACgT,sBAAsB,CAACH,qBAAqB,CAACrL,MAAM,CAAC;UACjF,IAAI,CAACuL,KAAK,EAAE;YACR;UACJ;UACA;QACJ,CAAC,CACD,OAAOpV,EAAE,EAAE;UACPqC,MAAI,CAAC7E,MAAM,CAACkJ,KAAK,CAAC1G,EAAE,CAAC;UACrBqC,MAAI,CAACsS,gBAAgB,CAAC;YAClB7V,SAAS,EAAE;UACf,CAAC,CAAC;UACF;UACA,MAAMuD,MAAI,CAACwS,UAAU,CAAC,CAAC;QAC3B,CAAC,SACO;UACJ;UACAK,qBAAqB,CAACD,KAAK,CAAC,CAAC;UAC7BC,qBAAqB,GAAG,IAAIH,eAAe,CAAC,CAAC;QACjD;MACJ;MACA;MACA,IAAI1S,MAAI,CAAC6Q,eAAe,EAAE;QACtB,MAAM7Q,MAAI,CAACjF,UAAU,CAAC,CAAC;MAC3B;IAAC;EACL;EACMiY,sBAAsBA,CAACxL,MAAM,EAAEyL,QAAQ,EAAE;IAAA,IAAAxS,OAAA;IAAA,OAAA7D,2HAAA;MAC3C,aAAa6D,OAAI,CAAC4R,UAAU,CAAC;QACzBzI,IAAI,EAAE4G,QAAQ,CAAC0C,IAAI;QACnB1L,MAAM;QACN3E,QAAQ;UAAA,IAAA3C,KAAA,GAAAtD,2HAAA,CAAE,aAAY;YAClB6D,OAAI,CAACtF,MAAM,CAACiR,KAAK,CAAC,kCAAkC,CAAC;YACrD3L,OAAI,CAACjF,OAAO,CAAC0W,OAAO,CAACpG,YAAY,CAAC,CAAC;YACnC,MAAMqH,aAAa,SAAS1S,OAAI,CAACjF,OAAO,CAAC0W,OAAO,CAACnG,eAAe,CAAC,CAAC;YAClE,MAAMqH,cAAc,GAAG,IAAIC,GAAG,CAAC,CAAC;YAChCF,aAAa,CAACG,OAAO,CAAEvJ,KAAK,IAAK;cAC7BqJ,cAAc,CAACG,GAAG,CAACxJ,KAAK,CAACuC,MAAM,EAAEvC,KAAK,CAACF,KAAK,CAAC;YACjD,CAAC,CAAC;YACF,MAAM2J,GAAG,GAAG3L,KAAK,CAACC,IAAI,CAACsL,cAAc,CAAC7I,OAAO,CAAC,CAAC,CAAC,CAAC3J,GAAG,CAAC,CAAC,CAAC0L,MAAM,EAAEwC,KAAK,CAAC,MAAM;cACvEtP,IAAI,EAAE8M,MAAM;cACZwC,KAAK,EAAEA;YACX,CAAC,CAAC,CAAC;YACH;YACA,IAAI2E,gBAAgB,GAAG,IAAI;YAC3B,IAAIC,mBAAmB,GAAG,IAAI;YAC9B,IAAIC,iBAAiB,GAAG,IAAI;YAC5B,IAAIC,SAAS,GAAG,IAAIlN,GAAG,CAAC0M,cAAc,CAACS,IAAI,CAAC,CAAC,CAAC;YAAC,IAAA7O,yBAAA;YAAA,IAAAC,iBAAA;YAAA,IAAAC,cAAA;YAAA;cAC/C,SAAAC,SAAA,GAAAC,wHAAA,CAAyB3E,OAAI,CAACqT,oBAAoB,CAAC;kBAC/C3H,OAAO,EAAEqH,GAAG;kBACZO,gBAAgB,EAAE,IAAI;kBACtBC,QAAQ,EAAE;gBACd,CAAC,EAAExM,MAAM,CAAC,GAAAlC,KAAA,EAAAN,yBAAA,KAAAM,KAAA,SAAAH,SAAA,CAAAI,IAAA,IAAAC,IAAA,EAAAR,yBAAA,UAAE;gBAAA,MAJKiP,IAAI,GAAA3O,KAAA,CAAAI,KAAA;gBAAA;kBAKjB;kBACA,IAAI,CAACjF,OAAI,CAACsQ,UAAU,CAACtU,SAAS,EAAE;oBAC5B;oBACA8U,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC0C,IAAI,CAAC,MAAMzT,OAAI,CAACjC,iBAAiB,CAAC,CAAC,CAAC;oBACtDiC,OAAI,CAAC6R,gBAAgB,CAAC;sBAClB7V,SAAS,EAAE;oBACf,CAAC,CAAC;kBACN;kBACA,IAAIyT,gFAAyB,CAAC+D,IAAI,CAAC,EAAE;oBACjCR,gBAAgB,GAAGQ,IAAI,CAAClH,UAAU;oBAClC,MAAMoH,eAAe,GAAG,IAAIzN,GAAG,CAACkN,SAAS,CAAC;oBAC1C,MAAMQ,UAAU,GAAG,IAAI1N,GAAG,CAAC,CAAC;oBAC5B,KAAK,MAAMgE,QAAQ,IAAIuJ,IAAI,CAAClH,UAAU,CAACZ,OAAO,EAAE;sBAC5CiI,UAAU,CAAC5L,GAAG,CAACkC,QAAQ,CAAC4B,MAAM,CAAC;sBAC/B6H,eAAe,CAACE,MAAM,CAAC3J,QAAQ,CAAC4B,MAAM,CAAC;oBAC3C;oBACA,IAAI6H,eAAe,CAAC9T,IAAI,GAAG,CAAC,EAAE;sBAC1BI,OAAI,CAACtF,MAAM,CAACiR,KAAK,CAAC,kBAAkB,EAAE,CAAC,GAAG+H,eAAe,CAAC,CAAC;oBAC/D;oBACAP,SAAS,GAAGQ,UAAU;oBACtB,MAAM3T,OAAI,CAACjF,OAAO,CAAC0W,OAAO,CAAC7F,aAAa,CAAC,CAAC,GAAG8H,eAAe,CAAC,CAAC;oBAC9D,MAAM1T,OAAI,CAACjF,OAAO,CAAC0W,OAAO,CAACzD,mBAAmB,CAACgF,gBAAgB,CAAC;kBACpE,CAAC,MACI,IAAItD,wFAAiC,CAAC8D,IAAI,CAAC,EAAE;oBAC9CxT,OAAI,CAACtF,MAAM,CAACiR,KAAK,CAAC,qBAAqB,EAAEqH,gBAAgB,CAAC;oBAC1D,MAAMtT,MAAM,SAASM,OAAI,CAACjF,OAAO,CAAC0W,OAAO,CAACpF,iBAAiB,CAAC2G,gBAAgB,CAAC;oBAC7E,IAAI,CAACtT,MAAM,CAAC8M,eAAe,EAAE;sBACzB;sBACA;sBACA,MAAM,IAAIsE,OAAO,CAAEC,OAAO,IAAK8C,UAAU,CAAC9C,OAAO,EAAE,EAAE,CAAC,CAAC;sBACvD,OAAO;wBAAEuB,KAAK,EAAE;sBAAK,CAAC;oBAC1B,CAAC,MACI,IAAI,CAAC5S,MAAM,CAACxE,KAAK,EAAE;sBACpB;sBACA;sBACA;oBAAA,CACH,MACI;sBACDgY,iBAAiB,GAAGF,gBAAgB;sBACpChT,OAAI,CAACtF,MAAM,CAACiR,KAAK,CAAC,sBAAsB,EAAEuH,iBAAiB,CAAC;sBAC5DlT,OAAI,CAAC6R,gBAAgB,CAAC;wBAClB7V,SAAS,EAAE,IAAI;wBACfuU,YAAY,EAAE,IAAI1B,IAAI,CAAC,CAAC;wBACxB2B,QAAQ,EAAE;0BACNE,WAAW,EAAE;wBACjB;sBACJ,CAAC,CAAC;oBACN;oBACAuC,mBAAmB,GAAGD,gBAAgB;kBAC1C,CAAC,MACI,IAAIrD,oFAA6B,CAAC6D,IAAI,CAAC,EAAE;oBAC1C;oBACA,IAAIR,gBAAgB,IAAI,IAAI,EAAE;sBAC1B,MAAM,IAAIhW,KAAK,CAAC,6CAA6C,CAAC;oBAClE;oBACA,MAAM8W,IAAI,GAAGN,IAAI,CAACO,eAAe;oBACjC,MAAMJ,UAAU,GAAG,IAAIf,GAAG,CAAC,CAAC;oBAC5B,KAAK,MAAM3I,QAAQ,IAAI+I,gBAAgB,CAACtH,OAAO,EAAE;sBAC7CiI,UAAU,CAACb,GAAG,CAAC7I,QAAQ,CAAC4B,MAAM,EAAE5B,QAAQ,CAAC;oBAC7C;oBACA,KAAK,MAAMA,QAAQ,IAAI6J,IAAI,CAACE,eAAe,EAAE;sBACzCL,UAAU,CAACb,GAAG,CAAC7I,QAAQ,CAAC4B,MAAM,EAAE5B,QAAQ,CAAC;oBAC7C;oBACA,KAAK,MAAM4B,MAAM,IAAIiI,IAAI,CAACG,eAAe,EAAE;sBACvCN,UAAU,CAACC,MAAM,CAAC/H,MAAM,CAAC;oBAC7B;oBACA,MAAMqI,aAAa,GAAG;sBAClBvH,UAAU,EAAEmH,IAAI,CAACnH,UAAU;sBAC3BjB,OAAO,EAAE,CAAC,GAAGiI,UAAU,CAACrM,MAAM,CAAC,CAAC,CAAC;sBACjCsF,gBAAgB,EAAEkH,IAAI,CAAClH;oBAC3B,CAAC;oBACDoG,gBAAgB,GAAGkB,aAAa;oBAChCf,SAAS,GAAG,IAAIlN,GAAG,CAAC0N,UAAU,CAACP,IAAI,CAAC,CAAC,CAAC;oBACtC,MAAMM,eAAe,GAAGI,IAAI,CAACG,eAAe;oBAC5C,IAAIP,eAAe,CAAC9U,MAAM,GAAG,CAAC,EAAE;sBAC5BoB,OAAI,CAACtF,MAAM,CAACiR,KAAK,CAAC,gBAAgB,EAAE+H,eAAe,CAAC;oBACxD;oBACA,MAAM1T,OAAI,CAACjF,OAAO,CAAC0W,OAAO,CAAC7F,aAAa,CAAC8H,eAAe,CAAC;oBACzD,MAAM1T,OAAI,CAACjF,OAAO,CAAC0W,OAAO,CAACzD,mBAAmB,CAACgF,gBAAgB,CAAC;kBACpE,CAAC,MACI,IAAIpD,0EAAmB,CAAC4D,IAAI,CAAC,EAAE;oBAChC,MAAM;sBAAExK;oBAAK,CAAC,GAAGwK,IAAI;oBACrBxT,OAAI,CAAC6R,gBAAgB,CAAC;sBAClBrB,QAAQ,EAAE;wBACNE,WAAW,EAAE;sBACjB;oBACJ,CAAC,CAAC;oBACF,MAAM1Q,OAAI,CAACjF,OAAO,CAAC0W,OAAO,CAAClG,YAAY,CAAC;sBAAEG,OAAO,EAAE,CAACuC,kEAAc,CAAC7N,OAAO,CAAC4I,IAAI,CAAC;oBAAE,CAAC,CAAC;kBACxF,CAAC,MACI,IAAIwG,2EAAoB,CAACgE,IAAI,CAAC,EAAE;oBACjC,MAAMW,iBAAiB,GAAGX,IAAI,CAACY,gBAAgB;oBAC/C,IAAID,iBAAiB,IAAI,CAAC,EAAE;sBACxB;sBACAnU,OAAI,CAACtF,MAAM,CAACiR,KAAK,CAAC,2BAA2B,CAAC;sBAC9C,OAAO;wBAAE2G,KAAK,EAAE;sBAAK,CAAC;oBAC1B;oBACAtS,OAAI,CAACjC,iBAAiB,CAAC,CAAC;kBAC5B,CAAC,MACI;oBACDiC,OAAI,CAACtF,MAAM,CAACiR,KAAK,CAAC,eAAe,CAAC;oBAClC,IAAIqH,gBAAgB,KAAKE,iBAAiB,EAAE;sBACxClT,OAAI,CAAC6R,gBAAgB,CAAC;wBAClB7V,SAAS,EAAE,IAAI;wBACfuU,YAAY,EAAE,IAAI1B,IAAI,CAAC;sBAC3B,CAAC,CAAC;oBACN,CAAC,MACI,IAAIoE,mBAAmB,KAAKD,gBAAgB,EAAE;sBAC/C,MAAMtT,MAAM,SAASM,OAAI,CAACjF,OAAO,CAAC0W,OAAO,CAACpF,iBAAiB,CAAC2G,gBAAgB,CAAC;sBAC7E,IAAI,CAACtT,MAAM,CAAC8M,eAAe,EAAE;wBACzB;wBACA;wBACA,MAAM,IAAIsE,OAAO,CAAEC,OAAO,IAAK8C,UAAU,CAAC9C,OAAO,EAAE,EAAE,CAAC,CAAC;wBACvD,OAAO;0BAAEuB,KAAK,EAAE;wBAAM,CAAC;sBAC3B,CAAC,MACI,IAAI,CAAC5S,MAAM,CAACxE,KAAK,EAAE;wBACpB;wBACA;sBAAA,CACH,MACI;wBACDgY,iBAAiB,GAAGF,gBAAgB;wBACpChT,OAAI,CAAC6R,gBAAgB,CAAC;0BAClB7V,SAAS,EAAE,IAAI;0BACfuU,YAAY,EAAE,IAAI1B,IAAI,CAAC,CAAC;0BACxB2B,QAAQ,EAAE;4BACNE,WAAW,EAAE;0BACjB;wBACJ,CAAC,CAAC;sBACN;oBACJ;kBACJ;kBACA8B,QAAQ,GAAG,CAAC;gBAAC;cACjB;YAAC,SAAAtN,GAAA;cAAAV,iBAAA;cAAAC,cAAA,GAAAS,GAAA;YAAA;cAAA;gBAAA,IAAAX,yBAAA,IAAAG,SAAA,CAAAS,MAAA;kBAAA,MAAAT,SAAA,CAAAS,MAAA;gBAAA;cAAA;gBAAA,IAAAX,iBAAA;kBAAA,MAAAC,cAAA;gBAAA;cAAA;YAAA;YACDzE,OAAI,CAACtF,MAAM,CAACiR,KAAK,CAAC,oBAAoB,CAAC;YACvC;YACA,OAAO;cAAE2G,KAAK,EAAE;YAAK,CAAC;UAC1B,CAAC;UAAA,gBAAAlQ,SAAA;YAAA,OAAA3C,KAAA,CAAAR,KAAA,OAAAC,SAAA;UAAA;QAAA;MACL,CAAC,CAAC;IAAC;EACP;EACOmU,oBAAoBA,CAACN,GAAG,EAAEhM,MAAM,EAAE;IAAA,IAAA7K,KAAA;IAAA,OAAAmY,6HAAA;MACrC,MAAMC,IAAI,SAAAC,8HAAA,CAASrY,KAAI,CAACnB,OAAO,CAAC4W,MAAM,CAAC6C,aAAa,CAAC,cAAc,EAAEzB,GAAG,EAAE,CAAC,CAAC,EAAEhM,MAAM,CAAC;MACrF,MAAM0N,MAAM,GAAG5E,wDAAY,CAACyE,IAAI,CAAC;MACjC,MAAMI,MAAM,GAAGD,MAAM,CAACE,SAAS,CAAC,CAAC;MACjC,IAAI;QACA,OAAO,IAAI,EAAE;UACT;UACA,MAAM;YAAE5P,IAAI;YAAEE;UAAM,CAAC,SAAAsP,8HAAA,CAASG,MAAM,CAACE,IAAI,CAAC,CAAC;UAC3C;UACA,IAAI7P,IAAI,EACJ;UACJ;UACA,MAAME,KAAK;QACf;MACJ,CAAC,SACO;QACJyP,MAAM,CAACG,WAAW,CAAC,CAAC;MACxB;IAAC;EACL;EACAhD,gBAAgBA,CAAC9W,OAAO,EAAE;IACtB,MAAMiW,aAAa,GAAG,IAAIlB,2DAAU,CAAC;MACjC9T,SAAS,EAAEjB,OAAO,CAACiB,SAAS,IAAI,IAAI,CAACsU,UAAU,CAACtU,SAAS;MACzDuU,YAAY,EAAExV,OAAO,CAACwV,YAAY,IAAI,IAAI,CAACD,UAAU,CAACC,YAAY;MAClEC,QAAQ,EAAE;QACN,GAAG,IAAI,CAACF,UAAU,CAACK,cAAc;QACjC,GAAG5V,OAAO,CAACyV;MACf;IACJ,CAAC,CAAC;IACF,IAAI,CAAC,IAAI,CAACF,UAAU,CAACwE,OAAO,CAAC9D,aAAa,CAAC,EAAE;MACzC,IAAI,CAACV,UAAU,GAAGU,aAAa;MAC/B,IAAI,CAACpU,gBAAgB,CAAEC,EAAE,IAAKA,EAAE,CAACgB,aAAa,GAAGmT,aAAa,CAAC,CAAC;IACpE;EACJ;EACMe,UAAUA,CAAA,EAAG;IAAA,IAAAjR,OAAA;IAAA,OAAA3E,2HAAA;MACf,OAAO,IAAI2U,OAAO,CAAEC,OAAO,IAAK8C,UAAU,CAAC9C,OAAO,EAAEjQ,OAAI,CAAC/F,OAAO,CAACkV,YAAY,CAAC,CAAC;IAAC;EACpF;AACJ;AACA;;;;;;;;;;;;;;;;;;;;;AChaO,SAASL,mBAAmBA,CAAC4D,IAAI,EAAE;EACtC,OAAOA,IAAI,CAACxK,IAAI,IAAI,IAAI;AAC5B;AACO,SAASwG,oBAAoBA,CAACgE,IAAI,EAAE;EACvC,OAAOA,IAAI,CAACY,gBAAgB,IAAI,IAAI;AACxC;AACO,SAAS3E,yBAAyBA,CAAC+D,IAAI,EAAE;EAC5C,OAAOA,IAAI,CAAClH,UAAU,IAAI,IAAI;AAClC;AACO,SAASoD,iCAAiCA,CAAC8D,IAAI,EAAE;EACpD,OAAOA,IAAI,CAACuB,mBAAmB,IAAI,IAAI;AAC3C;AACO,SAASpF,6BAA6BA,CAAC6D,IAAI,EAAE;EAChD,OAAOA,IAAI,CAACO,eAAe,IAAI,IAAI;AACvC;AACO,SAASiB,2BAA2BA,CAACC,OAAO,EAAE;EACjD,OAAQ7N,KAAK,CAAC8N,OAAO,CAACD,OAAO,CAACvJ,OAAO,CAAC,IAClC,OAAOuJ,OAAO,CAACE,gBAAgB,IAAI,QAAQ;AACnD;AACO,SAASC,0BAA0BA,CAACH,OAAO,EAAE;EAChD,OAAO,OAAOA,OAAO,CAACI,kBAAkB,IAAI,QAAQ;AACxD;AACA;;;;;;;;;;;;;;;;ACtBA;AACO,IAAIC,UAAU,gBACpB,UAAUA,UAAU,EAAE;EACnBA,UAAU,CAAC,MAAM,CAAC,GAAG,MAAM;EAC3BA,UAAU,CAAC,SAAS,CAAC,GAAG,SAAS;EACjCA,UAAU,CAAC,MAAM,CAAC,GAAG,MAAM;EAAC,OAHrBA,UAAU;AAIrB,CAAC,CAAEA,UAAU,IAAkB,CAAC,CAAE,CALb;AAMd,MAAMC,MAAM,CAAC;EAChBxa,OAAO;EACPW,WAAWA,CAACX,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAGA,OAAO;EAC1B;EACA,IAAIgE,IAAIA,CAAA,EAAG;IACP,OAAO,IAAI,CAAChE,OAAO,CAACgE,IAAI;EAC5B;EACA,IAAIoK,IAAIA,CAAA,EAAG;IACP,OAAO,IAAI,CAACpO,OAAO,CAACoO,IAAI;EAC5B;EACA7L,MAAMA,CAAA,EAAG;IACL,OAAO;MACHyB,IAAI,EAAE,IAAI,CAACA,IAAI;MACfoK,IAAI,EAAE,IAAI,CAACA;IACf,CAAC;EACL;AACJ;AACA;;;;;;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAIqM,aAAa,gBACvB,UAAUA,aAAa,EAAE;EACtBA,aAAa,CAACA,aAAa,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC,GAAG,eAAe;EACpEA,aAAa,CAACA,aAAa,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,GAAG,eAAe;EACnEA,aAAa,CAACA,aAAa,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC,GAAG,eAAe;EAAC,OAH9DA,aAAa;AAIxB,CAAC,CAAEA,aAAa,IAAqB,CAAC,CAAE,CALhB;AAMjB,SAAShc,2BAA2BA,CAACmN,MAAM,EAAE;EAChD,OAAO,QAAQ,IAAIA,MAAM;AAC7B;AACO,SAAS4D,mBAAmBA,CAAC5D,MAAM,EAAE;EACxC,OAAOnN,2BAA2B,CAACmN,MAAM,CAAC,GAAGA,MAAM,CAACxC,MAAM,GAAG,CAACwC,MAAM,CAAChB,KAAK,CAAC;AAC/E;AACA;;;;;;;;;;;;;;;ACnBO,MAAMmK,UAAU,CAAC;EACpB/U,OAAO;EACPW,WAAWA,CAACX,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAGA,OAAO;EAC1B;EACA;AACJ;AACA;EACI,IAAIiB,SAASA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACjB,OAAO,CAACiB,SAAS,IAAI,KAAK;EAC1C;EACA;AACJ;AACA;AACA;EACI,IAAIuU,YAAYA,CAAA,EAAG;IACf,OAAO,IAAI,CAACxV,OAAO,CAACwV,YAAY;EACpC;EACA;AACJ;AACA;EACI,IAAII,cAAcA,CAAA,EAAG;IACjB,OAAQ,IAAI,CAAC5V,OAAO,CAACyV,QAAQ,IAAI;MAC7B;AACZ;AACA;AACA;MACYE,WAAW,EAAE,KAAK;MAClB;AACZ;AACA;MACYD,SAAS,EAAE;IACf,CAAC;EACL;EACAqE,OAAOA,CAAChX,MAAM,EAAE;IACZ,OAAOV,IAAI,CAACC,SAAS,CAAC,IAAI,CAACtC,OAAO,CAAC,IAAIqC,IAAI,CAACC,SAAS,CAACS,MAAM,CAAC/C,OAAO,CAAC;EACzE;EACA0a,UAAUA,CAAA,EAAG;IACT,MAAMjF,QAAQ,GAAG,IAAI,CAACG,cAAc;IACpC,OAAQ,yBAAwB,IAAI,CAAC3U,SAAU,kBAAiB,IAAI,CAACuU,YAAa,kBAAiBC,QAAQ,CAACE,WAAY,gBAAeF,QAAQ,CAACC,SAAU,EAAC;EAC/J;EACAnT,MAAMA,CAAA,EAAG;IACL,OAAO;MACHtB,SAAS,EAAE,IAAI,CAACA,SAAS;MACzBwU,QAAQ,EAAE,IAAI,CAACG,cAAc;MAC7BJ,YAAY,EAAE,IAAI,CAACA;IACvB,CAAC;EACL;AACJ;AACA;;;;;;;;;;;;;;;ACjDO,MAAM9W,gBAAgB,CAAC;EAC1BkG,KAAK;EACLC,IAAI;EACJlE,WAAWA;EACX;AACJ;AACA;EACIiE,KAAK;EACL;AACJ;AACA;EACIC,IAAI,GAAG,IAAI,EAAE;IACT,IAAI,CAACD,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,IAAI,GAAGA,IAAI;EACpB;EACA8V,QAAQA,CAAA,EAAG;IACP,IAAI,IAAI,CAAC9V,IAAI,IAAI,IAAI,EAAE;MACnB,OAAQ,0BAAyB,IAAI,CAACD,KAAM,GAAE;IAClD,CAAC,MACI;MACD,OAAQ,wCAAuC,IAAI,CAACC,IAAI,GAAG,IAAK,KAAI;IACxE;EACJ;AACJ;AACA;;;;;;;;;;;;;;;;;ACxBgD;AACzC,MAAMgW,qBAAqB,GAAG;EACjCC,OAAO,EAAE;AACb,CAAC;AACM,MAAMC,KAAK,CAAC;EACf/a,OAAO;EACP,OAAOgb,eAAeA,CAAChb,OAAO,EAAEib,WAAW,EAAE;IACzC,OAAO,IAAIF,KAAK,CAAC;MACb,GAAG/a,OAAO;MACV8a,OAAO,EAAEG,WAAW,CAAC7V,GAAG,CAAEpB,IAAI,IAAK4W,yDAAa,CAACI,eAAe,CAAChX,IAAI,CAAC;IAC1E,CAAC,CAAC;EACN;EACArD,WAAWA,CAACX,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACA,OAAO,GAAG;MAAE,GAAG6a,qBAAqB;MAAE,GAAG7a;IAAQ,CAAC;EAC3D;EACA,IAAIgE,IAAIA,CAAA,EAAG;IACP,OAAO,IAAI,CAAChE,OAAO,CAACgE,IAAI;EAC5B;EACA,IAAI8W,OAAOA,CAAA,EAAG;IACV,OAAO,IAAI,CAAC9a,OAAO,CAAC8a,OAAO,IAAI,EAAE;EACrC;EACAvY,MAAMA,CAACqI,KAAK,EAAE;IACV,OAAO;MACH5G,IAAI,EAAE,IAAI,CAACA,IAAI;MACf8W,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC1V,GAAG,CAAE8V,CAAC,IAAKA,CAAC,CAAC3Y,MAAM,CAACqI,KAAK,CAAC;IACpD,CAAC;EACL;AACJ;AACA;;;;;;;;;;;;;;;;;AC7BuC;AAChC,MAAMuQ,4BAA4B,GAAG;EACxCC,SAAS,EAAE;AACf,CAAC;AACM,MAAMR,aAAa,CAAC;EACvB5a,OAAO;EACP,OAAOgb,eAAeA,CAACK,MAAM,EAAE;IAC3B,OAAO,IAAIT,aAAa,CAAC;MACrB5W,IAAI,EAAEqX,MAAM;MACZD,SAAS,EAAE;IACf,CAAC,CAAC;EACN;EACAza,WAAWA,CAACX,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAG;MAAE,GAAGmb,4BAA4B;MAAE,GAAGnb;IAAQ,CAAC;EAClE;EACA,IAAIgE,IAAIA,CAAA,EAAG;IACP,OAAO,IAAI,CAAChE,OAAO,CAACgE,IAAI;EAC5B;EACA,IAAIoX,SAASA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACpb,OAAO,CAACob,SAAS;EACjC;EACA7Y,MAAMA,CAACqI,KAAK,EAAE;IACV,OAAO;MACH5G,IAAI,EAAE,IAAI,CAACA,IAAI;MACfoX,SAAS,EAAE,IAAI,CAACA,SAAS;MACzBhN,IAAI,EAAExD,KAAK,CAACkQ,OAAO,CAAC9L,IAAI,CAAEqM,MAAM,IAAKA,MAAM,CAACrX,IAAI,KAAK,IAAI,CAACA,IAAI,CAAC,EAAEoK,IAAI,IAAImM,+CAAU,CAACe;IACxF,CAAC;EACL;AACJ;AACA;;;;;;;;;;;;;;;;AC7BgD;AAChD;AACA;AACA;AACO,MAAMG,MAAM,CAAC;EAChBrS,MAAM;EACN;AACJ;AACA;EACIsS,KAAK;EACLC,KAAK;EACLhb,WAAWA,CAACyI,MAAM,EAAE;IAChB,IAAI,CAACA,MAAM,GAAGA,MAAM;IACpB,IAAIiD,KAAK,CAAC8N,OAAO,CAAC/Q,MAAM,CAAC,EAAE;MACvB,IAAI,CAACA,MAAM,GAAGA,MAAM;IACxB,CAAC,MACI;MACD,IAAI,CAACuS,KAAK,GAAGvS,MAAM;MACnB,IAAI,CAACA,MAAM,GAAG,IAAI,CAACwS,sBAAsB,CAAC,IAAI,CAACD,KAAK,CAAC;IACzD;EACJ;EACAzZ,QAAQA,CAAA,EAAG;IACP,KAAK,MAAM0I,KAAK,IAAI,IAAI,CAACxB,MAAM,EAAE;MAC7BwB,KAAK,CAAC1I,QAAQ,CAAC,CAAC;IACpB;EACJ;EACAK,MAAMA,CAAA,EAAG;IACL,OAAO;MACH6G,MAAM,EAAE,IAAI,CAACA,MAAM,CAAChE,GAAG,CAAEyH,CAAC,IAAKA,CAAC,CAACtK,MAAM,CAAC,CAAC;IAC7C,CAAC;EACL;EACAqZ,sBAAsBA,CAACD,KAAK,EAAE;IAC1B,OAAO7M,MAAM,CAACC,OAAO,CAAC4M,KAAK,CAAC,CAACvW,GAAG,CAAC,CAAC,CAACpB,IAAI,EAAE4G,KAAK,CAAC,KAAK;MAChD,OAAO4Q,yCAAY,CAACK,WAAW,CAAC7X,IAAI,EAAE4G,KAAK,CAAC;IAChD,CAAC,CAAC;EACN;AACJ;AACA;;;;;;;;;;;;;;;;;;ACrCmC;AAC5B,MAAMkR,qBAAqB,GAAG;EACjCC,OAAO,EAAE,EAAE;EACXC,UAAU,EAAE,KAAK;EACjBC,SAAS,EAAE;AACf,CAAC;AACM,MAAMC,oBAAoB,GAAG,eAAe;AAC5C,MAAMX,KAAK,CAAC;EACfvb,OAAO;EACP,OAAOmc,eAAeA,CAACnc,OAAO,EAAE;IAC5B,OAAO,IAAIub,KAAK,CAAC;MAAE,GAAGvb,OAAO;MAAEic,SAAS,EAAE,IAAI;MAAED,UAAU,EAAE;IAAM,CAAC,CAAC;EACxE;EACA,OAAOI,gBAAgBA,CAACpc,OAAO,EAAE;IAC7B,OAAO,IAAIub,KAAK,CAAC;MAAE,GAAGvb,OAAO;MAAEic,SAAS,EAAE,KAAK;MAAED,UAAU,EAAE;IAAK,CAAC,CAAC;EACxE;EACA,OAAOH,WAAWA,CAAC7X,IAAI,EAAE4G,KAAK,EAAE;IAC5B,OAAO,IAAI2Q,KAAK,CAAC;MACbvX,IAAI;MACJ8W,OAAO,EAAEhM,MAAM,CAACC,OAAO,CAACnE,KAAK,CAACkQ,OAAO,CAAC,CAAC1V,GAAG,CAAC,CAAC,CAACpB,IAAI,EAAEqY,GAAG,CAAC,KAAK,IAAI7B,2CAAM,CAAC;QAAExW,IAAI;QAAEoK,IAAI,EAAEiO,GAAG,CAACjO;MAAK,CAAC,CAAC,CAAC;MACjG2N,OAAO,EAAEnR,KAAK,CAACmR,OAAO;MACtBE,SAAS,EAAErR,KAAK,CAAC5K,OAAO,CAACic,SAAS;MAClCD,UAAU,EAAEpR,KAAK,CAAC5K,OAAO,CAACgc,UAAU;MACpCM,QAAQ,EAAE1R,KAAK,CAAC5K,OAAO,CAACsc;IAC5B,CAAC,CAAC;EACN;EACA3b,WAAWA,CAACX,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAG;MAAE,GAAG8b,qBAAqB;MAAE,GAAG9b;IAAQ,CAAC;EAC3D;EACA,IAAIgE,IAAIA,CAAA,EAAG;IACP,OAAO,IAAI,CAAChE,OAAO,CAACgE,IAAI;EAC5B;EACA,IAAIuY,gBAAgBA,CAAA,EAAG;IACnB,OAAO,IAAI,CAACvc,OAAO,CAACsc,QAAQ;EAChC;EACA,IAAIA,QAAQA,CAAA,EAAG;IACX,OAAO,IAAI,CAACC,gBAAgB,IAAI,IAAI,CAACvY,IAAI;EAC7C;EACA,IAAI8W,OAAOA,CAAA,EAAG;IACV,OAAO,IAAI,CAAC9a,OAAO,CAAC8a,OAAO;EAC/B;EACA,IAAIiB,OAAOA,CAAA,EAAG;IACV,OAAO,IAAI,CAAC/b,OAAO,CAAC+b,OAAO,IAAI,EAAE;EACrC;EACA,IAAIE,SAASA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACjc,OAAO,CAACic,SAAS,IAAI,KAAK;EAC1C;EACA,IAAID,UAAUA,CAAA,EAAG;IACb,OAAO,IAAI,CAAChc,OAAO,CAACgc,UAAU,IAAI,KAAK;EAC3C;EACA,IAAIQ,YAAYA,CAAA,EAAG;IACf,IAAI,IAAI,CAACxc,OAAO,CAACic,SAAS,EAAE;MACxB,OAAQ,kBAAiB,IAAI,CAACjY,IAAK,EAAC;IACxC;IACA,OAAQ,YAAW,IAAI,CAACA,IAAK,EAAC;EAClC;EACA,IAAIyY,SAASA,CAAA,EAAG;IACZ,IAAIP,oBAAoB,CAACQ,IAAI,CAAC,IAAI,CAAC1Y,IAAI,CAAC,EAAE;MACtC,OAAO,KAAK;IAChB;IACA,IAAI,IAAI,CAACuY,gBAAgB,IAAI,IAAI,IAAIL,oBAAoB,CAACQ,IAAI,CAAC,IAAI,CAACH,gBAAgB,CAAC,EAAE;MACnF,OAAO,KAAK;IAChB;IACA,OAAO,IAAI;EACf;EACAra,QAAQA,CAAA,EAAG;IACP,IAAIga,oBAAoB,CAACQ,IAAI,CAAC,IAAI,CAAC1Y,IAAI,CAAC,EAAE;MACtC,MAAM,IAAI/B,KAAK,CAAE,qCAAoC,IAAI,CAAC+B,IAAK,EAAC,CAAC;IACrE;IACA,IAAI,IAAI,CAACuY,gBAAgB,IAAIL,oBAAoB,CAACQ,IAAI,CAAC,IAAI,CAACH,gBAAgB,CAAC,EAAE;MAC3E,MAAM,IAAIta,KAAK,CAAE,oCAAmC,IAAI,CAACsa,gBAAiB,EAAC,CAAC;IAChF;IACA,MAAMtB,WAAW,GAAG,IAAI/P,GAAG,CAAC,CAAC;IAC7B+P,WAAW,CAACjO,GAAG,CAAC,IAAI,CAAC;IACrB,KAAK,MAAMqO,MAAM,IAAI,IAAI,CAACP,OAAO,EAAE;MAC/B,MAAM;QAAE9W,IAAI,EAAE2Y;MAAW,CAAC,GAAGtB,MAAM;MACnC,IAAIA,MAAM,CAACrX,IAAI,IAAI,IAAI,EAAE;QACrB,MAAM,IAAI/B,KAAK,CAAE,GAAE,IAAI,CAAC+B,IAAK,yEAAwE,CAAC;MAC1G;MACA,IAAIiX,WAAW,CAACxO,GAAG,CAACkQ,UAAU,CAAC,EAAE;QAC7B,MAAM,IAAI1a,KAAK,CAAE,oBAAmB0a,UAAW,EAAC,CAAC;MACrD;MACA,IAAIT,oBAAoB,CAACQ,IAAI,CAACC,UAAU,CAAC,EAAE;QACvC,MAAM,IAAI1a,KAAK,CAAE,4CAA2CoZ,MAAO,EAAC,CAAC;MACzE;MACAJ,WAAW,CAACjO,GAAG,CAAC2P,UAAU,CAAC;IAC/B;IACA,MAAMC,UAAU,GAAG,IAAI1R,GAAG,CAAC,CAAC;IAC5B,KAAK,MAAM2R,KAAK,IAAI,IAAI,CAACd,OAAO,EAAE;MAC9B,IAAIa,UAAU,CAACnQ,GAAG,CAACoQ,KAAK,CAAC7Y,IAAI,CAAC,EAAE;QAC5B,MAAM,IAAI/B,KAAK,CAAE,yBAAwB4a,KAAM,EAAC,CAAC;MACrD;MACA,IAAIX,oBAAoB,CAACQ,IAAI,CAACG,KAAK,CAAC7Y,IAAI,CAAC,EAAE;QACvC,MAAM,IAAI/B,KAAK,CAAE,2CAA0C4a,KAAM,EAAC,CAAC;MACvE;MACA,KAAK,MAAMxB,MAAM,IAAIwB,KAAK,CAAC/B,OAAO,EAAE;QAChC,IAAI,CAACG,WAAW,CAACxO,GAAG,CAAC4O,MAAM,CAACrX,IAAI,CAAC,EAAE;UAC/B,MAAM,IAAI/B,KAAK,CAAE,UAASoZ,MAAM,CAACrX,IAAK,wBAAuB6Y,KAAK,CAAC7Y,IAAK,EAAC,CAAC;QAC9E;MACJ;MACA4Y,UAAU,CAAC5P,GAAG,CAAC6P,KAAK,CAAC7Y,IAAI,CAAC;IAC9B;EACJ;EACAzB,MAAMA,CAAA,EAAG;IACL,OAAO;MACHyB,IAAI,EAAE,IAAI,CAACA,IAAI;MACf8Y,SAAS,EAAE,IAAI,CAACR,QAAQ;MACxBS,UAAU,EAAE,IAAI,CAACd,SAAS;MAC1Be,WAAW,EAAE,IAAI,CAAChB,UAAU;MAC5BlB,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC1V,GAAG,CAAE8V,CAAC,IAAKA,CAAC,CAAC3Y,MAAM,CAAC,CAAC,CAAC;MAC5CwZ,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC3W,GAAG,CAAE6X,CAAC,IAAKA,CAAC,CAAC1a,MAAM,CAAC,IAAI,CAAC;IACnD,CAAC;EACL;AACJ;AACA;;;;;;;;;;;;;;;;;;;ACjHuC;AACP;AACgB;AAChD,MAAM2a,IAAI,GAAG;EACT9O,IAAI,EAAEmM,+CAAU,CAACe;AACrB,CAAC;AACD,MAAM6B,OAAO,GAAG;EACZ/O,IAAI,EAAEmM,+CAAU,CAAC6C;AACrB,CAAC;AACD,MAAMC,IAAI,GAAG;EACTjP,IAAI,EAAEmM,+CAAU,CAAC+C;AACrB,CAAC;AACM,MAAMjC,MAAM,GAAG;EAClB6B,IAAI;EACJC,OAAO;EACPE;AACJ,CAAC;AACD;AACA;AACA;AACO,MAAME,OAAO,CAAC;EACjBzC,OAAO;EACP9a,OAAO;EACP+b,OAAO;EACPpb,WAAWA,CAACma,OAAO,EAAE9a,OAAO,GAAG,CAAC,CAAC,EAAE;IAC/B,IAAI,CAAC8a,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAC9a,OAAO,GAAGA,OAAO;IACtB,IAAIA,OAAO,EAAE+b,OAAO,EAAE;MAClB,IAAI,CAACA,OAAO,GAAGjN,MAAM,CAACC,OAAO,CAAC/O,OAAO,CAAC+b,OAAO,CAAC,CAAC3W,GAAG,CAAC,CAAC,CAACpB,IAAI,EAAE8W,OAAO,CAAC,KAAK;QACpE,IAAI9W,IAAI,CAACwZ,UAAU,CAAC,GAAG,CAAC,EAAE;UACtB,OAAO,IAAIzC,yCAAK,CAAC;YACb/W,IAAI,EAAEA,IAAI,CAACyZ,SAAS,CAAC,CAAC,CAAC;YACvB3C,OAAO,EAAEA,OAAO,CAAC1V,GAAG,CAAE8V,CAAC,IAAK,IAAIN,yDAAa,CAAC;cAAE5W,IAAI,EAAEkX,CAAC;cAAEE,SAAS,EAAE;YAAM,CAAC,CAAC;UAChF,CAAC,CAAC;QACN;QACA,OAAO,IAAIL,yCAAK,CAAC;UACb/W,IAAI,EAAEA,IAAI;UACV8W,OAAO,EAAEA,OAAO,CAAC1V,GAAG,CAAE8V,CAAC,IAAK,IAAIN,yDAAa,CAAC;YAAE5W,IAAI,EAAEkX,CAAC;YAAEE,SAAS,EAAE;UAAK,CAAC,CAAC;QAC/E,CAAC,CAAC;MACN,CAAC,CAAC;IACN;EACJ;AACJ;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3CmD;AACG;AACQ;AACL;AACC;AACX;AACU;AACV;AACM;AACF;AACC;AACR;AACI;AACI;AACqB;AACf;AACrB;AACO;AACT;AACD;AACA;AACQ;AACL;AACO;AACb;AACH;AACQ;AACC;AACL;AAChC;;;;;;;;;;;;;;;;;AC7B0B;AACnB,MAAMzc,YAAY,CAAC;EACtB+e,SAAS;EACT/c,WAAWA,CAAA,EAAG;IACV,IAAI,CAAC+c,SAAS,GAAG,CAAC,CAAC;EACvB;EACA;AACJ;AACA;EACI7a,gBAAgBA,CAAC8a,QAAQ,EAAE;IACvB,MAAM/P,EAAE,GAAG0B,wCAAE,CAAC,CAAC;IACf,IAAI,CAACoO,SAAS,CAAC9P,EAAE,CAAC,GAAG+P,QAAQ;IAC7B,OAAO,MAAM;MACT,OAAO,IAAI,CAACD,SAAS,CAAC9P,EAAE,CAAC;IAC7B,CAAC;EACL;EACA/L,gBAAgBA,CAACC,EAAE,EAAE;IACjB,KAAK,MAAM8b,CAAC,IAAI,IAAI,CAACF,SAAS,EAAE;MAC5B5b,EAAE,CAAC,IAAI,CAAC4b,SAAS,CAACE,CAAC,CAAC,CAAC;IACzB;EACJ;AACJ;AACA;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACO,SAAehf,iBAAiBA,CAAAqF,EAAA,EAAAa,GAAA,EAAAe,GAAA;EAAA,OAAAgY,kBAAA,CAAA3Z,KAAA,OAAAC,SAAA;AAAA;AAyBvC;AAAA,SAAA0Z,mBAAA;EAAAA,kBAAA,GAAAzc,2HAAA,CAzBO,WAAiCwO,KAAK,EAAEvI,QAAQ,EAAErH,OAAO,EAAE;IAC9D,OAAO,IAAI+V,OAAO,CAAC,CAACC,OAAO,EAAE8H,MAAM,KAAK;MACpC,MAAMC,OAAO,GAAG/d,OAAO,EAAE+H,SAAS;MAClC,IAAIiW,QAAQ,GAAG,KAAK;MACpB,MAAMC,SAAS,GAAGF,OAAO,GACnBjF,UAAU,CAAC,MAAM;QACfkF,QAAQ,GAAG,IAAI;QACfF,MAAM,CAAC,IAAI7b,KAAK,CAAC,0BAA0B,CAAC,CAAC;MACjD,CAAC,EAAE8b,OAAO,CAAC,GACTld,SAAS;MACf+O,KAAK,CAACsO,YAAY,eAAA9c,2HAAA,CAAC,aAAY;QAC3B,IAAI6c,SAAS,EAAE;UACXE,YAAY,CAACF,SAAS,CAAC;QAC3B;QACA,IAAID,QAAQ,EACR;QACJ,IAAI;UACAhI,OAAO,OAAO3O,QAAQ,CAAC,CAAC,CAAC;QAC7B,CAAC,CACD,OAAOlF,EAAE,EAAE;UACP2b,MAAM,CAAC3b,EAAE,CAAC;QACd;MACJ,CAAC,EAAC;IACN,CAAC,CAAC;EACN,CAAC;EAAA,OAAA0b,kBAAA,CAAA3Z,KAAA,OAAAC,SAAA;AAAA;;;;;;;;;;;;;;;;;AC3BM,SAASia,WAAWA,CAACC,CAAC,EAAE;EAC3B,OAAQ,IAAGA,CAAC,CAACC,UAAU,CAAC,GAAG,EAAE,IAAI,CAAE,GAAE;AACzC;AACO,SAASC,aAAaA,CAACrK,IAAI,EAAE;EAChC,OAAOkK,WAAW,CAAE,KAAIlK,IAAK,EAAC,CAAC;AACnC;AACO,SAASrV,eAAeA,CAACwf,CAAC,EAAE;EAC/B,OAAQ,IAAGA,CAAC,CAACC,UAAU,CAAC,GAAG,EAAE,IAAI,CAAE,GAAE;AACzC;AACA;;;;;;;;;;ACTA,IAAIE,EAAE,GAAGC,mBAAO,CAAC,sFAAM,CAAC;AACxB,IAAInP,EAAE,GAAGmP,mBAAO,CAAC,sFAAM,CAAC;AAExB,IAAIlP,IAAI,GAAGD,EAAE;AACbC,IAAI,CAACiP,EAAE,GAAGA,EAAE;AACZjP,IAAI,CAACD,EAAE,GAAGA,EAAE;AAEZoP,MAAM,CAACC,OAAO,GAAGpP,IAAI;;;;;;;;;;ACPrB;AACA;AACA;AACA;AACA,IAAIqP,SAAS,GAAG,EAAE;AAClB,KAAK,IAAIhB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,GAAG,EAAE,EAAEA,CAAC,EAAE;EAC5BgB,SAAS,CAAChB,CAAC,CAAC,GAAG,CAACA,CAAC,GAAG,KAAK,EAAEjD,QAAQ,CAAC,EAAE,CAAC,CAACkE,MAAM,CAAC,CAAC,CAAC;AACnD;AAEA,SAASC,WAAWA,CAACC,GAAG,EAAEC,MAAM,EAAE;EAChC,IAAIpB,CAAC,GAAGoB,MAAM,IAAI,CAAC;EACnB,IAAIC,GAAG,GAAGL,SAAS;EACnB;EACA,OAAQ,CACNK,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAEqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAC5BqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAEqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EACjCqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAEqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EACjCqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAEqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EACjCqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAEqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EACjCqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAEqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAC5BqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAEqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAC5BqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,EAAEqB,GAAG,CAACF,GAAG,CAACnB,CAAC,EAAE,CAAC,CAAC,CAC7B,CAAEsB,IAAI,CAAC,EAAE,CAAC;AACb;AAEAR,MAAM,CAACC,OAAO,GAAGG,WAAW;;;;;;;;;;ACzB5B;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAIK,eAAe,GAAI,OAAOC,MAAO,IAAI,WAAW,IAAIA,MAAM,CAACD,eAAe,IAAIC,MAAM,CAACD,eAAe,CAACE,IAAI,CAACD,MAAM,CAAC,IAC9F,OAAOE,QAAS,IAAI,WAAW,IAAI,OAAOC,MAAM,CAACD,QAAQ,CAACH,eAAe,IAAI,UAAU,IAAIG,QAAQ,CAACH,eAAe,CAACE,IAAI,CAACC,QAAQ,CAAE;AAE1J,IAAIH,eAAe,EAAE;EACnB;EACA,IAAIK,KAAK,GAAG,IAAIC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;;EAEhCf,MAAM,CAACC,OAAO,GAAG,SAASe,SAASA,CAAA,EAAG;IACpCP,eAAe,CAACK,KAAK,CAAC;IACtB,OAAOA,KAAK;EACd,CAAC;AACH,CAAC,MAAM;EACL;EACA;EACA;EACA;EACA,IAAIG,IAAI,GAAG,IAAItT,KAAK,CAAC,EAAE,CAAC;EAExBqS,MAAM,CAACC,OAAO,GAAG,SAASiB,OAAOA,CAAA,EAAG;IAClC,KAAK,IAAIhC,CAAC,GAAG,CAAC,EAAExM,CAAC,EAAEwM,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;MAC9B,IAAI,CAACA,CAAC,GAAG,IAAI,MAAM,CAAC,EAAExM,CAAC,GAAGyO,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,WAAW;MACrDH,IAAI,CAAC/B,CAAC,CAAC,GAAGxM,CAAC,MAAM,CAACwM,CAAC,GAAG,IAAI,KAAK,CAAC,CAAC,GAAG,IAAI;IAC1C;IAEA,OAAO+B,IAAI;EACb,CAAC;AACH;;;;;;;;;;ACjCA,IAAII,GAAG,GAAGtB,mBAAO,CAAC,wGAAW,CAAC;AAC9B,IAAIK,WAAW,GAAGL,mBAAO,CAAC,gHAAmB,CAAC;;AAE9C;AACA;AACA;AACA;;AAEA,IAAIuB,OAAO;AACX,IAAIC,SAAS;;AAEb;AACA,IAAIC,UAAU,GAAG,CAAC;AAClB,IAAIC,UAAU,GAAG,CAAC;;AAElB;AACA,SAAS3B,EAAEA,CAACxe,OAAO,EAAE+e,GAAG,EAAEC,MAAM,EAAE;EAChC,IAAIpB,CAAC,GAAGmB,GAAG,IAAIC,MAAM,IAAI,CAAC;EAC1B,IAAItO,CAAC,GAAGqO,GAAG,IAAI,EAAE;EAEjB/e,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EACvB,IAAIogB,IAAI,GAAGpgB,OAAO,CAACogB,IAAI,IAAIJ,OAAO;EAClC,IAAIK,QAAQ,GAAGrgB,OAAO,CAACqgB,QAAQ,KAAKxf,SAAS,GAAGb,OAAO,CAACqgB,QAAQ,GAAGJ,SAAS;;EAE5E;EACA;EACA;EACA,IAAIG,IAAI,IAAI,IAAI,IAAIC,QAAQ,IAAI,IAAI,EAAE;IACpC,IAAIC,SAAS,GAAGP,GAAG,CAAC,CAAC;IACrB,IAAIK,IAAI,IAAI,IAAI,EAAE;MAChB;MACAA,IAAI,GAAGJ,OAAO,GAAG,CACfM,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,EACnBA,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CACrE;IACH;IACA,IAAID,QAAQ,IAAI,IAAI,EAAE;MACpB;MACAA,QAAQ,GAAGJ,SAAS,GAAG,CAACK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,GAAGA,SAAS,CAAC,CAAC,CAAC,IAAI,MAAM;IACpE;EACF;;EAEA;EACA;EACA;EACA;EACA,IAAIC,KAAK,GAAGvgB,OAAO,CAACugB,KAAK,KAAK1f,SAAS,GAAGb,OAAO,CAACugB,KAAK,GAAG,IAAIzM,IAAI,CAAC,CAAC,CAAC0M,OAAO,CAAC,CAAC;;EAE9E;EACA;EACA,IAAIC,KAAK,GAAGzgB,OAAO,CAACygB,KAAK,KAAK5f,SAAS,GAAGb,OAAO,CAACygB,KAAK,GAAGN,UAAU,GAAG,CAAC;;EAExE;EACA,IAAIO,EAAE,GAAIH,KAAK,GAAGL,UAAU,GAAI,CAACO,KAAK,GAAGN,UAAU,IAAE,KAAK;;EAE1D;EACA,IAAIO,EAAE,GAAG,CAAC,IAAI1gB,OAAO,CAACqgB,QAAQ,KAAKxf,SAAS,EAAE;IAC5Cwf,QAAQ,GAAGA,QAAQ,GAAG,CAAC,GAAG,MAAM;EAClC;;EAEA;EACA;EACA,IAAI,CAACK,EAAE,GAAG,CAAC,IAAIH,KAAK,GAAGL,UAAU,KAAKlgB,OAAO,CAACygB,KAAK,KAAK5f,SAAS,EAAE;IACjE4f,KAAK,GAAG,CAAC;EACX;;EAEA;EACA,IAAIA,KAAK,IAAI,KAAK,EAAE;IAClB,MAAM,IAAIxe,KAAK,CAAC,kDAAkD,CAAC;EACrE;EAEAie,UAAU,GAAGK,KAAK;EAClBJ,UAAU,GAAGM,KAAK;EAClBR,SAAS,GAAGI,QAAQ;;EAEpB;EACAE,KAAK,IAAI,cAAc;;EAEvB;EACA,IAAII,EAAE,GAAG,CAAC,CAACJ,KAAK,GAAG,SAAS,IAAI,KAAK,GAAGE,KAAK,IAAI,WAAW;EAC5D/P,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAG+C,EAAE,KAAK,EAAE,GAAG,IAAI;EACzBjQ,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAG+C,EAAE,KAAK,EAAE,GAAG,IAAI;EACzBjQ,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAG+C,EAAE,KAAK,CAAC,GAAG,IAAI;EACxBjQ,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAG+C,EAAE,GAAG,IAAI;;EAElB;EACA,IAAIC,GAAG,GAAIL,KAAK,GAAG,WAAW,GAAG,KAAK,GAAI,SAAS;EACnD7P,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAGgD,GAAG,KAAK,CAAC,GAAG,IAAI;EACzBlQ,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAGgD,GAAG,GAAG,IAAI;;EAEnB;EACAlQ,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAGgD,GAAG,KAAK,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;EAClClQ,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAGgD,GAAG,KAAK,EAAE,GAAG,IAAI;;EAE1B;EACAlQ,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAGyC,QAAQ,KAAK,CAAC,GAAG,IAAI;;EAE9B;EACA3P,CAAC,CAACkN,CAAC,EAAE,CAAC,GAAGyC,QAAQ,GAAG,IAAI;;EAExB;EACA,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAE,EAAEA,CAAC,EAAE;IAC1BnQ,CAAC,CAACkN,CAAC,GAAGiD,CAAC,CAAC,GAAGT,IAAI,CAACS,CAAC,CAAC;EACpB;EAEA,OAAO9B,GAAG,GAAGA,GAAG,GAAGD,WAAW,CAACpO,CAAC,CAAC;AACnC;AAEAgO,MAAM,CAACC,OAAO,GAAGH,EAAE;;;;;;;;;;AC5GnB,IAAIuB,GAAG,GAAGtB,mBAAO,CAAC,wGAAW,CAAC;AAC9B,IAAIK,WAAW,GAAGL,mBAAO,CAAC,gHAAmB,CAAC;AAE9C,SAASnP,EAAEA,CAACtP,OAAO,EAAE+e,GAAG,EAAEC,MAAM,EAAE;EAChC,IAAIpB,CAAC,GAAGmB,GAAG,IAAIC,MAAM,IAAI,CAAC;EAE1B,IAAI,OAAOhf,OAAQ,IAAI,QAAQ,EAAE;IAC/B+e,GAAG,GAAG/e,OAAO,KAAK,QAAQ,GAAG,IAAIqM,KAAK,CAAC,EAAE,CAAC,GAAG,IAAI;IACjDrM,OAAO,GAAG,IAAI;EAChB;EACAA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EAEvB,IAAI2f,IAAI,GAAG3f,OAAO,CAAC8f,MAAM,IAAI,CAAC9f,OAAO,CAAC+f,GAAG,IAAIA,GAAG,EAAE,CAAC;;EAEnD;EACAJ,IAAI,CAAC,CAAC,CAAC,GAAIA,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,GAAI,IAAI;EACjCA,IAAI,CAAC,CAAC,CAAC,GAAIA,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,GAAI,IAAI;;EAEjC;EACA,IAAIZ,GAAG,EAAE;IACP,KAAK,IAAI+B,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAG,EAAE,EAAE,EAAEA,EAAE,EAAE;MAC9B/B,GAAG,CAACnB,CAAC,GAAGkD,EAAE,CAAC,GAAGnB,IAAI,CAACmB,EAAE,CAAC;IACxB;EACF;EAEA,OAAO/B,GAAG,IAAID,WAAW,CAACa,IAAI,CAAC;AACjC;AAEAjB,MAAM,CAACC,OAAO,GAAGrP,EAAE;;;;;;;;;;;;;;;;;;;;AC5BnB,IAAIyR,SAAS,GAAI,SAAI,IAAI,SAAI,CAACA,SAAS,IAAK,UAAUC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACrF,SAASC,KAAKA,CAAClX,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYgX,CAAC,GAAGhX,KAAK,GAAG,IAAIgX,CAAC,CAAC,UAAUlL,OAAO,EAAE;MAAEA,OAAO,CAAC9L,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKgX,CAAC,KAAKA,CAAC,GAAGnL,OAAO,CAAC,EAAE,UAAUC,OAAO,EAAE8H,MAAM,EAAE;IACvD,SAASuD,SAASA,CAACnX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAACpX,IAAI,CAACG,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASsE,QAAQA,CAACrX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAAC,OAAO,CAAC,CAACjX,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASqE,IAAIA,CAAC3c,MAAM,EAAE;MAAEA,MAAM,CAACqF,IAAI,GAAGgM,OAAO,CAACrR,MAAM,CAACuF,KAAK,CAAC,GAAGkX,KAAK,CAACzc,MAAM,CAACuF,KAAK,CAAC,CAACwO,IAAI,CAAC2I,SAAS,EAAEE,QAAQ,CAAC;IAAE;IAC7GD,IAAI,CAAC,CAACH,SAAS,GAAGA,SAAS,CAACjd,KAAK,CAAC8c,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAElX,IAAI,CAAC,CAAC,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACgE;AAC9B;AACJ;AACmD;AAClF;AACA;AACA;AACO,MAAM2X,iBAAiB,SAAS/iB,2EAAY,CAAC;EAChDgC,WAAWA,CAACX,OAAO,EAAE;IACjB,KAAK,CAAC,CAAC;IACP,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB;AACR;AACA;IACQ,IAAI,CAAC2hB,QAAQ,GAAG,CAAC7a,GAAG,EAAE8a,QAAQ,KAAKb,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAC5E,MAAM,IAAI,CAAChf,WAAW;MACtB,MAAM4C,MAAM,GAAG,MAAM,IAAI,CAACkd,aAAa,CAACpgB,OAAO,CAACqF,GAAG,EAAE8a,QAAQ,CAAC;MAC9D,OAAO9S,MAAM,CAACgT,MAAM,CAAChT,MAAM,CAACgT,MAAM,CAAC,CAAC,CAAC,EAAEnd,MAAM,CAAC,EAAE;QAAEjD,IAAI,EAAEoN,MAAM,CAACgT,MAAM,CAAChT,MAAM,CAACgT,MAAM,CAAC,CAAC,CAAC,EAAEnd,MAAM,CAACjD,IAAI,CAAC,EAAE;UAAEC,IAAI,EAAGogB,GAAG,IAAKpd,MAAM,CAACjD,IAAI,CAACqC,MAAM,CAACge,GAAG;QAAE,CAAC;MAAE,CAAC,CAAC;IACxJ,CAAC,CAAC;IACF,IAAI,CAACpiB,MAAM,GAAGpB,oDAAU,CAAC,UAAU,CAAC;IACpC,IAAI,CAACyjB,YAAY,GAAG,IAAI;IACxB,IAAI,CAACH,aAAa,GAAG,IAAI;IACzB,IAAI,CAAC9f,WAAW,GAAG,IAAI,CAACR,IAAI,CAAC,CAAC;IAC9B,IAAI,CAACygB,YAAY,GAAG,IAAI,CAACC,iBAAiB,CAAC;MAAExgB,OAAO,EAAE,IAAI,CAACkgB,QAAQ,CAACtC,IAAI,CAAC,IAAI;IAAE,CAAC,CAAC;EACrF;EACA,IAAIrb,IAAIA,CAAA,EAAG;IACP,OAAO,IAAI,CAAChE,OAAO,CAACoN,UAAU;EAClC;EACA,IAAI8U,KAAKA,CAAA,EAAG;IACR,IAAIC,EAAE;IACN,OAAO,CAACA,EAAE,GAAG,IAAI,CAACniB,OAAO,CAACkiB,KAAK,MAAM,IAAI,IAAIC,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAAC,CAAC;EACxE;EACAC,SAASA,CAAA,EAAG,CAAE;EACd7gB,IAAIA,CAAA,EAAG;IACH,OAAOwf,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM;QAAEsB;MAAgB,CAAC,GAAG,IAAI,CAACH,KAAK;MACtC,IAAI,CAACG,eAAe,EAAE;QAClB,IAAI,CAAC1iB,MAAM,CAACyC,IAAI,CAAC,+CAA+C,CAAC;MACrE;MACA,MAAMkgB,QAAQ,GAAG,IAAI,CAACtiB,OAAO,CAACuiB,UAAU,GAClCf,yCAAY,CAAC,IAAI,CAACxhB,OAAO,CAACuiB,UAAU,CAAC,GACrCd,wFAAuB,CAAC,IAAI,CAACzhB,OAAO,CAACoN,UAAU,EAAEiV,eAAe,CAAC;MACvE,IAAI,CAACR,aAAa,GAAG,MAAMS,QAAQ,CAAC,IAAI,CAACtiB,OAAO,CAACoN,UAAU,CAAC;MAC5D,IAAI,CAACyU,aAAa,CAACY,qBAAqB,CAACjB,0CAAa,CAAC,CAACmB,MAAM,EAAEC,SAAS,EAAEC,KAAK,KAAK;QACjF,IAAI,CAAChhB,gBAAgB,CAAEC,EAAE,IAAK;UAAE,IAAIqgB,EAAE;UAAE,OAAO,CAACA,EAAE,GAAGrgB,EAAE,CAAC4J,aAAa,MAAM,IAAI,IAAIyW,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACW,IAAI,CAAChhB,EAAE,EAAE;YAAE6gB,MAAM;YAAE/X,KAAK,EAAEgY,SAAS;YAAEC;UAAM,CAAC,CAAC;QAAE,CAAC,CAAC;MACpK,CAAC,CAAC,CAAC;IACP,CAAC,CAAC;EACN;EACAphB,OAAOA,CAACshB,KAAK,EAAE9V,MAAM,EAAE;IACnB,OAAO8T,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,OAAO,IAAI,CAACxZ,SAAS,CAAEyb,GAAG,IAAKA,GAAG,CAACvhB,OAAO,CAACshB,KAAK,EAAE9V,MAAM,CAAC,CAAC;IAC9D,CAAC,CAAC;EACN;EACA;AACJ;AACA;AACA;AACA;EACI7I,KAAKA,CAAA,EAAG;IACJ,IAAI+d,EAAE,EAAEc,EAAE;IACV,CAACA,EAAE,GAAG,CAACd,EAAE,GAAG,IAAI,CAACN,aAAa,MAAM,IAAI,IAAIM,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC/d,KAAK,MAAM,IAAI,IAAI6e,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACH,IAAI,CAACX,EAAE,CAAC;EACnI;EACAjd,MAAMA,CAAC4B,GAAG,EAAEC,UAAU,EAAE;IACpB,OAAOga,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAChf,WAAW;MACtB,OAAO,IAAI,CAACigB,YAAY,CAAC9c,MAAM,CAAC4B,GAAG,EAAEC,UAAU,CAAC;IACpD,CAAC,CAAC;EACN;EACAb,WAAWA,CAACY,GAAG,EAAEC,UAAU,EAAE;IACzB,OAAOga,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAChf,WAAW;MACtB,OAAO,IAAI,CAACigB,YAAY,CAAC9b,WAAW,CAACY,GAAG,EAAEC,UAAU,CAAC;IACzD,CAAC,CAAC;EACN;EACAnH,GAAGA,CAACkH,GAAG,EAAEC,UAAU,EAAE;IACjB,OAAOga,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAChf,WAAW;MACtB,OAAO,IAAI,CAACigB,YAAY,CAACpiB,GAAG,CAACkH,GAAG,EAAEC,UAAU,CAAC;IACjD,CAAC,CAAC;EACN;EACAK,QAAQA,CAAC8b,EAAE,EAAEljB,OAAO,EAAE;IAClB,OAAO+gB,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAChf,WAAW;MACtB,OAAO,IAAI,CAACohB,WAAW,CAAC,MAAMpC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;QAAE,OAAOmC,EAAE,CAAC,IAAI,CAACjB,iBAAiB,CAAC;UAAExgB,OAAO,EAAE,IAAI,CAACkgB;QAAS,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC,CAAC;IACnJ,CAAC,CAAC;EACN;EACApa,SAASA,CAAC2b,EAAE,EAAEljB,OAAO,EAAE;IACnB,OAAO+gB,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAChf,WAAW;MACtB,OAAO,IAAI,CAACohB,WAAW,CAAC,MAAMpC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;QAAE,OAAOmC,EAAE,CAAC,IAAI,CAACjB,iBAAiB,CAAC;UAAExgB,OAAO,EAAE,IAAI,CAACkgB;QAAS,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC,CAAC;IACnJ,CAAC,CAAC;EACN;EACAwB,WAAWA,CAAC9b,QAAQ,EAAE;IAClB,OAAO+b,SAAS,CAACC,KAAK,CAACnJ,OAAO,CAAE,WAAU,IAAI,CAACla,OAAO,CAACoN,UAAW,EAAC,EAAE/F,QAAQ,CAAC;EAClF;EACA5C,eAAeA,CAACye,EAAE,EAAEljB,OAAO,EAAE;IACzB,OAAO+gB,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,OAAO,IAAI,CAAC3Z,QAAQ,CAAC,IAAI,CAACkc,eAAe,CAACJ,EAAE,CAAC,CAAC;IAClD,CAAC,CAAC;EACN;EACA7f,gBAAgBA,CAAC6f,EAAE,EAAEljB,OAAO,EAAE;IAC1B,OAAO,IAAI,CAACuH,SAAS,CAAC,IAAI,CAAC+b,eAAe,CAACJ,EAAE,CAAC,CAAC;EACnD;EACA;AACJ;AACA;EACII,eAAeA,CAACxhB,EAAE,EAAE;IAChB,OAAQyB,EAAE,IAAKwd,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MACxD,MAAM,IAAI,CAACY,QAAQ,CAAC,mBAAmB,CAAC;MACxC,IAAI4B,SAAS,GAAG,KAAK;MACrB,MAAMrb,MAAM,GAAGA,CAAA,KAAM6Y,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;QAC9D,IAAIwC,SAAS,EAAE;UACX,OAAO;YAAEC,YAAY,EAAE;UAAE,CAAC;QAC9B;QACAD,SAAS,GAAG,IAAI;QAChB,OAAO,IAAI,CAAC5B,QAAQ,CAAC,QAAQ,CAAC;MAClC,CAAC,CAAC;MACF,MAAM9Z,QAAQ,GAAGA,CAAA,KAAM;QACnB0b,SAAS,GAAG,IAAI;QAChB,OAAO,IAAI,CAAC5B,QAAQ,CAAC,UAAU,CAAC;MACpC,CAAC;MACD,IAAI;QACA,MAAMhd,MAAM,GAAG,MAAM7C,EAAE,CAACgN,MAAM,CAACgT,MAAM,CAAChT,MAAM,CAACgT,MAAM,CAAC,CAAC,CAAC,EAAEve,EAAE,CAAC,EAAE;UAAE2E,MAAM;UACjEL;QAAS,CAAC,CAAC,CAAC;QAChB,IAAI,CAAC0b,SAAS,EAAE;UACZ,MAAMrb,MAAM,CAAC,CAAC;QAClB;QACA,OAAOvD,MAAM;MACjB,CAAC,CACD,OAAOxC,EAAE,EAAE;QACP,IAAI,CAACxC,MAAM,CAACiR,KAAK,CAAC,0BAA0B,EAAEzO,EAAE,CAAC;QACjD,MAAM0F,QAAQ,CAAC,CAAC;QAChB,MAAM1F,EAAE;MACZ;IACJ,CAAC,CAAC;EACN;EACA8f,iBAAiBA,CAAC1e,EAAE,EAAE;IAClB,OAAOuL,MAAM,CAACgT,MAAM,CAAChT,MAAM,CAACgT,MAAM,CAAC,CAAC,CAAC,EAAEve,EAAE,CAAC,EAAE;MACxC;AACZ;AACA;MACY2B,MAAMA,CAAC4B,GAAG,EAAEC,UAAU,EAAE;QACpB,IAAIob,EAAE,EAAEc,EAAE;QACV,OAAOlC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;UAChD,MAAMtZ,GAAG,GAAG,MAAMlE,EAAE,CAAC9B,OAAO,CAACqF,GAAG,EAAEC,UAAU,CAAC;UAC7C,OAAO,CAACkc,EAAE,GAAG,CAACd,EAAE,GAAG1a,GAAG,CAAC/F,IAAI,MAAM,IAAI,IAAIygB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACpe,MAAM,MAAM,IAAI,IAAIkf,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,EAAE;QACpH,CAAC,CAAC;MACN,CAAC;MACD;AACZ;AACA;MACY/c,WAAWA,CAACY,GAAG,EAAEC,UAAU,EAAE;QACzB,IAAIob,EAAE,EAAEc,EAAE;QACV,OAAOlC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;UAChD,MAAMtZ,GAAG,GAAG,MAAMlE,EAAE,CAAC9B,OAAO,CAACqF,GAAG,EAAEC,UAAU,CAAC;UAC7C,OAAO,CAACkc,EAAE,GAAG,CAACd,EAAE,GAAG1a,GAAG,CAAC/F,IAAI,MAAM,IAAI,IAAIygB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACxgB,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,IAAIshB,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,IAAI;QACvH,CAAC,CAAC;MACN,CAAC;MACD;AACZ;AACA;MACYrjB,GAAGA,CAACkH,GAAG,EAAEC,UAAU,EAAE;QACjB,IAAIob,EAAE;QACN,OAAOpB,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;UAChD,MAAMtZ,GAAG,GAAG,MAAMlE,EAAE,CAAC9B,OAAO,CAACqF,GAAG,EAAEC,UAAU,CAAC;UAC7C,MAAMd,KAAK,GAAG,CAACkc,EAAE,GAAG1a,GAAG,CAAC/F,IAAI,MAAM,IAAI,IAAIygB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACxgB,IAAI,CAAC,CAAC,CAAC;UAC7E,IAAI,CAACsE,KAAK,EAAE;YACR,MAAM,IAAIhE,KAAK,CAAC,qBAAqB,CAAC;UAC1C;UACA,OAAOgE,KAAK;QAChB,CAAC,CAAC;MACN;IAAE,CAAC,CAAC;EACZ;AACJ;AACA;;;;;;;;;;;;;;;;ACvLA,IAAI8a,SAAS,GAAI,SAAI,IAAI,SAAI,CAACA,SAAS,IAAK,UAAUC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACrF,SAASC,KAAKA,CAAClX,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYgX,CAAC,GAAGhX,KAAK,GAAG,IAAIgX,CAAC,CAAC,UAAUlL,OAAO,EAAE;MAAEA,OAAO,CAAC9L,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKgX,CAAC,KAAKA,CAAC,GAAGnL,OAAO,CAAC,EAAE,UAAUC,OAAO,EAAE8H,MAAM,EAAE;IACvD,SAASuD,SAASA,CAACnX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAACpX,IAAI,CAACG,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASsE,QAAQA,CAACrX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAAC,OAAO,CAAC,CAACjX,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASqE,IAAIA,CAAC3c,MAAM,EAAE;MAAEA,MAAM,CAACqF,IAAI,GAAGgM,OAAO,CAACrR,MAAM,CAACuF,KAAK,CAAC,GAAGkX,KAAK,CAACzc,MAAM,CAACuF,KAAK,CAAC,CAACwO,IAAI,CAAC2I,SAAS,EAAEE,QAAQ,CAAC;IAAE;IAC7GD,IAAI,CAAC,CAACH,SAAS,GAAGA,SAAS,CAACjd,KAAK,CAAC8c,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAElX,IAAI,CAAC,CAAC,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACkE;AAC5D,MAAM0Z,SAAS,SAAS/P,6EAAc,CAAC;EAC1CgQ,IAAIA,CAACxP,IAAI,EAAEjG,IAAI,EAAEqG,OAAO,GAAG,CAAC,CAAC,EAAE;IAC3B,OAAOyM,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM7G,OAAO,GAAG,MAAM,IAAI,CAACjG,YAAY,CAACC,IAAI,CAAC;MAC7C,MAAMzM,GAAG,GAAG,MAAMkc,KAAK,CAACzJ,OAAO,CAAC7F,GAAG,EAAE;QACjCuP,MAAM,EAAE,MAAM;QACdtP,OAAO,EAAExF,MAAM,CAACgT,MAAM,CAAChT,MAAM,CAACgT,MAAM,CAAC,CAAC,CAAC,EAAExN,OAAO,CAAC,EAAE4F,OAAO,CAAC5F,OAAO,CAAC;QACnEiF,IAAI,EAAElX,IAAI,CAACC,SAAS,CAAC2L,IAAI;MAC7B,CAAC,CAAC;MACF,IAAI,CAACxG,GAAG,CAACoc,EAAE,EAAE;QACT,MAAM,IAAI5hB,KAAK,CAAE,YAAWwF,GAAG,CAAC1E,MAAO,MAAK0E,GAAG,CAACqc,UAAW,oBAAmB5P,IAAK,KAAI,MAAMzM,GAAG,CAACyV,IAAI,CAAC,CAAE,GAAE,CAAC;MAC/G;MACA,OAAOzV,GAAG,CAAC2L,IAAI,CAAC,CAAC;IACrB,CAAC,CAAC;EACN;EACAxT,GAAGA,CAACsU,IAAI,EAAEI,OAAO,EAAE;IACf,OAAOyM,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM7G,OAAO,GAAG,MAAM,IAAI,CAACjG,YAAY,CAACC,IAAI,CAAC;MAC7C,MAAMzM,GAAG,GAAG,MAAMkc,KAAK,CAACzJ,OAAO,CAAC7F,GAAG,EAAE;QACjCuP,MAAM,EAAE,KAAK;QACbtP,OAAO,EAAExF,MAAM,CAACgT,MAAM,CAAChT,MAAM,CAACgT,MAAM,CAAC,CAAC,CAAC,EAAExN,OAAO,CAAC,EAAE4F,OAAO,CAAC5F,OAAO;MACtE,CAAC,CAAC;MACF,IAAI,CAAC7M,GAAG,CAACoc,EAAE,EAAE;QACT,MAAM,IAAI5hB,KAAK,CAAE,YAAWwF,GAAG,CAAC1E,MAAO,MAAK0E,GAAG,CAACqc,UAAW,sBAAqB5P,IAAK,KAAI,MAAMzM,GAAG,CAACyV,IAAI,CAAC,CAAE,GAAE,CAAC;MACjH;MACA,OAAOzV,GAAG,CAAC2L,IAAI,CAAC,CAAC;IACrB,CAAC,CAAC;EACN;EACAqG,aAAaA,CAACvF,IAAI,EAAEjG,IAAI,EAAEqG,OAAO,GAAG,CAAC,CAAC,EAAEtI,MAAM,EAAE;IAC5C,OAAO+U,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM7G,OAAO,GAAG,MAAM,IAAI,CAACjG,YAAY,CAACC,IAAI,CAAC;MAC7C,MAAMzM,GAAG,GAAG,MAAMkc,KAAK,CAACzJ,OAAO,CAAC7F,GAAG,EAAE;QACjCuP,MAAM,EAAE,MAAM;QACdtP,OAAO,EAAExF,MAAM,CAACgT,MAAM,CAAChT,MAAM,CAACgT,MAAM,CAAC,CAAC,CAAC,EAAExN,OAAO,CAAC,EAAE4F,OAAO,CAAC5F,OAAO,CAAC;QACnEiF,IAAI,EAAElX,IAAI,CAACC,SAAS,CAAC2L,IAAI,CAAC;QAC1BjC,MAAM;QACN+X,KAAK,EAAE;MACX,CAAC,CAAC;MACF,IAAI,CAACtc,GAAG,CAACoc,EAAE,IAAI,CAACpc,GAAG,CAAC8R,IAAI,EAAE;QACtB,MAAM2D,IAAI,GAAG,MAAMzV,GAAG,CAACyV,IAAI,CAAC,CAAC;QAC7B8G,OAAO,CAACnb,KAAK,CAAE,+BAA8BqL,IAAK,MAAKzM,GAAG,CAAC1E,MAAO,MAAK0E,GAAG,CAACqc,UAAW,KAAI5G,IAAK,EAAC,CAAC;QACjG,MAAMrU,KAAK,GAAG,IAAI5G,KAAK,CAAE,QAAOwF,GAAG,CAACqc,UAAW,KAAI5G,IAAK,EAAC,CAAC;QAC1DrU,KAAK,CAAC9F,MAAM,GAAG0E,GAAG,CAAC1E,MAAM;QACzB,MAAM8F,KAAK;MACf;MACA;AACZ;AACA;AACA;AACA;MACY,MAAM8Q,MAAM,GAAGlS,GAAG,CAAC8R,IAAI,CAACK,SAAS,CAAC,CAAC;MACnC,MAAMqK,YAAY,GAAG,IAAIC,cAAc,CAAC;QACpCC,KAAKA,CAACC,UAAU,EAAE;UACd,OAAOC,aAAa,CAAC,CAAC;UACtB,SAASA,aAAaA,CAAA,EAAG;YACrB,OAAOtD,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;cAChD,IAAI/U,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACsL,OAAO,EAAE;gBAChE8M,UAAU,CAAChgB,KAAK,CAAC,CAAC;cACtB;cACA,IAAI;gBACA,MAAM;kBAAE4F,IAAI;kBAAEE;gBAAM,CAAC,GAAG,MAAMyP,MAAM,CAACE,IAAI,CAAC,CAAC;gBAC3C;gBACA,IAAI7P,IAAI,EAAE;kBACNoa,UAAU,CAAChgB,KAAK,CAAC,CAAC;kBAClB;gBACJ;gBACA;gBACAggB,UAAU,CAACE,OAAO,CAACpa,KAAK,CAAC;gBACzB,OAAOma,aAAa,CAAC,CAAC;cAC1B,CAAC,CACD,OAAOliB,EAAE,EAAE;gBACPiiB,UAAU,CAAChgB,KAAK,CAAC,CAAC;cACtB;YACJ,CAAC,CAAC;UACN;QACJ;MACJ,CAAC,CAAC;MACF;MACA,OAAO,IAAImgB,QAAQ,CAACN,YAAY,CAAC,CAAC1K,IAAI;IAC1C,CAAC,CAAC;EACN;AACJ;AACA;;;;;;;;;;;;;;;;AC5FkG;AAC3F,MAAMiL,8BAA8B,SAASrP,kGAAmC,CAAC;EACpFxU,WAAWA,CAACX,OAAO,EAAE;IACjB;IACA,KAAK,CAACA,OAAO,CAAC;EAClB;EACA,IAAIykB,UAAUA,CAAA,EAAG;IACb,OAAO,IAAI,CAACzkB,OAAO;EACvB;EACA6W,UAAUA,CAAC6N,WAAW,EAAE;IACpB,MAAMC,UAAU,GAAI,kBAAiBD,WAAW,CAACtW,IAAK,IAAG,IAAI,CAACqW,UAAU,CAACE,UAAW,EAAC;IACrFD,WAAW,CAACtW,IAAI,IAAI4G,uEAAQ,CAAC0C,IAAI,IAAIsM,OAAO,CAACpT,KAAK,CAAC,sBAAsB,EAAE+T,UAAU,CAAC;IACtF,OAAOvB,SAAS,CAACC,KAAK,CAACnJ,OAAO,CAACyK,UAAU,EAAE;MAAE3Y,MAAM,EAAE0Y,WAAW,CAAC1Y;IAAO,CAAC,EAAE0Y,WAAW,CAACrd,QAAQ,CAAC;EACpG;AACJ;AACA;;;;;;;;;;;;;;;;;ACfmC;AACnC;AACA;AACA;AACO,SAASud,sBAAsBA,CAACC,gBAAgB,EAAEC,YAAY,GAAG,IAAI,EAAE;EAC1E;AACJ;AACA;AACA;AACA;AACA;EACI,OAAOA,YAAY,GACb,IAAIC,YAAY,CAAC,IAAIC,GAAG,CAAC,mLAA+C,CAAC,EAAE;IACzE;IACAhhB,IAAI,EAAG,oBAAmB6gB,gBAAiB,EAAC;IAC5CzW,IAAI,EAAE,SAAQ;EAClB,CAAC,CAAC,CAAC+W,IAAI,GACL,IAAIC,MAAM,CAAC,IAAIJ,GAAG,CAAC,6KAAyC,CAAC,EAAE;IAC7D;IACAhhB,IAAI,EAAG,aAAY6gB,gBAAiB,EAAC;IACrCzW,IAAI,EAAE,SAAQ;EAClB,CAAC,CAAC;AACV;AACA;AACA;AACA;AACA;AACO,SAASqT,uBAAuBA,CAACoD,gBAAgB,EAAEC,YAAY,GAAG,IAAI,EAAE;EAC3E,OAAOtD,yCAAY,CAACoD,sBAAsB,CAACC,gBAAgB,EAAEC,YAAY,CAAC,CAAC;AAC/E;AACA;;;;;;;;;;;;;;;;;AC9B+B;AAC/B;AACA;AACA;AACO,MAAMO,eAAe,CAAC;EACzB1kB,WAAWA,CAAC2kB,OAAO,EAAE;IACjB,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,KAAK,GAAGhnB,wDAAY;IACzB,IAAI,CAACinB,KAAK,GAAGjnB,wDAAY;IACzB,IAAI,CAACknB,IAAI,GAAGlnB,uDAAW;IACvB,IAAI,CAACmnB,IAAI,GAAGnnB,uDAAW;IACvB,IAAI,CAAConB,IAAI,GAAGpnB,uDAAW;IACvB,IAAI,CAACqnB,KAAK,GAAGrnB,wDAAY;IACzB,IAAI,CAACsnB,GAAG,GAAGtnB,sDAAU;EACzB;EACAunB,KAAKA,CAAC,GAAGC,CAAC,EAAE;IACR/B,OAAO,CAAC8B,KAAK,CAAC,GAAGC,CAAC,CAAC;IACnB,IAAI,CAACT,OAAO,CAACxN,OAAO,CAAEkO,CAAC,IAAKA,CAAC,CAACC,cAAc,CAACH,KAAK,CAAC,GAAGC,CAAC,CAAC,CAAC;EAC7D;EACAnV,KAAKA,CAAC,GAAGmV,CAAC,EAAE;IACR/B,OAAO,CAACpT,KAAK,CAAC,GAAGmV,CAAC,CAAC;IACnB,IAAI,CAACT,OAAO,CAACxN,OAAO,CAAEkO,CAAC,IAAKA,CAAC,CAACC,cAAc,CAACrV,KAAK,CAAC,GAAGmV,CAAC,CAAC,CAAC;EAC7D;EACAG,IAAIA,CAAC,GAAGH,CAAC,EAAE;IACP/B,OAAO,CAACkC,IAAI,CAAC,GAAGH,CAAC,CAAC;IAClB,IAAI,CAACT,OAAO,CAACxN,OAAO,CAAEkO,CAAC,IAAKA,CAAC,CAACC,cAAc,CAACC,IAAI,CAAC,GAAGH,CAAC,CAAC,CAAC;EAC5D;EACAI,GAAGA,CAAC,GAAGJ,CAAC,EAAE;IACN/B,OAAO,CAACmC,GAAG,CAAC,GAAGJ,CAAC,CAAC;IACjB,IAAI,CAACK,YAAY,CAACL,CAAC,EAAG9Y,MAAM,IAAK,IAAI,CAACqY,OAAO,CAACxN,OAAO,CAAEkO,CAAC,IAAKA,CAAC,CAACC,cAAc,CAACE,GAAG,CAAC,GAAGlZ,MAAM,CAAC,CAAC,CAAC;EAClG;EACA7K,IAAIA,CAAC,GAAG2jB,CAAC,EAAE;IACP/B,OAAO,CAAC5hB,IAAI,CAAC,GAAG2jB,CAAC,CAAC;IAClB,IAAI,CAACK,YAAY,CAACL,CAAC,EAAG9Y,MAAM,IAAK,IAAI,CAACqY,OAAO,CAACxN,OAAO,CAAEkO,CAAC,IAAKA,CAAC,CAACC,cAAc,CAAC7jB,IAAI,CAAC,GAAG6K,MAAM,CAAC,CAAC,CAAC;EACnG;EACApE,KAAKA,CAAC,GAAGkd,CAAC,EAAE;IACR/B,OAAO,CAACnb,KAAK,CAAC,GAAGkd,CAAC,CAAC;IACnB,IAAI,CAACK,YAAY,CAACL,CAAC,EAAG9Y,MAAM,IAAK,IAAI,CAACqY,OAAO,CAACxN,OAAO,CAAEkO,CAAC,IAAKA,CAAC,CAACC,cAAc,CAACpd,KAAK,CAAC,GAAGoE,MAAM,CAAC,CAAC,CAAC;EACpG;EACAoZ,IAAIA,CAACC,KAAK,EAAE;IACRtC,OAAO,CAACqC,IAAI,CAACC,KAAK,CAAC;IACnB,IAAI,CAAChB,OAAO,CAACxN,OAAO,CAAEkO,CAAC,IAAKA,CAAC,CAACC,cAAc,CAACI,IAAI,CAACC,KAAK,CAAC,CAAC;EAC7D;EACAC,OAAOA,CAACD,KAAK,EAAE;IACXtC,OAAO,CAACuC,OAAO,CAACD,KAAK,CAAC;IACtB,IAAI,CAAChB,OAAO,CAACxN,OAAO,CAAEkO,CAAC,IAAKA,CAAC,CAACC,cAAc,CAACM,OAAO,CAACD,KAAK,CAAC,CAAC;EAChE;EACAE,QAAQA,CAACC,KAAK,EAAE;IACZ;EAAA;EAEJC,QAAQA,CAAA,EAAG;IACP;IACA,OAAOnoB,uDAAW;EACtB;EACAooB,UAAUA,CAACF,KAAK,EAAE;IACd;IACA,OAAO,IAAI;EACf;EACA;AACJ;AACA;AACA;EACIL,YAAYA,CAACL,CAAC,EAAExd,OAAO,EAAE;IACrB,MAAMqe,eAAe,GAAGb,CAAC,CAAC3gB,GAAG,CAAEyhB,KAAK,IAAK;MACrC,IAAI;QACA;QACA,OAAOC,eAAe,CAACf,CAAC,CAAC;MAC7B,CAAC,CACD,OAAO5jB,EAAE,EAAE;QACP6hB,OAAO,CAACnb,KAAK,CAAC1G,EAAE,CAAC;QACjB,OAAO,4EAA4E;MACvF;IACJ,CAAC,CAAC;IACF,OAAOoG,OAAO,CAAC,GAAGqe,eAAe,CAAC;EACtC;AACJ;AACA;;;;;;;;;;;;;;;;;;;;;;;AC5EA,IAAI7F,SAAS,GAAI,SAAI,IAAI,SAAI,CAACA,SAAS,IAAK,UAAUC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACrF,SAASC,KAAKA,CAAClX,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYgX,CAAC,GAAGhX,KAAK,GAAG,IAAIgX,CAAC,CAAC,UAAUlL,OAAO,EAAE;MAAEA,OAAO,CAAC9L,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKgX,CAAC,KAAKA,CAAC,GAAGnL,OAAO,CAAC,EAAE,UAAUC,OAAO,EAAE8H,MAAM,EAAE;IACvD,SAASuD,SAASA,CAACnX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAACpX,IAAI,CAACG,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASsE,QAAQA,CAACrX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAAC,OAAO,CAAC,CAACjX,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASqE,IAAIA,CAAC3c,MAAM,EAAE;MAAEA,MAAM,CAACqF,IAAI,GAAGgM,OAAO,CAACrR,MAAM,CAACuF,KAAK,CAAC,GAAGkX,KAAK,CAACzc,MAAM,CAACuF,KAAK,CAAC,CAACwO,IAAI,CAAC2I,SAAS,EAAEE,QAAQ,CAAC;IAAE;IAC7GD,IAAI,CAAC,CAACH,SAAS,GAAGA,SAAS,CAACjd,KAAK,CAAC8c,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAElX,IAAI,CAAC,CAAC,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACkC;AAC+D;AACJ;AAC1D;AACgB;AAC8B;AAC9B;AACpD;AACA;AACA;AACO,IAAIgd,qBAAqB,gBAC/B,UAAUA,qBAAqB,EAAE;EAC9B;AACJ;AACA;AACA;EACIA,qBAAqB,CAAC,cAAc,CAAC,GAAG,cAAc;EAAC,OALhDA,qBAAqB;AAMhC,CAAC,CAAEA,qBAAqB,IAA6B,CAAC,CAAE,CAPxB;AAQhC;AACA;AACA;AACO,MAAMC,wBAAwB,SAASroB,2EAAY,CAAC;EACvDgC,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,CAAC;IACP,IAAI,CAACsmB,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,aAAa,GAAG,IAAInR,OAAO,CAAEC,OAAO,IAAK;MAC1C,MAAM3O,QAAQ,GAAG,IAAI,CAACxE,gBAAgB,CAAC;QACnCd,WAAW,EAAEA,CAAA,KAAM;UACfiU,OAAO,CAAC,CAAC;UACT3O,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAAC,CAAC;QAClE;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;IACF,IAAI,CAACkO,UAAU,GAAG,IAAIR,yEAAU,CAAC,CAAC,CAAC,CAAC;IACpC,IAAI,CAACoS,eAAe,GAAG,IAAI9B,6DAAe,CAAC,IAAI,CAAC4B,KAAK,CAAC;EAC1D;EACAnR,aAAaA,CAAC/S,MAAM,EAAE;IAClB,OAAOge,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAC7f,YAAY,CAAC,CAAC;MACzB,OAAO,IAAI,CAACkmB,gBAAgB,CAACtR,aAAa,CAAC/S,MAAM,CAAC;IACtD,CAAC,CAAC;EACN;EACA,IAAIyS,YAAYA,CAAA,EAAG;IACf,IAAI2M,EAAE;IACN,OAAO,CAACA,EAAE,GAAG,IAAI,CAACiF,gBAAgB,MAAM,IAAI,IAAIjF,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC3M,YAAY;EAC5F;EACA,IAAIiB,WAAWA,CAAA,EAAG;IACd,IAAI0L,EAAE,EAAEc,EAAE;IACV,OAAO,CAACA,EAAE,GAAG,CAACd,EAAE,GAAG,IAAI,CAACiF,gBAAgB,MAAM,IAAI,IAAIjF,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC1L,WAAW,MAAM,IAAI,IAAIwM,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,KAAK;EACzI;EACA/hB,YAAYA,CAAA,EAAG;IACX,OAAO6f,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,OAAO,IAAI,CAACmG,aAAa;IAC7B,CAAC,CAAC;EACN;EACA;AACJ;AACA;EACI3lB,IAAIA,CAAC8lB,YAAY,EAAEpa,MAAM,EAAE;IACvB,OAAO8T,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,IAAI,IAAI,CAACqG,gBAAgB,EAAE;QACvB;QACA;MACJ;MACA,IAAI,CAACA,gBAAgB,GAAG,IAAI5C,mGAA8B,CAAC1V,MAAM,CAACgT,MAAM,CAAChT,MAAM,CAACgT,MAAM,CAAC;QAAEpL,OAAO,EAAE,IAAIhH,kFAAmB,CAAC,IAAIgS,uFAAiB,CAAC;UACxItU,UAAU,EAAEH,MAAM,CAACqa,MAAM;UACzB/E,UAAU,EAAE8E,YAAY;UACxBnF,KAAK,EAAE;YAAEG,eAAe,EAAE;UAAK,CAAC;UAChC1iB,MAAM,EAAE,IAAI,CAACwnB;QACjB,CAAC,CAAC,EAAE,IAAI9oB,8CAAK,CAAC,CAAC,EAAE,IAAI,CAAC8oB,eAAe,CAAC;QAAEvQ,MAAM,EAAE,IAAI6M,yDAAS,CAAC;UAC1DzP,gBAAgB,EAAEA,CAAA,KAAM+M,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;YACjE,MAAMwG,QAAQ,GAAG,IAAI,CAACN,KAAK,CAAC,IAAI,CAACA,KAAK,CAACpjB,MAAM,GAAG,CAAC,CAAC;YAClD,OAAO,IAAIkS,OAAO,CAAC,CAACC,OAAO,EAAE8H,MAAM,KAAKiD,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;cACjF,MAAM1L,eAAe,GAAG,IAAI6B,eAAe,CAAC,CAAC;cAC7C,IAAI,CAACsQ,0BAA0B,GAAG;gBAC9BpD,UAAU,EAAE/O,eAAe;gBAC3BoS,UAAU,EAAEF;cAChB,CAAC;cACDlS,eAAe,CAACrJ,MAAM,CAAC0b,OAAO,GAAG5J,MAAM;cACvC,IAAI;gBACA9H,OAAO,CAAC,MAAMuR,QAAQ,CAACtB,cAAc,CAACjS,gBAAgB,CAAC,CAAC,CAAC;cAC7D,CAAC,CACD,OAAO7R,EAAE,EAAE;gBACP2b,MAAM,CAAC3b,EAAE,CAAC;cACd,CAAC,SACO;gBACJ,IAAI,CAACqlB,0BAA0B,GAAG3mB,SAAS;cAC/C;YACJ,CAAC,CAAC,CAAC;UACP,CAAC;QACL,CAAC,CAAC;QAAEoW,UAAU,EAAEA,CAAA,KAAM8J,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;UAC/D,MAAMwG,QAAQ,GAAG,IAAI,CAACN,KAAK,CAAC,IAAI,CAACA,KAAK,CAACpjB,MAAM,GAAG,CAAC,CAAC;UAClD,OAAO,IAAIkS,OAAO,CAAC,CAACC,OAAO,EAAE8H,MAAM,KAAKiD,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;YACjF,MAAM1L,eAAe,GAAG,IAAI6B,eAAe,CAAC,CAAC;YAC7C,IAAI,CAACyQ,oBAAoB,GAAG;cACxBvD,UAAU,EAAE/O,eAAe;cAC3BoS,UAAU,EAAEF;YAChB,CAAC;YACD;YACAlS,eAAe,CAACrJ,MAAM,CAAC0b,OAAO,GAAG,MAAM1R,OAAO,CAAC,CAAC;YAChD,IAAI;cACAA,OAAO,CAAC,MAAMuR,QAAQ,CAACtB,cAAc,CAAChP,UAAU,CAAC,CAAC,CAAC;YACvD,CAAC,CACD,OAAO9U,EAAE,EAAE;cACP2b,MAAM,CAAC3b,EAAE,CAAC;YACd,CAAC,SACO;cACJ,IAAI,CAACwlB,oBAAoB,GAAG9mB,SAAS;YACzC;UACJ,CAAC,CAAC,CAAC;QACP,CAAC;MAAE,CAAC,EAAEoM,MAAM,CAAC2a,aAAa,CAAC,EAAE;QAC7B;QACAjoB,MAAM,EAAE,IAAI,CAACwnB;MAAgB,CAAC,CAAC,CAAC;MACpC,IAAI,CAACC,gBAAgB,CAACvkB,gBAAgB,CAAC;QACnCC,aAAa,EAAGC,MAAM,IAAK;UACvB,IAAI,CAAC8kB,iBAAiB,CAAC9kB,MAAM,CAACR,MAAM,CAAC,CAAC,CAAC;QAC3C;MACJ,CAAC,CAAC;MACF,IAAI,CAACV,gBAAgB,CAAEuO,CAAC,IAAK;QAAE,IAAI+R,EAAE;QAAE,OAAO,CAACA,EAAE,GAAG/R,CAAC,CAACrO,WAAW,MAAM,IAAI,IAAIogB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACW,IAAI,CAAC1S,CAAC,CAAC;MAAE,CAAC,CAAC;IAC1H,CAAC,CAAC;EACN;EACAlN,OAAOA,CAAA,EAAG;IACN,IAAIif,EAAE,EAAEc,EAAE;IACV,OAAOlC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAC7f,YAAY,CAAC,CAAC;MACzB,CAACihB,EAAE,GAAG,IAAI,CAAC2F,cAAc,MAAM,IAAI,IAAI3F,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACW,IAAI,CAAC,IAAI,CAAC;MAC7E,OAAO,CAACG,EAAE,GAAG,IAAI,CAACmE,gBAAgB,MAAM,IAAI,IAAInE,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC/f,OAAO,CAAC,CAAC;IACzF,CAAC,CAAC;EACN;EACA;AACJ;AACA;AACA;AACA;AACA;EACIT,OAAOA,CAAA,EAAG;IACN,IAAI0f,EAAE;IACN,OAAOpB,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAC7f,YAAY,CAAC,CAAC;MACzB,IAAI,CAAC3B,UAAU,CAAC,CAAC;MACjB,IAAI,CAAC8V,eAAe,GAAG,IAAI6B,eAAe,CAAC,CAAC;MAC5C,CAACiL,EAAE,GAAG,IAAI,CAACiF,gBAAgB,MAAM,IAAI,IAAIjF,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAChL,aAAa,CAAC,IAAI,CAAC9B,eAAe,CAACrJ,MAAM,CAAC;IACnH,CAAC,CAAC;EACN;EACAzM,UAAUA,CAAA,EAAG;IACT,IAAI4iB,EAAE;IACN,OAAOpB,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,CAACoB,EAAE,GAAG,IAAI,CAAC9M,eAAe,MAAM,IAAI,IAAI8M,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC/K,KAAK,CAAC,cAAc,CAAC;MACzF,IAAI,CAACyQ,iBAAiB,CAAC;QAAE5mB,SAAS,EAAE;MAAM,CAAC,CAAC;IAChD,CAAC,CAAC;EACN;EACA;AACJ;AACA;EACI8mB,OAAOA,CAAC5C,IAAI,EAAE;IACV,IAAIhD,EAAE;IACN,MAAM6F,YAAY,GAAG;MACjB7C,IAAI;MACJc,cAAc,EAAEzE,yCAAY,CAAC2D,IAAI;IACrC,CAAC;IACD,IAAI,CAAC8B,KAAK,CAAC1d,IAAI,CAACye,YAAY,CAAC;IAC7B;IACA,MAAMjlB,MAAM,GAAG,CAACof,EAAE,GAAG,IAAI,CAACiF,gBAAgB,MAAM,IAAI,IAAIjF,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC5M,UAAU;IAC9F,IAAIxS,MAAM,EAAE;MACRilB,YAAY,CAAC/B,cAAc,CAACnjB,aAAa,CAACC,MAAM,CAACR,MAAM,CAAC,CAAC,CAAC;IAC9D;EACJ;EACA;AACJ;AACA;AACA;EACI0lB,UAAUA,CAAC9C,IAAI,EAAE;IACb,MAAMtI,KAAK,GAAG,IAAI,CAACoK,KAAK,CAACiB,SAAS,CAAElC,CAAC,IAAKA,CAAC,CAACb,IAAI,IAAIA,IAAI,CAAC;IACzD,IAAItI,KAAK,GAAG,CAAC,EAAE;MACXmH,OAAO,CAAC5hB,IAAI,CAAE,yBAAwB+iB,IAAK,2CAA0C,CAAC;MACtF;IACJ;IACA,MAAMgD,WAAW,GAAG,IAAI,CAAClB,KAAK,CAACpK,KAAK,CAAC;IACrC;IACAsL,WAAW,CAAClC,cAAc,CAACzE,iDAAoB,CAAC,CAAC,CAAC;IAClD,IAAI,CAACyF,KAAK,CAACoB,MAAM,CAACxL,KAAK,EAAE,CAAC,CAAC;IAC3B;AACR;AACA;AACA;IACQ,CAAC,IAAI,CAAC2K,0BAA0B,EAAE,IAAI,CAACG,oBAAoB,CAAC,CAAC7P,OAAO,CAAEzC,eAAe,IAAK;MACtF,IAAI,CAACA,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,eAAe,CAACoS,UAAU,CAACtC,IAAI,KAAKA,IAAI,EAAE;QAC7G9P,eAAe,CAAC+O,UAAU,CAAChN,KAAK,CAAC,CAAC;MACtC;IACJ,CAAC,CAAC;EACN;EACApU,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAAC9B,YAAY,CAAC,CAAC,CAACwX,IAAI,CAAC,MAAM;MAAE,IAAIyJ,EAAE;MAAE,OAAO,CAACA,EAAE,GAAG,IAAI,CAACiF,gBAAgB,MAAM,IAAI,IAAIjF,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACnf,iBAAiB,CAAC,CAAC;IAAE,CAAC,CAAC;EAChJ;EACA6T,UAAUA,CAAC6N,WAAW,EAAE;IACpB,OAAO3D,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAC7f,YAAY,CAAC,CAAC;MACzB,OAAO,IAAI,CAACkmB,gBAAgB,CAACvQ,UAAU,CAAC6N,WAAW,CAAC;IACxD,CAAC,CAAC;EACN;EACAvT,gBAAgBA,CAAA,EAAG;IACf,OAAO4P,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAC7f,YAAY,CAAC,CAAC;MACzB,OAAO,IAAI,CAACkmB,gBAAgB,CAACjW,gBAAgB,CAAC,CAAC;IACnD,CAAC,CAAC;EACN;EACAwF,kBAAkBA,CAAA,EAAG;IACjB,OAAOoK,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAChD,MAAM,IAAI,CAAC7f,YAAY,CAAC,CAAC;MACzB,OAAO,IAAI,CAACkmB,gBAAgB,CAACzQ,kBAAkB,CAAC,CAAC;IACrD,CAAC,CAAC;EACN;EACA;AACJ;AACA;AACA;EACIkR,iBAAiBA,CAAC9kB,MAAM,EAAE;IACtB,IAAI,CAACwS,UAAU,GAAG,IAAIR,yEAAU,CAAChS,MAAM,CAAC;IACxC,IAAI,CAACkkB,KAAK,CAACnP,OAAO,CAAEkO,CAAC,IAAKA,CAAC,CAACC,cAAc,CAACnjB,aAAa,CAACC,MAAM,CAAC,CAAC;EACrE;EACA;AACJ;AACA;AACA;EACIulB,sBAAsBA,CAACvlB,MAAM,EAAE;IAC3B,IAAI,CAAC,IAAI,CAACqkB,gBAAgB,EAAE;MACxBpD,OAAO,CAAC5hB,IAAI,CAAC,2CAA2C,CAAC;IAC7D;IACA;IACA,IAAI,CAACglB,gBAAgB,CAAC7R,UAAU,GAAG,IAAIR,yEAAU,CAAChS,MAAM,CAAC;IACzD,IAAI,CAAC8kB,iBAAiB,CAAC9kB,MAAM,CAAC;EAClC;AACJ;AACA;;;;;;;;;;;;;;;;AClPmC;AAC0D;AAC9D;AAC/B,MAAMwlB,KAAK,GAAGC,IAAI;AAClBjqB,4DAAkB,CAAC,CAAC;AACpB,MAAMmqB,wBAAwB,GAAG,IAAI1B,+EAAwB,CAAC,CAAC;AAC/DuB,KAAK,CAACI,SAAS,GAAG,UAAU1e,KAAK,EAAE;EAC/B,MAAMkb,IAAI,GAAGlb,KAAK,CAACgd,KAAK,CAAC,CAAC,CAAC;EAC3B;AACJ;AACA;AACA;EACI9B,IAAI,CAAClZ,gBAAgB,CAAC,SAAS,EAAGhC,KAAK,IAAK;IACxC,MAAM2e,OAAO,GAAG3e,KAAK,CAACgE,IAAI;IAC1B,IAAI,CAAC2a,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAAC3e,KAAK,KAAK8c,4EAAqB,CAAC8B,YAAY,EAAE;MACzG7E,OAAO,CAACmC,GAAG,CAAC,yBAAyB,EAAEhB,IAAI,CAAC;MAC5CuD,wBAAwB,CAACT,UAAU,CAAC9C,IAAI,CAAC;IAC7C;EACJ,CAAC,CAAC;EACF3D,2CAAc,CAACkH,wBAAwB,EAAEvD,IAAI,CAAC;EAC9CuD,wBAAwB,CAACX,OAAO,CAAC5C,IAAI,CAAC;AAC1C,CAAC;AACD;;;;;;;;;;ACtBAzG,MAAM,CAACC,OAAO,GAAG,CAAC,CAAC;;;;;;;;;;;ACAN;;AACb;AAEA,IAAIoK,SAAS,GAAGtK,mBAAO,CAAC,oEAAe,CAAC;AAExC,IAAI3J,YAAY,GAAG,SAAAA,CAAShC,QAAQ,EAAE;EACpC;EACA,IAAIkW,SAAS;IAAEC,mBAAmB,GAAG,KAAK;EAC1C,OAAO,IAAI/E,cAAc,CAAC;IACxBC,KAAK,EAAE,SAAAA,CAASC,UAAU,EAAE;MAC1B,IAAIzK,MAAM,GAAG7G,QAAQ,CAAC8G,SAAS,CAAC,CAAC;MACjCoP,SAAS,GAAGrP,MAAM;MAClB,IAAIuP,OAAO,GAAG,IAAIC,WAAW,CAAC,CAAC;MAC/B,IAAIC,QAAQ,GAAG,EAAE;MAEjBzP,MAAM,CAACE,IAAI,CAAC,CAAC,CAACnB,IAAI,CAAC,SAAS2Q,aAAaA,CAAC1kB,MAAM,EAAE;QAChD,IAAIA,MAAM,CAACqF,IAAI,EAAE;UACf,IAAIif,mBAAmB,EAAE;YACvB;YACA;UACF;UAEAG,QAAQ,GAAGA,QAAQ,CAACE,IAAI,CAAC,CAAC;UAC1B,IAAIF,QAAQ,CAACvlB,MAAM,KAAK,CAAC,EAAE;YACzB,IAAI;cACF,IAAI0lB,MAAM,GAAGlnB,IAAI,CAAC6L,KAAK,CAACkb,QAAQ,CAAC;cACjChF,UAAU,CAACE,OAAO,CAACiF,MAAM,CAAC;YAC5B,CAAC,CAAC,OAAMtM,CAAC,EAAE;cACTmH,UAAU,CAACvb,KAAK,CAACoU,CAAC,CAAC;cACnB;YACF;UACF;UACAmH,UAAU,CAAChgB,KAAK,CAAC,CAAC;UAClB;QACF;QAEA,IAAI6J,IAAI,GAAGib,OAAO,CAACM,MAAM,CAAC7kB,MAAM,CAACuF,KAAK,EAAE;UAACwP,MAAM,EAAE;QAAI,CAAC,CAAC;QACvD0P,QAAQ,IAAInb,IAAI;QAChB,IAAIwb,KAAK,GAAGL,QAAQ,CAACM,KAAK,CAAC,IAAI,CAAC;QAChC,KAAI,IAAI9L,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6L,KAAK,CAAC5lB,MAAM,GAAG,CAAC,EAAE,EAAE+Z,CAAC,EAAE;UACxC,IAAIxN,CAAC,GAAGqZ,KAAK,CAAC7L,CAAC,CAAC,CAAC0L,IAAI,CAAC,CAAC;UACvB,IAAIlZ,CAAC,CAACvM,MAAM,GAAG,CAAC,EAAE;YAChB,IAAI;cACF,IAAI8lB,SAAS,GAAGtnB,IAAI,CAAC6L,KAAK,CAACkC,CAAC,CAAC;cAC7BgU,UAAU,CAACE,OAAO,CAACqF,SAAS,CAAC;YAC/B,CAAC,CAAC,OAAM1M,CAAC,EAAE;cACTmH,UAAU,CAACvb,KAAK,CAACoU,CAAC,CAAC;cACnBgM,mBAAmB,GAAG,IAAI;cAC1BtP,MAAM,CAACiQ,MAAM,CAAC,CAAC;cACf;YACF;UACF;QACF;QACAR,QAAQ,GAAGK,KAAK,CAACA,KAAK,CAAC5lB,MAAM,GAAC,CAAC,CAAC;QAEhC,OAAO8V,MAAM,CAACE,IAAI,CAAC,CAAC,CAACnB,IAAI,CAAC2Q,aAAa,CAAC;MAC1C,CAAC,CAAC;IAEJ,CAAC;IACDO,MAAM,EAAE,SAAAA,CAASC,MAAM,EAAE;MACvB7F,OAAO,CAACmC,GAAG,CAAC,2BAA2B,EAAE0D,MAAM,CAAC;MAChDZ,mBAAmB,GAAG,IAAI;MAC1BD,SAAS,CAACY,MAAM,CAAC,CAAC;IACpB;EACF,CAAC,CAAC;AACJ,CAAC;AAEDlL,MAAM,CAACC,OAAO,GAAGoK,SAAS,CAACjU,YAAY,GAAGA,YAAY;;;;;;;;;;;ACnEzC;;AACbhG,8CAA6C;EAAE5E,KAAK,EAAE;AAAK,CAAC,EAAC;AAC7D,MAAM6f,gBAAgB,GAAGtL,mBAAO,CAAC,6EAAkB,CAAC;AACpDE,qBAAqB,GAAGoL,gBAAgB,CAACzrB,aAAa;AACtD,SAAS0rB,SAASA,CAAC/f,KAAK,EAAEjK,OAAO,EAAEiqB,SAAS,EAAE;EAC1C,OAAO,IAAIF,gBAAgB,CAACzrB,aAAa,CAAC,CAAC;IAAEiL;EAAK,CAAC,KAAK;IACpD,IAAI,CAAC0C,gBAAgB,CAAChC,KAAK,EAAEV,IAAI,EAAEvJ,OAAO,CAAC;IAC3C,OAAO,MAAM,IAAI,CAACkqB,mBAAmB,CAACjgB,KAAK,EAAEV,IAAI,EAAEvJ,OAAO,CAAC;EAC/D,CAAC,EAAEiqB,SAAS,CAAC;AACjB;AACAtL,iBAAiB,GAAGqL,SAAS;AAC7BrL,kBAAe,GAAGoL,gBAAgB,CAACzrB,aAAa;;;;;;;;;;;ACXnC;;AACbwQ,8CAA6C;EAAE5E,KAAK,EAAE;AAAK,CAAC,EAAC;AAC7D,MAAMkgB,UAAU,CAAC;EACbzpB,WAAWA,CAAA,EAAG;IACV,IAAI,CAAC0pB,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,aAAa,GAAG,CAAC,CAAC;IACvB,IAAI,CAACC,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACC,SAAS,GAAG,KAAK;EAC1B;EACAlhB,IAAIA,CAACW,KAAK,EAAE;IACR,IAAI,IAAI,CAACugB,SAAS,EACd;IACJ,MAAMC,UAAU,GAAG;MAAExgB,KAAK;MAAEF,IAAI,EAAE;IAAM,CAAC;IACzC,IAAI,IAAI,CAACqgB,SAAS,CAACxmB,MAAM,EAAE;MACvB,MAAM8mB,WAAW,GAAG,IAAI,CAACN,SAAS,CAACO,KAAK,CAAC,CAAC;MAC1C,IAAID,WAAW,EACXA,WAAW,CAAC3U,OAAO,CAAC0U,UAAU,CAAC;IACvC,CAAC,MACI;MACD,IAAI,CAACJ,SAAS,CAAC/gB,IAAI,CAACwM,OAAO,CAACC,OAAO,CAAC0U,UAAU,CAAC,CAAC;MAChD,IAAI,IAAI,CAACG,aAAa,KAAKhqB,SAAS,IAChC,IAAI,CAACypB,SAAS,CAACzmB,MAAM,IAAI,IAAI,CAACgnB,aAAa,IAC3C,CAAC,IAAI,CAACL,QAAQ,EAAE;QAChB,IAAI,CAACA,QAAQ,GAAG,IAAI;QACpB,IAAI,IAAI,CAACD,aAAa,CAACO,SAAS,EAAE;UAC9B,IAAI,CAACP,aAAa,CAACO,SAAS,CAAC,CAAC;QAClC,CAAC,MACI,IAAI9G,OAAO,EAAE;UACdA,OAAO,CAAC5hB,IAAI,CAAE,+BAA8B,IAAI,CAACkoB,SAAS,CAACzmB,MAAO,QAAO,CAAC;QAC9E;MACJ;IACJ;EACJ;EACAsI,IAAIA,CAAA,EAAG;IACH,IAAI,IAAI,CAACse,SAAS,EACd;IACJ,IAAI,CAACA,SAAS,GAAG,IAAI;IACrB,IAAI,CAACM,MAAM,CAAC,CAAC;IACb,KAAK,MAAMJ,WAAW,IAAI,IAAI,CAACN,SAAS,EAAE;MACtCM,WAAW,CAAC3U,OAAO,CAAC;QAAE9L,KAAK,EAAErJ,SAAS;QAAEmJ,IAAI,EAAE;MAAK,CAAC,CAAC;IACzD;IACA,IAAI,CAACqgB,SAAS,CAACxmB,MAAM,GAAG,CAAC;EAC7B;EACAqI,IAAIA,CAACrD,KAAK,EAAE;IACR,IAAI,IAAI,CAAC4hB,SAAS,EACd;IACJ,IAAI,CAACA,SAAS,GAAG,IAAI;IACrB,IAAI,CAACM,MAAM,CAAC,CAAC;IACb,IAAI,IAAI,CAACV,SAAS,CAACxmB,MAAM,EAAE;MACvB,KAAK,MAAM8mB,WAAW,IAAI,IAAI,CAACN,SAAS,EAAE;QACtCM,WAAW,CAAC7M,MAAM,CAACjV,KAAK,CAAC;MAC7B;MACA,IAAI,CAACwhB,SAAS,CAACxmB,MAAM,GAAG,CAAC;IAC7B,CAAC,MACI;MACD,MAAMmnB,SAAS,GAAGjV,OAAO,CAAC+H,MAAM,CAACjV,KAAK,CAAC;MACvC;MACAmiB,SAAS,CAACC,KAAK,CAAC,MAAM,CAAE,CAAC,CAAC;MAC1B,IAAI,CAACX,SAAS,CAAC/gB,IAAI,CAACyhB,SAAS,CAAC;IAClC;EACJ;EACAD,MAAMA,CAAA,EAAG;IACLhV,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC0C,IAAI,CAAC,MAAM;MACzB,IAAI,IAAI,CAACwS,cAAc,EACnB,IAAI,CAACA,cAAc,CAAC,CAAC;IAC7B,CAAC,CAAC;EACN;EACA,CAACC,MAAM,CAACC,aAAa,IAAI;IACrB,OAAO;MACHrhB,IAAI,EAAGG,KAAK,IAAK;QACb,MAAMvF,MAAM,GAAG,IAAI,CAAC2lB,SAAS,CAACM,KAAK,CAAC,CAAC;QACrC,IAAIjmB,MAAM,EAAE;UACR,IAAI,IAAI,CAAC0mB,YAAY,KAAKxqB,SAAS,IAC/B,IAAI,CAACypB,SAAS,CAACzmB,MAAM,IAAI,IAAI,CAACwnB,YAAY,IAC1C,IAAI,CAACb,QAAQ,EAAE;YACf,IAAI,CAACA,QAAQ,GAAG,KAAK;YACrB,IAAI,IAAI,CAACD,aAAa,CAACe,QAAQ,EAAE;cAC7B,IAAI,CAACf,aAAa,CAACe,QAAQ,CAAC,CAAC;YACjC;UACJ;UACA,OAAO3mB,MAAM;QACjB,CAAC,MACI,IAAI,IAAI,CAAC8lB,SAAS,EAAE;UACrB,OAAO1U,OAAO,CAACC,OAAO,CAAC;YAAE9L,KAAK,EAAErJ,SAAS;YAAEmJ,IAAI,EAAE;UAAK,CAAC,CAAC;QAC5D,CAAC,MACI;UACD,OAAO,IAAI+L,OAAO,CAAC,CAACC,OAAO,EAAE8H,MAAM,KAAK;YACpC,IAAI,CAACuM,SAAS,CAAC9gB,IAAI,CAAC;cAAEyM,OAAO;cAAE8H;YAAO,CAAC,CAAC;UAC5C,CAAC,CAAC;QACN;MACJ,CAAC;MACD1T,MAAM,EAAEA,CAAA,KAAM;QACV,IAAI,CAACqgB,SAAS,GAAG,IAAI;QACrB,IAAI,CAACH,SAAS,CAACzmB,MAAM,GAAG,CAAC;QACzB,IAAI,CAACknB,MAAM,CAAC,CAAC;QACb,OAAOhV,OAAO,CAACC,OAAO,CAAC;UAAE9L,KAAK,EAAErJ,SAAS;UAAEmJ,IAAI,EAAE;QAAK,CAAC,CAAC;MAC5D;IACJ,CAAC;EACL;AACJ;AACA,MAAM1L,aAAa,CAAC;EAChBqC,WAAWA,CAAC4qB,MAAM,EAAE;IAAEV,aAAa,GAAG,GAAG;IAAEQ,YAAY,GAAG;EAAE,CAAC,GAAG,CAAC,CAAC,EAAE;IAChE,MAAMG,KAAK,GAAG,IAAIpB,UAAU,CAAC,CAAC;IAC9BoB,KAAK,CAACX,aAAa,GAAGA,aAAa;IACnCW,KAAK,CAACH,YAAY,GAAGA,YAAY;IACjCG,KAAK,CAACN,cAAc,GAChBK,MAAM,CAAC;MACHhiB,IAAI,EAAEW,KAAK,IAAIshB,KAAK,CAACjiB,IAAI,CAACW,KAAK,CAAC;MAChCiC,IAAI,EAAEA,CAAA,KAAMqf,KAAK,CAACrf,IAAI,CAAC,CAAC;MACxBD,IAAI,EAAErD,KAAK,IAAI2iB,KAAK,CAACtf,IAAI,CAACrD,KAAK,CAAC;MAChC4iB,EAAE,EAAEA,CAACxhB,KAAK,EAAEiZ,EAAE,KAAK;QACfsI,KAAK,CAACjB,aAAa,CAACtgB,KAAK,CAAC,GAAGiZ,EAAE;MACnC;IACJ,CAAC,CAAC,KAAK,MAAM,CAAE,CAAC,CAAC;IACrB,IAAI,CAACiI,MAAM,CAACC,aAAa,CAAC,GAAG,MAAMI,KAAK,CAACL,MAAM,CAACC,aAAa,CAAC,CAAC,CAAC;IAChEtc,MAAM,CAAC4c,MAAM,CAAC,IAAI,CAAC;EACvB;AACJ;AACA/M,qBAAqB,GAAGrgB,aAAa;AACrCqgB,kBAAe,GAAGrgB,aAAa;;;;;;;;;;ACxH/B;AACA;AACA;AACA;AACA;AACC,WAAUqtB,MAAM,EAAE;EAClB,YAAY;;EAEZ;EACA,IAAIptB,MAAM,GAAG,CAAE,CAAC;;EAEhB;EACAA,MAAM,CAACqtB,OAAO,GAAG,OAAO;;EAExB;EACA,IAAIC,UAAU;;EAEd;EACA,IAAIC,0BAA0B,GAAG,CAAC,CAAC;;EAEnC;EACA,IAAIzM,IAAI,GAAG,SAAAA,CAAS0M,KAAK,EAAEC,IAAI,EAAE;IAChC,OAAO,YAAW;MACjB,OAAOA,IAAI,CAAC9nB,KAAK,CAAC6nB,KAAK,EAAE5nB,SAAS,CAAC;IACpC,CAAC;EACF,CAAC;;EAED;EACA,IAAI8nB,KAAK,GAAG,SAAAA,CAAA,EAAY;IACvB,IAAIC,IAAI,GAAG/nB,SAAS;MAAEgoB,MAAM,GAAGD,IAAI,CAAC,CAAC,CAAC;MAAE5V,GAAG;MAAEsH,CAAC;IAC9C,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsO,IAAI,CAACroB,MAAM,EAAE+Z,CAAC,EAAE,EAAE;MACjC,KAAKtH,GAAG,IAAI4V,IAAI,CAACtO,CAAC,CAAC,EAAE;QACpB,IAAI,EAAEtH,GAAG,IAAI6V,MAAM,CAAC,IAAID,IAAI,CAACtO,CAAC,CAAC,CAACwO,cAAc,CAAC9V,GAAG,CAAC,EAAE;UACpD6V,MAAM,CAAC7V,GAAG,CAAC,GAAG4V,IAAI,CAACtO,CAAC,CAAC,CAACtH,GAAG,CAAC;QAC3B;MACD;IACD;IACA,OAAO6V,MAAM;EACd,CAAC;;EAED;EACA,IAAIE,cAAc,GAAG,SAAAA,CAASniB,KAAK,EAAElG,IAAI,EAAE;IAC1C,OAAO;MAAEkG,KAAK,EAAEA,KAAK;MAAElG,IAAI,EAAEA;IAAK,CAAC;EACpC,CAAC;;EAED;EACAzF,MAAM,CAACgnB,KAAK,GAAG8G,cAAc,CAAC,CAAC,EAAE,OAAO,CAAC;EACzC9tB,MAAM,CAACinB,KAAK,GAAG6G,cAAc,CAAC,CAAC,EAAE,OAAO,CAAC;EACzC9tB,MAAM,CAACknB,IAAI,GAAG4G,cAAc,CAAC,CAAC,EAAE,MAAM,CAAC;EACvC9tB,MAAM,CAACmnB,IAAI,GAAG2G,cAAc,CAAC,CAAC,EAAE,MAAM,CAAC;EACvC9tB,MAAM,CAAConB,IAAI,GAAG0G,cAAc,CAAC,CAAC,EAAE,MAAM,CAAC;EACvC9tB,MAAM,CAACqnB,KAAK,GAAGyG,cAAc,CAAC,CAAC,EAAE,OAAO,CAAC;EACzC9tB,MAAM,CAACsnB,GAAG,GAAGwG,cAAc,CAAC,EAAE,EAAE,KAAK,CAAC;;EAEtC;EACA;EACA,IAAIC,gBAAgB,GAAG,SAAAA,CAASC,cAAc,EAAE;IAC/C,IAAI,CAACC,OAAO,GAAGD,cAAc;IAC7B,IAAI,CAAC/F,QAAQ,CAAC+F,cAAc,CAACE,WAAW,CAAC;IACzC,IAAI,CAACtG,GAAG,GAAG,IAAI,CAACD,IAAI,CAAC,CAAE;EACxB,CAAC;EAEDoG,gBAAgB,CAACI,SAAS,GAAG;IAC5B;IACAlG,QAAQ,EAAE,SAAAA,CAAUmG,QAAQ,EAAE;MAC7B;MACA,IAAIA,QAAQ,IAAI,OAAO,IAAIA,QAAQ,EAAE;QACpC,IAAI,CAACH,OAAO,CAACC,WAAW,GAAGE,QAAQ;MACpC;IACD,CAAC;IAED;IACAjG,QAAQ,EAAE,SAAAA,CAAA,EAAY;MACrB,OAAO,IAAI,CAAC8F,OAAO,CAACC,WAAW;IAChC,CAAC;IAED;IACA9F,UAAU,EAAE,SAAAA,CAAUiG,GAAG,EAAE;MAC1B,IAAIH,WAAW,GAAG,IAAI,CAACD,OAAO,CAACC,WAAW;MAC1C,OAAOG,GAAG,CAAC1iB,KAAK,IAAIuiB,WAAW,CAACviB,KAAK;IACtC,CAAC;IAED4b,KAAK,EAAE,SAAAA,CAAA,EAAY;MAClB,IAAI,CAAC+G,MAAM,CAACtuB,MAAM,CAACgnB,KAAK,EAAEphB,SAAS,CAAC;IACrC,CAAC;IAEDyM,KAAK,EAAE,SAAAA,CAAA,EAAY;MAClB,IAAI,CAACic,MAAM,CAACtuB,MAAM,CAACinB,KAAK,EAAErhB,SAAS,CAAC;IACrC,CAAC;IAED+hB,IAAI,EAAE,SAAAA,CAAA,EAAY;MACjB,IAAI,CAAC2G,MAAM,CAACtuB,MAAM,CAACknB,IAAI,EAAEthB,SAAS,CAAC;IACpC,CAAC;IAED/B,IAAI,EAAE,SAAAA,CAAA,EAAY;MACjB,IAAI,CAACyqB,MAAM,CAACtuB,MAAM,CAAConB,IAAI,EAAExhB,SAAS,CAAC;IACpC,CAAC;IAED0E,KAAK,EAAE,SAAAA,CAAA,EAAY;MAClB,IAAI,CAACgkB,MAAM,CAACtuB,MAAM,CAACqnB,KAAK,EAAEzhB,SAAS,CAAC;IACrC,CAAC;IAEDkiB,IAAI,EAAE,SAAAA,CAAUC,KAAK,EAAE;MACtB,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,CAACziB,MAAM,GAAG,CAAC,EAAE;QAClD,IAAI,CAACgpB,MAAM,CAACtuB,MAAM,CAACmnB,IAAI,EAAE,CAAEY,KAAK,EAAE,OAAO,CAAE,CAAC;MAC7C;IACD,CAAC;IAEDC,OAAO,EAAE,SAAAA,CAAUD,KAAK,EAAE;MACzB,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,CAACziB,MAAM,GAAG,CAAC,EAAE;QAClD,IAAI,CAACgpB,MAAM,CAACtuB,MAAM,CAACmnB,IAAI,EAAE,CAAEY,KAAK,EAAE,KAAK,CAAE,CAAC;MAC3C;IACD,CAAC;IAED;IACAuG,MAAM,EAAE,SAAAA,CAAUpG,KAAK,EAAEqG,OAAO,EAAE;MACjC,IAAIjB,UAAU,IAAI,IAAI,CAAClF,UAAU,CAACF,KAAK,CAAC,EAAE;QACzCoF,UAAU,CAACiB,OAAO,EAAEb,KAAK,CAAC;UAAExF,KAAK,EAAEA;QAAM,CAAC,EAAE,IAAI,CAAC+F,OAAO,CAAC,CAAC;MAC3D;IACD;EACD,CAAC;;EAED;EACA,IAAIO,YAAY,GAAG,IAAIT,gBAAgB,CAAC;IAAEG,WAAW,EAAEluB,MAAM,CAACsnB;EAAI,CAAC,CAAC;;EAEpE;EACC,aAAW;IACX;IACA,IAAImH,CAAC,GAAGzuB,MAAM;IAEdyuB,CAAC,CAACrG,UAAU,GAAGtH,IAAI,CAAC0N,YAAY,EAAEA,YAAY,CAACpG,UAAU,CAAC;IAC1DqG,CAAC,CAAClH,KAAK,GAAGzG,IAAI,CAAC0N,YAAY,EAAEA,YAAY,CAACjH,KAAK,CAAC;IAChDkH,CAAC,CAACpc,KAAK,GAAGyO,IAAI,CAAC0N,YAAY,EAAEA,YAAY,CAACnc,KAAK,CAAC;IAChDoc,CAAC,CAAC3G,IAAI,GAAGhH,IAAI,CAAC0N,YAAY,EAAEA,YAAY,CAAC1G,IAAI,CAAC;IAC9C2G,CAAC,CAACzG,OAAO,GAAGlH,IAAI,CAAC0N,YAAY,EAAEA,YAAY,CAACxG,OAAO,CAAC;IACpDyG,CAAC,CAAC9G,IAAI,GAAG7G,IAAI,CAAC0N,YAAY,EAAEA,YAAY,CAAC7G,IAAI,CAAC;IAC9C8G,CAAC,CAAC5qB,IAAI,GAAGid,IAAI,CAAC0N,YAAY,EAAEA,YAAY,CAAC3qB,IAAI,CAAC;IAC9C4qB,CAAC,CAACnkB,KAAK,GAAGwW,IAAI,CAAC0N,YAAY,EAAEA,YAAY,CAAClkB,KAAK,CAAC;;IAEhD;IACAmkB,CAAC,CAAC7G,GAAG,GAAG6G,CAAC,CAAC9G,IAAI;EACf,CAAC,EAAC,CAAC;;EAEH;EACA;EACA;EACA3nB,MAAM,CAAC0uB,UAAU,GAAG,UAAUjB,IAAI,EAAE;IACnCH,UAAU,GAAGG,IAAI;EAClB,CAAC;;EAED;EACA;EACAztB,MAAM,CAACioB,QAAQ,GAAG,UAASC,KAAK,EAAE;IACjC;IACAsG,YAAY,CAACvG,QAAQ,CAACC,KAAK,CAAC;;IAE5B;IACA,KAAK,IAAInQ,GAAG,IAAIwV,0BAA0B,EAAE;MAC3C,IAAIA,0BAA0B,CAACM,cAAc,CAAC9V,GAAG,CAAC,EAAE;QACnDwV,0BAA0B,CAACxV,GAAG,CAAC,CAACkQ,QAAQ,CAACC,KAAK,CAAC;MAChD;IACD;EACD,CAAC;;EAED;EACAloB,MAAM,CAACmoB,QAAQ,GAAG,YAAW;IAC5B,OAAOqG,YAAY,CAACrG,QAAQ,CAAC,CAAC;EAC/B,CAAC;;EAED;EACA;EACAnoB,MAAM,CAACqB,GAAG,GAAG,UAAUoE,IAAI,EAAE;IAC5B;IACA,OAAO8nB,0BAA0B,CAAC9nB,IAAI,CAAC,KACrC8nB,0BAA0B,CAAC9nB,IAAI,CAAC,GAAG,IAAIsoB,gBAAgB,CAACL,KAAK,CAAC;MAAEjoB,IAAI,EAAEA;IAAK,CAAC,EAAE+oB,YAAY,CAACP,OAAO,CAAC,CAAC,CAAC;EACxG,CAAC;;EAED;EACA;EACA;EACAjuB,MAAM,CAAC2uB,oBAAoB,GAAG,UAAUltB,OAAO,EAAE;IAChDA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IAEvBA,OAAO,CAACmtB,SAAS,GAAGntB,OAAO,CAACmtB,SAAS,IAAI,SAASC,uBAAuBA,CAACC,QAAQ,EAAEb,OAAO,EAAE;MAC5F;MACA,IAAIA,OAAO,CAACxoB,IAAI,EAAE;QACjBqpB,QAAQ,CAACC,OAAO,CAAC,GAAG,GAAGd,OAAO,CAACxoB,IAAI,GAAG,GAAG,CAAC;MAC3C;IACD,CAAC;;IAED;IACA;IACA,IAAIupB,wBAAwB,GAAG,CAAC,CAAC;;IAEjC;IACA,IAAIC,mBAAmB,GAAG,SAAAA,CAAUC,IAAI,EAAEJ,QAAQ,EAAE;MACnDK,QAAQ,CAAChB,SAAS,CAACxoB,KAAK,CAAC4e,IAAI,CAAC2K,IAAI,EAAEzJ,OAAO,EAAEqJ,QAAQ,CAAC;IACvD,CAAC;;IAED;IACA,IAAI,OAAOrJ,OAAO,KAAK,WAAW,EAAE;MACnC,OAAO,YAAY,CAAE,iBAAkB;IACxC;IAEA,OAAO,UAASqJ,QAAQ,EAAEb,OAAO,EAAE;MAClC;MACAa,QAAQ,GAAGhhB,KAAK,CAACqgB,SAAS,CAACiB,KAAK,CAAC7K,IAAI,CAACuK,QAAQ,CAAC;MAE/C,IAAII,IAAI,GAAGzJ,OAAO,CAACmC,GAAG;MACtB,IAAIyH,UAAU;MAEd,IAAIpB,OAAO,CAAC/F,KAAK,KAAKloB,MAAM,CAACmnB,IAAI,EAAE;QAClCkI,UAAU,GAAG,CAACpB,OAAO,CAACxoB,IAAI,GAAG,GAAG,GAAGwoB,OAAO,CAACxoB,IAAI,GAAG,IAAI,GAAG,EAAE,IAAIqpB,QAAQ,CAAC,CAAC,CAAC;QAE1E,IAAIA,QAAQ,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE;UAC5B,IAAIrJ,OAAO,CAACqC,IAAI,EAAE;YACjBrC,OAAO,CAACqC,IAAI,CAACuH,UAAU,CAAC;UACzB,CAAC,MACI;YACJL,wBAAwB,CAACK,UAAU,CAAC,GAAG,IAAI9Z,IAAI,CAAC,CAAC,CAAC0M,OAAO,CAAC,CAAC;UAC5D;QACD,CAAC,MACI;UACJ,IAAIwD,OAAO,CAACuC,OAAO,EAAE;YACpBvC,OAAO,CAACuC,OAAO,CAACqH,UAAU,CAAC;UAC5B,CAAC,MACI;YACJJ,mBAAmB,CAACC,IAAI,EAAE,CAAEG,UAAU,GAAG,IAAI,IAC3C,IAAI9Z,IAAI,CAAC,CAAC,CAAC0M,OAAO,CAAC,CAAC,GAAG+M,wBAAwB,CAACK,UAAU,CAAC,CAAC,GAAG,IAAI,CAAE,CAAC;UACzE;QACD;MACD,CAAC,MACI;QACJ;QACA,IAAIpB,OAAO,CAAC/F,KAAK,KAAKloB,MAAM,CAAConB,IAAI,IAAI3B,OAAO,CAAC5hB,IAAI,EAAE;UAClDqrB,IAAI,GAAGzJ,OAAO,CAAC5hB,IAAI;QACpB,CAAC,MAAM,IAAIoqB,OAAO,CAAC/F,KAAK,KAAKloB,MAAM,CAACqnB,KAAK,IAAI5B,OAAO,CAACnb,KAAK,EAAE;UAC3D4kB,IAAI,GAAGzJ,OAAO,CAACnb,KAAK;QACrB,CAAC,MAAM,IAAI2jB,OAAO,CAAC/F,KAAK,KAAKloB,MAAM,CAACknB,IAAI,IAAIzB,OAAO,CAACkC,IAAI,EAAE;UACzDuH,IAAI,GAAGzJ,OAAO,CAACkC,IAAI;QACpB,CAAC,MAAM,IAAIsG,OAAO,CAAC/F,KAAK,KAAKloB,MAAM,CAACinB,KAAK,IAAIxB,OAAO,CAACpT,KAAK,EAAE;UAC3D6c,IAAI,GAAGzJ,OAAO,CAACpT,KAAK;QACrB,CAAC,MAAM,IAAI4b,OAAO,CAAC/F,KAAK,KAAKloB,MAAM,CAACgnB,KAAK,IAAIvB,OAAO,CAAC8B,KAAK,EAAE;UAC3D2H,IAAI,GAAGzJ,OAAO,CAAC8B,KAAK;QACrB;QAEA9lB,OAAO,CAACmtB,SAAS,CAACE,QAAQ,EAAEb,OAAO,CAAC;QACpCgB,mBAAmB,CAACC,IAAI,EAAEJ,QAAQ,CAAC;MACpC;IACD,CAAC;EACF,CAAC;;EAED;EACA;EACA9uB,MAAM,CAACkqB,WAAW,GAAG,UAASzoB,OAAO,EAAE;IACtCzB,MAAM,CAACioB,QAAQ,CAACxmB,OAAO,IAAIA,OAAO,CAAC6tB,YAAY,IAAItvB,MAAM,CAACinB,KAAK,CAAC;IAChEjnB,MAAM,CAAC0uB,UAAU,CAAC1uB,MAAM,CAAC2uB,oBAAoB,CAACltB,OAAO,CAAC,CAAC;EACxD,CAAC;;EAED;EACAzB,MAAM,CAACuvB,WAAW,GAAGvvB,MAAM,CAACkqB,WAAW;;EAEvC;EACA,IAAI,IAA0C,EAAE;IAC/CsF,oCAAOxvB,MAAM;AAAA;AAAA;AAAA;AAAA,kGAAC;EACf,CAAC,MACI,EAYJ;AACF,CAAC,EAAC,IAAI,CAAC;;;;;;;;;;ACvRP,IAAI4vB,IAAI,GAAG1P,mBAAO,CAAC,+CAAS,CAAC;;AAE7B;AACA,IAAI0M,MAAM,GAAGgD,IAAI,CAAChD,MAAM;AAExBzM,MAAM,CAACC,OAAO,GAAGwM,MAAM;;;;;;;;;;ACLvB,IAAIA,MAAM,GAAG1M,mBAAO,CAAC,mDAAW,CAAC;EAC7B2P,SAAS,GAAG3P,mBAAO,CAAC,yDAAc,CAAC;EACnC4P,cAAc,GAAG5P,mBAAO,CAAC,mEAAmB,CAAC;;AAEjD;AACA,IAAI6P,OAAO,GAAG,eAAe;EACzBC,YAAY,GAAG,oBAAoB;;AAEvC;AACA,IAAIC,cAAc,GAAGrD,MAAM,GAAGA,MAAM,CAACsD,WAAW,GAAG5tB,SAAS;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS6tB,UAAUA,CAACxkB,KAAK,EAAE;EACzB,IAAIA,KAAK,IAAI,IAAI,EAAE;IACjB,OAAOA,KAAK,KAAKrJ,SAAS,GAAG0tB,YAAY,GAAGD,OAAO;EACrD;EACA,OAAQE,cAAc,IAAIA,cAAc,IAAI1f,MAAM,CAAC5E,KAAK,CAAC,GACrDkkB,SAAS,CAAClkB,KAAK,CAAC,GAChBmkB,cAAc,CAACnkB,KAAK,CAAC;AAC3B;AAEAwU,MAAM,CAACC,OAAO,GAAG+P,UAAU;;;;;;;;;;AC3B3B,IAAIC,eAAe,GAAGlQ,mBAAO,CAAC,qEAAoB,CAAC;;AAEnD;AACA,IAAImQ,WAAW,GAAG,MAAM;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAACC,MAAM,EAAE;EACxB,OAAOA,MAAM,GACTA,MAAM,CAACnB,KAAK,CAAC,CAAC,EAAEgB,eAAe,CAACG,MAAM,CAAC,GAAG,CAAC,CAAC,CAAChkB,OAAO,CAAC8jB,WAAW,EAAE,EAAE,CAAC,GACrEE,MAAM;AACZ;AAEApQ,MAAM,CAACC,OAAO,GAAGkQ,QAAQ;;;;;;;;;;AClBzB;AACA,IAAIE,UAAU,GAAG,OAAOpD,MAAM,IAAI,QAAQ,IAAIA,MAAM,IAAIA,MAAM,CAAC7c,MAAM,KAAKA,MAAM,IAAI6c,MAAM;AAE1FjN,MAAM,CAACC,OAAO,GAAGoQ,UAAU;;;;;;;;;;ACH3B,IAAI5D,MAAM,GAAG1M,mBAAO,CAAC,mDAAW,CAAC;;AAEjC;AACA,IAAIuQ,WAAW,GAAGlgB,MAAM,CAAC4d,SAAS;;AAElC;AACA,IAAIN,cAAc,GAAG4C,WAAW,CAAC5C,cAAc;;AAE/C;AACA;AACA;AACA;AACA;AACA,IAAI6C,oBAAoB,GAAGD,WAAW,CAACrU,QAAQ;;AAE/C;AACA,IAAI6T,cAAc,GAAGrD,MAAM,GAAGA,MAAM,CAACsD,WAAW,GAAG5tB,SAAS;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASutB,SAASA,CAAClkB,KAAK,EAAE;EACxB,IAAIglB,KAAK,GAAG9C,cAAc,CAACtJ,IAAI,CAAC5Y,KAAK,EAAEskB,cAAc,CAAC;IAClDW,GAAG,GAAGjlB,KAAK,CAACskB,cAAc,CAAC;EAE/B,IAAI;IACFtkB,KAAK,CAACskB,cAAc,CAAC,GAAG3tB,SAAS;IACjC,IAAIuuB,QAAQ,GAAG,IAAI;EACrB,CAAC,CAAC,OAAOnS,CAAC,EAAE,CAAC;EAEb,IAAItY,MAAM,GAAGsqB,oBAAoB,CAACnM,IAAI,CAAC5Y,KAAK,CAAC;EAC7C,IAAIklB,QAAQ,EAAE;IACZ,IAAIF,KAAK,EAAE;MACThlB,KAAK,CAACskB,cAAc,CAAC,GAAGW,GAAG;IAC7B,CAAC,MAAM;MACL,OAAOjlB,KAAK,CAACskB,cAAc,CAAC;IAC9B;EACF;EACA,OAAO7pB,MAAM;AACf;AAEA+Z,MAAM,CAACC,OAAO,GAAGyP,SAAS;;;;;;;;;;AC7C1B;AACA,IAAIY,WAAW,GAAGlgB,MAAM,CAAC4d,SAAS;;AAElC;AACA;AACA;AACA;AACA;AACA,IAAIuC,oBAAoB,GAAGD,WAAW,CAACrU,QAAQ;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS0T,cAAcA,CAACnkB,KAAK,EAAE;EAC7B,OAAO+kB,oBAAoB,CAACnM,IAAI,CAAC5Y,KAAK,CAAC;AACzC;AAEAwU,MAAM,CAACC,OAAO,GAAG0P,cAAc;;;;;;;;;;ACrB/B,IAAIU,UAAU,GAAGtQ,mBAAO,CAAC,2DAAe,CAAC;;AAEzC;AACA,IAAI4Q,QAAQ,GAAG,OAAO7G,IAAI,IAAI,QAAQ,IAAIA,IAAI,IAAIA,IAAI,CAAC1Z,MAAM,KAAKA,MAAM,IAAI0Z,IAAI;;AAEhF;AACA,IAAI2F,IAAI,GAAGY,UAAU,IAAIM,QAAQ,IAAI3B,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;AAE9DhP,MAAM,CAACC,OAAO,GAAGwP,IAAI;;;;;;;;;;ACRrB;AACA,IAAImB,YAAY,GAAG,IAAI;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASX,eAAeA,CAACG,MAAM,EAAE;EAC/B,IAAIjS,KAAK,GAAGiS,MAAM,CAACjrB,MAAM;EAEzB,OAAOgZ,KAAK,EAAE,IAAIyS,YAAY,CAAC5S,IAAI,CAACoS,MAAM,CAACS,MAAM,CAAC1S,KAAK,CAAC,CAAC,EAAE,CAAC;EAC5D,OAAOA,KAAK;AACd;AAEA6B,MAAM,CAACC,OAAO,GAAGgQ,eAAe;;;;;;;;;;AClBhC,IAAIa,QAAQ,GAAG/Q,mBAAO,CAAC,qDAAY,CAAC;EAChCgR,GAAG,GAAGhR,mBAAO,CAAC,2CAAO,CAAC;EACtBiR,QAAQ,GAAGjR,mBAAO,CAAC,qDAAY,CAAC;;AAEpC;AACA,IAAIkR,eAAe,GAAG,qBAAqB;;AAE3C;AACA,IAAIC,SAAS,GAAG/P,IAAI,CAACgQ,GAAG;EACpBC,SAAS,GAAGjQ,IAAI,CAACkQ,GAAG;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAAChE,IAAI,EAAEiE,IAAI,EAAEjwB,OAAO,EAAE;EACrC,IAAIkwB,QAAQ;IACRC,QAAQ;IACRC,OAAO;IACPzrB,MAAM;IACN0rB,OAAO;IACPC,YAAY;IACZC,cAAc,GAAG,CAAC;IAClB/kB,OAAO,GAAG,KAAK;IACfglB,MAAM,GAAG,KAAK;IACd/kB,QAAQ,GAAG,IAAI;EAEnB,IAAI,OAAOugB,IAAI,IAAI,UAAU,EAAE;IAC7B,MAAM,IAAIyE,SAAS,CAACd,eAAe,CAAC;EACtC;EACAM,IAAI,GAAGP,QAAQ,CAACO,IAAI,CAAC,IAAI,CAAC;EAC1B,IAAIT,QAAQ,CAACxvB,OAAO,CAAC,EAAE;IACrBwL,OAAO,GAAG,CAAC,CAACxL,OAAO,CAACwL,OAAO;IAC3BglB,MAAM,GAAG,SAAS,IAAIxwB,OAAO;IAC7BowB,OAAO,GAAGI,MAAM,GAAGZ,SAAS,CAACF,QAAQ,CAAC1vB,OAAO,CAACowB,OAAO,CAAC,IAAI,CAAC,EAAEH,IAAI,CAAC,GAAGG,OAAO;IAC5E3kB,QAAQ,GAAG,UAAU,IAAIzL,OAAO,GAAG,CAAC,CAACA,OAAO,CAACyL,QAAQ,GAAGA,QAAQ;EAClE;EAEA,SAASilB,UAAUA,CAACrK,IAAI,EAAE;IACxB,IAAI6F,IAAI,GAAGgE,QAAQ;MACflP,OAAO,GAAGmP,QAAQ;IAEtBD,QAAQ,GAAGC,QAAQ,GAAGtvB,SAAS;IAC/B0vB,cAAc,GAAGlK,IAAI;IACrB1hB,MAAM,GAAGqnB,IAAI,CAAC9nB,KAAK,CAAC8c,OAAO,EAAEkL,IAAI,CAAC;IAClC,OAAOvnB,MAAM;EACf;EAEA,SAASgsB,WAAWA,CAACtK,IAAI,EAAE;IACzB;IACAkK,cAAc,GAAGlK,IAAI;IACrB;IACAgK,OAAO,GAAGvX,UAAU,CAAC8X,YAAY,EAAEX,IAAI,CAAC;IACxC;IACA,OAAOzkB,OAAO,GAAGklB,UAAU,CAACrK,IAAI,CAAC,GAAG1hB,MAAM;EAC5C;EAEA,SAASksB,aAAaA,CAACxK,IAAI,EAAE;IAC3B,IAAIyK,iBAAiB,GAAGzK,IAAI,GAAGiK,YAAY;MACvCS,mBAAmB,GAAG1K,IAAI,GAAGkK,cAAc;MAC3CS,WAAW,GAAGf,IAAI,GAAGa,iBAAiB;IAE1C,OAAON,MAAM,GACTV,SAAS,CAACkB,WAAW,EAAEZ,OAAO,GAAGW,mBAAmB,CAAC,GACrDC,WAAW;EACjB;EAEA,SAASC,YAAYA,CAAC5K,IAAI,EAAE;IAC1B,IAAIyK,iBAAiB,GAAGzK,IAAI,GAAGiK,YAAY;MACvCS,mBAAmB,GAAG1K,IAAI,GAAGkK,cAAc;;IAE/C;IACA;IACA;IACA,OAAQD,YAAY,KAAKzvB,SAAS,IAAKiwB,iBAAiB,IAAIb,IAAK,IAC9Da,iBAAiB,GAAG,CAAE,IAAKN,MAAM,IAAIO,mBAAmB,IAAIX,OAAQ;EACzE;EAEA,SAASQ,YAAYA,CAAA,EAAG;IACtB,IAAIvK,IAAI,GAAGoJ,GAAG,CAAC,CAAC;IAChB,IAAIwB,YAAY,CAAC5K,IAAI,CAAC,EAAE;MACtB,OAAO6K,YAAY,CAAC7K,IAAI,CAAC;IAC3B;IACA;IACAgK,OAAO,GAAGvX,UAAU,CAAC8X,YAAY,EAAEC,aAAa,CAACxK,IAAI,CAAC,CAAC;EACzD;EAEA,SAAS6K,YAAYA,CAAC7K,IAAI,EAAE;IAC1BgK,OAAO,GAAGxvB,SAAS;;IAEnB;IACA;IACA,IAAI4K,QAAQ,IAAIykB,QAAQ,EAAE;MACxB,OAAOQ,UAAU,CAACrK,IAAI,CAAC;IACzB;IACA6J,QAAQ,GAAGC,QAAQ,GAAGtvB,SAAS;IAC/B,OAAO8D,MAAM;EACf;EAEA,SAASilB,MAAMA,CAAA,EAAG;IAChB,IAAIyG,OAAO,KAAKxvB,SAAS,EAAE;MACzBsd,YAAY,CAACkS,OAAO,CAAC;IACvB;IACAE,cAAc,GAAG,CAAC;IAClBL,QAAQ,GAAGI,YAAY,GAAGH,QAAQ,GAAGE,OAAO,GAAGxvB,SAAS;EAC1D;EAEA,SAASswB,KAAKA,CAAA,EAAG;IACf,OAAOd,OAAO,KAAKxvB,SAAS,GAAG8D,MAAM,GAAGusB,YAAY,CAACzB,GAAG,CAAC,CAAC,CAAC;EAC7D;EAEA,SAAS2B,SAASA,CAAA,EAAG;IACnB,IAAI/K,IAAI,GAAGoJ,GAAG,CAAC,CAAC;MACZ4B,UAAU,GAAGJ,YAAY,CAAC5K,IAAI,CAAC;IAEnC6J,QAAQ,GAAG/rB,SAAS;IACpBgsB,QAAQ,GAAG,IAAI;IACfG,YAAY,GAAGjK,IAAI;IAEnB,IAAIgL,UAAU,EAAE;MACd,IAAIhB,OAAO,KAAKxvB,SAAS,EAAE;QACzB,OAAO8vB,WAAW,CAACL,YAAY,CAAC;MAClC;MACA,IAAIE,MAAM,EAAE;QACV;QACArS,YAAY,CAACkS,OAAO,CAAC;QACrBA,OAAO,GAAGvX,UAAU,CAAC8X,YAAY,EAAEX,IAAI,CAAC;QACxC,OAAOS,UAAU,CAACJ,YAAY,CAAC;MACjC;IACF;IACA,IAAID,OAAO,KAAKxvB,SAAS,EAAE;MACzBwvB,OAAO,GAAGvX,UAAU,CAAC8X,YAAY,EAAEX,IAAI,CAAC;IAC1C;IACA,OAAOtrB,MAAM;EACf;EACAysB,SAAS,CAACxH,MAAM,GAAGA,MAAM;EACzBwH,SAAS,CAACD,KAAK,GAAGA,KAAK;EACvB,OAAOC,SAAS;AAClB;AAEA1S,MAAM,CAACC,OAAO,GAAGqR,QAAQ;;;;;;;;;;AC9LzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASR,QAAQA,CAACtlB,KAAK,EAAE;EACvB,IAAIkE,IAAI,GAAG,OAAOlE,KAAK;EACvB,OAAOA,KAAK,IAAI,IAAI,KAAKkE,IAAI,IAAI,QAAQ,IAAIA,IAAI,IAAI,UAAU,CAAC;AAClE;AAEAsQ,MAAM,CAACC,OAAO,GAAG6Q,QAAQ;;;;;;;;;;AC9BzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS8B,YAAYA,CAACpnB,KAAK,EAAE;EAC3B,OAAOA,KAAK,IAAI,IAAI,IAAI,OAAOA,KAAK,IAAI,QAAQ;AAClD;AAEAwU,MAAM,CAACC,OAAO,GAAG2S,YAAY;;;;;;;;;;AC5B7B,IAAI5C,UAAU,GAAGjQ,mBAAO,CAAC,2DAAe,CAAC;EACrC6S,YAAY,GAAG7S,mBAAO,CAAC,6DAAgB,CAAC;;AAE5C;AACA,IAAI8S,SAAS,GAAG,iBAAiB;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAACtnB,KAAK,EAAE;EACvB,OAAO,OAAOA,KAAK,IAAI,QAAQ,IAC5BonB,YAAY,CAACpnB,KAAK,CAAC,IAAIwkB,UAAU,CAACxkB,KAAK,CAAC,IAAIqnB,SAAU;AAC3D;AAEA7S,MAAM,CAACC,OAAO,GAAG6S,QAAQ;;;;;;;;;;AC5BzB,IAAIrD,IAAI,GAAG1P,mBAAO,CAAC,+CAAS,CAAC;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIgR,GAAG,GAAG,SAAAA,CAAA,EAAW;EACnB,OAAOtB,IAAI,CAACra,IAAI,CAAC2b,GAAG,CAAC,CAAC;AACxB,CAAC;AAED/Q,MAAM,CAACC,OAAO,GAAG8Q,GAAG;;;;;;;;;;ACtBpB,IAAIO,QAAQ,GAAGvR,mBAAO,CAAC,qDAAY,CAAC;EAChC+Q,QAAQ,GAAG/Q,mBAAO,CAAC,qDAAY,CAAC;;AAEpC;AACA,IAAIkR,eAAe,GAAG,qBAAqB;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASnxB,QAAQA,CAACwtB,IAAI,EAAEiE,IAAI,EAAEjwB,OAAO,EAAE;EACrC,IAAIwL,OAAO,GAAG,IAAI;IACdC,QAAQ,GAAG,IAAI;EAEnB,IAAI,OAAOugB,IAAI,IAAI,UAAU,EAAE;IAC7B,MAAM,IAAIyE,SAAS,CAACd,eAAe,CAAC;EACtC;EACA,IAAIH,QAAQ,CAACxvB,OAAO,CAAC,EAAE;IACrBwL,OAAO,GAAG,SAAS,IAAIxL,OAAO,GAAG,CAAC,CAACA,OAAO,CAACwL,OAAO,GAAGA,OAAO;IAC5DC,QAAQ,GAAG,UAAU,IAAIzL,OAAO,GAAG,CAAC,CAACA,OAAO,CAACyL,QAAQ,GAAGA,QAAQ;EAClE;EACA,OAAOukB,QAAQ,CAAChE,IAAI,EAAEiE,IAAI,EAAE;IAC1B,SAAS,EAAEzkB,OAAO;IAClB,SAAS,EAAEykB,IAAI;IACf,UAAU,EAAExkB;EACd,CAAC,CAAC;AACJ;AAEAiT,MAAM,CAACC,OAAO,GAAGngB,QAAQ;;;;;;;;;;ACpEzB,IAAIqwB,QAAQ,GAAGpQ,mBAAO,CAAC,uDAAa,CAAC;EACjC+Q,QAAQ,GAAG/Q,mBAAO,CAAC,qDAAY,CAAC;EAChC+S,QAAQ,GAAG/S,mBAAO,CAAC,qDAAY,CAAC;;AAEpC;AACA,IAAIgT,GAAG,GAAG,CAAC,GAAG,CAAC;;AAEf;AACA,IAAIC,UAAU,GAAG,oBAAoB;;AAErC;AACA,IAAIC,UAAU,GAAG,YAAY;;AAE7B;AACA,IAAIC,SAAS,GAAG,aAAa;;AAE7B;AACA,IAAIC,YAAY,GAAG1jB,QAAQ;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASuhB,QAAQA,CAACxlB,KAAK,EAAE;EACvB,IAAI,OAAOA,KAAK,IAAI,QAAQ,EAAE;IAC5B,OAAOA,KAAK;EACd;EACA,IAAIsnB,QAAQ,CAACtnB,KAAK,CAAC,EAAE;IACnB,OAAOunB,GAAG;EACZ;EACA,IAAIjC,QAAQ,CAACtlB,KAAK,CAAC,EAAE;IACnB,IAAI4nB,KAAK,GAAG,OAAO5nB,KAAK,CAAC6J,OAAO,IAAI,UAAU,GAAG7J,KAAK,CAAC6J,OAAO,CAAC,CAAC,GAAG7J,KAAK;IACxEA,KAAK,GAAGslB,QAAQ,CAACsC,KAAK,CAAC,GAAIA,KAAK,GAAG,EAAE,GAAIA,KAAK;EAChD;EACA,IAAI,OAAO5nB,KAAK,IAAI,QAAQ,EAAE;IAC5B,OAAOA,KAAK,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK;EACrC;EACAA,KAAK,GAAG2kB,QAAQ,CAAC3kB,KAAK,CAAC;EACvB,IAAI6nB,QAAQ,GAAGJ,UAAU,CAACjV,IAAI,CAACxS,KAAK,CAAC;EACrC,OAAQ6nB,QAAQ,IAAIH,SAAS,CAAClV,IAAI,CAACxS,KAAK,CAAC,GACrC2nB,YAAY,CAAC3nB,KAAK,CAACyjB,KAAK,CAAC,CAAC,CAAC,EAAEoE,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,GAC7CL,UAAU,CAAChV,IAAI,CAACxS,KAAK,CAAC,GAAGunB,GAAG,GAAG,CAACvnB,KAAM;AAC7C;AAEAwU,MAAM,CAACC,OAAO,GAAG+Q,QAAQ;;;;;;;;;;;;;;;;;;;;;AC/DzB,MAAMsC,SAAS,GAAG,IAAI/vB,KAAK,CAAC,qDAAqD,CAAC;AAClF,MAAMgwB,gBAAgB,GAAG,IAAIhwB,KAAK,CAAC,sBAAsB,CAAC;AAC1D,MAAMiwB,UAAU,GAAG,IAAIjwB,KAAK,CAAC,2BAA2B,CAAC;AAEzD,IAAIkwB,WAAW,GAAItxB,MAAgC,IAAK,UAAUmgB,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACjG,SAASC,KAAKA,CAAClX,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYgX,CAAC,GAAGhX,KAAK,GAAG,IAAIgX,CAAC,CAAC,UAAUlL,OAAO,EAAE;MAAEA,OAAO,CAAC9L,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKgX,CAAC,KAAKA,CAAC,GAAGnL,OAAO,CAAC,EAAE,UAAUC,OAAO,EAAE8H,MAAM,EAAE;IACvD,SAASuD,SAASA,CAACnX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAACpX,IAAI,CAACG,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASsE,QAAQA,CAACrX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAAC,OAAO,CAAC,CAACjX,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASqE,IAAIA,CAAC3c,MAAM,EAAE;MAAEA,MAAM,CAACqF,IAAI,GAAGgM,OAAO,CAACrR,MAAM,CAACuF,KAAK,CAAC,GAAGkX,KAAK,CAACzc,MAAM,CAACuF,KAAK,CAAC,CAACwO,IAAI,CAAC2I,SAAS,EAAEE,QAAQ,CAAC;IAAE;IAC7GD,IAAI,CAAC,CAACH,SAAS,GAAGA,SAAS,CAACjd,KAAK,CAAC8c,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAElX,IAAI,CAAC,CAAC,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACD,MAAMqoB,SAAS,CAAC;EACZzxB,WAAWA,CAAC0xB,MAAM,EAAEC,YAAY,GAAGJ,UAAU,EAAE;IAC3C,IAAI,CAACG,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACC,eAAe,GAAG,EAAE;IACzB,IAAI,CAACC,gBAAgB,GAAG,EAAE;EAC9B;EACAC,OAAOA,CAACC,MAAM,GAAG,CAAC,EAAE;IAChB,IAAIA,MAAM,IAAI,CAAC,EACX,MAAM,IAAIzwB,KAAK,CAAE,kBAAiBywB,MAAO,oBAAmB,CAAC;IACjE,OAAO,IAAI3c,OAAO,CAAC,CAACC,OAAO,EAAE8H,MAAM,KAAK;MACpC,IAAI,CAAC,IAAI,CAACyU,eAAe,CAACG,MAAM,GAAG,CAAC,CAAC,EACjC,IAAI,CAACH,eAAe,CAACG,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE;MACzC,IAAI,CAACH,eAAe,CAACG,MAAM,GAAG,CAAC,CAAC,CAACnpB,IAAI,CAAC;QAAEyM,OAAO;QAAE8H;MAAO,CAAC,CAAC;MAC1D,IAAI,CAAC6U,SAAS,CAAC,CAAC;IACpB,CAAC,CAAC;EACN;EACAzU,YAAYA,CAAC7W,QAAQ,EAAEqrB,MAAM,GAAG,CAAC,EAAE;IAC/B,OAAOP,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAClD,MAAM,CAACjoB,KAAK,EAAE0oB,OAAO,CAAC,GAAG,MAAM,IAAI,CAACH,OAAO,CAACC,MAAM,CAAC;MACnD,IAAI;QACA,OAAO,MAAMrrB,QAAQ,CAAC6C,KAAK,CAAC;MAChC,CAAC,SACO;QACJ0oB,OAAO,CAAC,CAAC;MACb;IACJ,CAAC,CAAC;EACN;EACAC,aAAaA,CAACH,MAAM,GAAG,CAAC,EAAE;IACtB,IAAIA,MAAM,IAAI,CAAC,EACX,MAAM,IAAIzwB,KAAK,CAAE,kBAAiBywB,MAAO,oBAAmB,CAAC;IACjE,OAAO,IAAI3c,OAAO,CAAEC,OAAO,IAAK;MAC5B,IAAI,CAAC,IAAI,CAACwc,gBAAgB,CAACE,MAAM,GAAG,CAAC,CAAC,EAClC,IAAI,CAACF,gBAAgB,CAACE,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE;MAC1C,IAAI,CAACF,gBAAgB,CAACE,MAAM,GAAG,CAAC,CAAC,CAACnpB,IAAI,CAACyM,OAAO,CAAC;MAC/C,IAAI,CAAC2c,SAAS,CAAC,CAAC;IACpB,CAAC,CAAC;EACN;EACAG,QAAQA,CAAA,EAAG;IACP,OAAO,IAAI,CAACT,MAAM,IAAI,CAAC;EAC3B;EACAU,QAAQA,CAAA,EAAG;IACP,OAAO,IAAI,CAACV,MAAM;EACtB;EACAW,QAAQA,CAAC9oB,KAAK,EAAE;IACZ,IAAI,CAACmoB,MAAM,GAAGnoB,KAAK;IACnB,IAAI,CAACyoB,SAAS,CAAC,CAAC;EACpB;EACAC,OAAOA,CAACF,MAAM,GAAG,CAAC,EAAE;IAChB,IAAIA,MAAM,IAAI,CAAC,EACX,MAAM,IAAIzwB,KAAK,CAAE,kBAAiBywB,MAAO,oBAAmB,CAAC;IACjE,IAAI,CAACL,MAAM,IAAIK,MAAM;IACrB,IAAI,CAACC,SAAS,CAAC,CAAC;EACpB;EACA/I,MAAMA,CAAA,EAAG;IACL,IAAI,CAAC2I,eAAe,CAACza,OAAO,CAAE0T,KAAK,IAAKA,KAAK,CAAC1T,OAAO,CAAEvJ,KAAK,IAAKA,KAAK,CAACuP,MAAM,CAAC,IAAI,CAACwU,YAAY,CAAC,CAAC,CAAC;IAClG,IAAI,CAACC,eAAe,GAAG,EAAE;EAC7B;EACAI,SAASA,CAAA,EAAG;IACR,IAAIxQ,EAAE;IACN,KAAK,IAAIuQ,MAAM,GAAG,IAAI,CAACL,MAAM,EAAEK,MAAM,GAAG,CAAC,EAAEA,MAAM,EAAE,EAAE;MACjD,MAAMO,UAAU,GAAG,CAAC9Q,EAAE,GAAG,IAAI,CAACoQ,eAAe,CAACG,MAAM,GAAG,CAAC,CAAC,MAAM,IAAI,IAAIvQ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACyI,KAAK,CAAC,CAAC;MAC1G,IAAI,CAACqI,UAAU,EACX;MACJ,MAAMC,aAAa,GAAG,IAAI,CAACb,MAAM;MACjC,MAAMc,cAAc,GAAGT,MAAM;MAC7B,IAAI,CAACL,MAAM,IAAIK,MAAM;MACrBA,MAAM,GAAG,IAAI,CAACL,MAAM,GAAG,CAAC;MACxBY,UAAU,CAACjd,OAAO,CAAC,CAACkd,aAAa,EAAE,IAAI,CAACE,YAAY,CAACD,cAAc,CAAC,CAAC,CAAC;IAC1E;IACA,IAAI,CAACE,mBAAmB,CAAC,CAAC;EAC9B;EACAD,YAAYA,CAACV,MAAM,EAAE;IACjB,IAAIY,MAAM,GAAG,KAAK;IAClB,OAAO,MAAM;MACT,IAAIA,MAAM,EACN;MACJA,MAAM,GAAG,IAAI;MACb,IAAI,CAACV,OAAO,CAACF,MAAM,CAAC;IACxB,CAAC;EACL;EACAW,mBAAmBA,CAAA,EAAG;IAClB,KAAK,IAAIX,MAAM,GAAG,IAAI,CAACL,MAAM,EAAEK,MAAM,GAAG,CAAC,EAAEA,MAAM,EAAE,EAAE;MACjD,IAAI,CAAC,IAAI,CAACF,gBAAgB,CAACE,MAAM,GAAG,CAAC,CAAC,EAClC;MACJ,IAAI,CAACF,gBAAgB,CAACE,MAAM,GAAG,CAAC,CAAC,CAAC5a,OAAO,CAAEyb,MAAM,IAAKA,MAAM,CAAC,CAAC,CAAC;MAC/D,IAAI,CAACf,gBAAgB,CAACE,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE;IAC1C;EACJ;AACJ;AAEA,IAAIc,WAAW,GAAI3yB,MAAgC,IAAK,UAAUmgB,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACjG,SAASC,KAAKA,CAAClX,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYgX,CAAC,GAAGhX,KAAK,GAAG,IAAIgX,CAAC,CAAC,UAAUlL,OAAO,EAAE;MAAEA,OAAO,CAAC9L,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKgX,CAAC,KAAKA,CAAC,GAAGnL,OAAO,CAAC,EAAE,UAAUC,OAAO,EAAE8H,MAAM,EAAE;IACvD,SAASuD,SAASA,CAACnX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAACpX,IAAI,CAACG,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASsE,QAAQA,CAACrX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAAC,OAAO,CAAC,CAACjX,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASqE,IAAIA,CAAC3c,MAAM,EAAE;MAAEA,MAAM,CAACqF,IAAI,GAAGgM,OAAO,CAACrR,MAAM,CAACuF,KAAK,CAAC,GAAGkX,KAAK,CAACzc,MAAM,CAACuF,KAAK,CAAC,CAACwO,IAAI,CAAC2I,SAAS,EAAEE,QAAQ,CAAC;IAAE;IAC7GD,IAAI,CAAC,CAACH,SAAS,GAAGA,SAAS,CAACjd,KAAK,CAAC8c,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAElX,IAAI,CAAC,CAAC,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACD,MAAM1L,KAAK,CAAC;EACRsC,WAAWA,CAAC8yB,WAAW,EAAE;IACrB,IAAI,CAACC,UAAU,GAAG,IAAItB,SAAS,CAAC,CAAC,EAAEqB,WAAW,CAAC;EACnD;EACAhB,OAAOA,CAAA,EAAG;IACN,OAAOe,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MAClD,MAAM,GAAGG,QAAQ,CAAC,GAAG,MAAM,IAAI,CAACD,UAAU,CAACjB,OAAO,CAAC,CAAC;MACpD,OAAOkB,QAAQ;IACnB,CAAC,CAAC;EACN;EACAzV,YAAYA,CAAC7W,QAAQ,EAAE;IACnB,OAAO,IAAI,CAACqsB,UAAU,CAACxV,YAAY,CAAC,MAAM7W,QAAQ,CAAC,CAAC,CAAC;EACzD;EACAyrB,QAAQA,CAAA,EAAG;IACP,OAAO,IAAI,CAACY,UAAU,CAACZ,QAAQ,CAAC,CAAC;EACrC;EACAD,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACa,UAAU,CAACb,aAAa,CAAC,CAAC;EAC1C;EACAD,OAAOA,CAAA,EAAG;IACN,IAAI,IAAI,CAACc,UAAU,CAACZ,QAAQ,CAAC,CAAC,EAC1B,IAAI,CAACY,UAAU,CAACd,OAAO,CAAC,CAAC;EACjC;EACAhJ,MAAMA,CAAA,EAAG;IACL,OAAO,IAAI,CAAC8J,UAAU,CAAC9J,MAAM,CAAC,CAAC;EACnC;AACJ;AAEA,IAAI7I,SAAS,GAAIlgB,MAAgC,IAAK,UAAUmgB,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EAC/F,SAASC,KAAKA,CAAClX,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYgX,CAAC,GAAGhX,KAAK,GAAG,IAAIgX,CAAC,CAAC,UAAUlL,OAAO,EAAE;MAAEA,OAAO,CAAC9L,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKgX,CAAC,KAAKA,CAAC,GAAGnL,OAAO,CAAC,EAAE,UAAUC,OAAO,EAAE8H,MAAM,EAAE;IACvD,SAASuD,SAASA,CAACnX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAACpX,IAAI,CAACG,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASsE,QAAQA,CAACrX,KAAK,EAAE;MAAE,IAAI;QAAEoX,IAAI,CAACH,SAAS,CAAC,OAAO,CAAC,CAACjX,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAO+S,CAAC,EAAE;QAAEa,MAAM,CAACb,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASqE,IAAIA,CAAC3c,MAAM,EAAE;MAAEA,MAAM,CAACqF,IAAI,GAAGgM,OAAO,CAACrR,MAAM,CAACuF,KAAK,CAAC,GAAGkX,KAAK,CAACzc,MAAM,CAACuF,KAAK,CAAC,CAACwO,IAAI,CAAC2I,SAAS,EAAEE,QAAQ,CAAC;IAAE;IAC7GD,IAAI,CAAC,CAACH,SAAS,GAAGA,SAAS,CAACjd,KAAK,CAAC8c,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAElX,IAAI,CAAC,CAAC,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACD,SAAS6pB,WAAWA,CAACC,IAAI,EAAE9V,OAAO,EAAE+V,YAAY,GAAG9B,SAAS,EAAE;EAC1D,OAAO;IACHS,OAAO,EAAGC,MAAM,IAAK;MACjB,IAAIA,MAAM,KAAK7xB,SAAS,IAAI6xB,MAAM,IAAI,CAAC,EAAE;QACrC,MAAM,IAAIzwB,KAAK,CAAE,kBAAiBywB,MAAO,oBAAmB,CAAC;MACjE;MACA,OAAO,IAAI3c,OAAO,CAAC,CAACC,OAAO,EAAE8H,MAAM,KAAKiD,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;QACjF,IAAIgT,SAAS,GAAG,KAAK;QACrB,MAAMC,MAAM,GAAGlb,UAAU,CAAC,MAAM;UAC5Bib,SAAS,GAAG,IAAI;UAChBjW,MAAM,CAACgW,YAAY,CAAC;QACxB,CAAC,EAAE/V,OAAO,CAAC;QACX,IAAI;UACA,MAAMkW,MAAM,GAAG,MAAMJ,IAAI,CAACpB,OAAO,CAACC,MAAM,CAAC;UACzC,IAAIqB,SAAS,EAAE;YACX,MAAMnB,OAAO,GAAGvmB,KAAK,CAAC8N,OAAO,CAAC8Z,MAAM,CAAC,GAAGA,MAAM,CAAC,CAAC,CAAC,GAAGA,MAAM;YAC1DrB,OAAO,CAAC,CAAC;UACb,CAAC,MACI;YACDzU,YAAY,CAAC6V,MAAM,CAAC;YACpBhe,OAAO,CAACie,MAAM,CAAC;UACnB;QACJ,CAAC,CACD,OAAOhX,CAAC,EAAE;UACN,IAAI,CAAC8W,SAAS,EAAE;YACZ5V,YAAY,CAAC6V,MAAM,CAAC;YACpBlW,MAAM,CAACb,CAAC,CAAC;UACb;QACJ;MACJ,CAAC,CAAC,CAAC;IACP,CAAC;IACDiB,YAAYA,CAAC7W,QAAQ,EAAEqrB,MAAM,EAAE;MAC3B,OAAO3R,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;QAChD,IAAI6R,OAAO,GAAGA,CAAA,KAAM/xB,SAAS;QAC7B,IAAI;UACA,MAAMozB,MAAM,GAAG,MAAM,IAAI,CAACxB,OAAO,CAACC,MAAM,CAAC;UACzC,IAAIrmB,KAAK,CAAC8N,OAAO,CAAC8Z,MAAM,CAAC,EAAE;YACvBrB,OAAO,GAAGqB,MAAM,CAAC,CAAC,CAAC;YACnB,OAAO,MAAM5sB,QAAQ,CAAC4sB,MAAM,CAAC,CAAC,CAAC,CAAC;UACpC,CAAC,MACI;YACDrB,OAAO,GAAGqB,MAAM;YAChB,OAAO,MAAM5sB,QAAQ,CAAC,CAAC;UAC3B;QACJ,CAAC,SACO;UACJurB,OAAO,CAAC,CAAC;QACb;MACJ,CAAC,CAAC;IACN,CAAC;IACDA,OAAOA,CAACF,MAAM,EAAE;MACZmB,IAAI,CAACjB,OAAO,CAACF,MAAM,CAAC;IACxB,CAAC;IACD9I,MAAMA,CAAA,EAAG;MACL,OAAOiK,IAAI,CAACjK,MAAM,CAAC,CAAC;IACxB,CAAC;IACDiJ,aAAa,EAAGH,MAAM,IAAK;MACvB,IAAIA,MAAM,KAAK7xB,SAAS,IAAI6xB,MAAM,IAAI,CAAC,EAAE;QACrC,MAAM,IAAIzwB,KAAK,CAAE,kBAAiBywB,MAAO,oBAAmB,CAAC;MACjE;MACA,OAAO,IAAI3c,OAAO,CAAC,CAACC,OAAO,EAAE8H,MAAM,KAAK;QACpC,MAAMkW,MAAM,GAAGlb,UAAU,CAAC,MAAMgF,MAAM,CAACgW,YAAY,CAAC,EAAE/V,OAAO,CAAC;QAC9D8V,IAAI,CAAChB,aAAa,CAACH,MAAM,CAAC,CAACha,IAAI,CAAC,MAAM;UAClCyF,YAAY,CAAC6V,MAAM,CAAC;UACpBhe,OAAO,CAAC,CAAC;QACb,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC;IACD8c,QAAQ,EAAEA,CAAA,KAAMe,IAAI,CAACf,QAAQ,CAAC,CAAC;IAC/BC,QAAQ,EAAEA,CAAA,KAAMc,IAAI,CAACd,QAAQ,CAAC,CAAC;IAC/BC,QAAQ,EAAG9oB,KAAK,IAAK2pB,IAAI,CAACb,QAAQ,CAAC9oB,KAAK;EAC5C,CAAC;AACL;;AAEA;AACA,SAASgqB,UAAUA,CAACL,IAAI,EAAEM,oBAAoB,GAAGlC,gBAAgB,EAAE;EAC/D;EACA,OAAO2B,WAAW,CAACC,IAAI,EAAE,CAAC,EAAEM,oBAAoB,CAAC;AACrD;;;;;;;UCpOA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;;;;WClCA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WClBA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,aAAa;WACb;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;;WAEA;;;;;WCpCA;WACA;WACA;WACA;;;;;UEHA;UACA","sources":["webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/AbstractPowerSyncDatabase.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/AbstractPowerSyncOpenFactory.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/connection/PowerSyncBackendConnector.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/connection/PowerSyncCredentials.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/bucket/BucketStorageAdapter.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/bucket/CrudBatch.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/bucket/CrudEntry.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/bucket/CrudTransaction.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/bucket/OpType.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/bucket/OplogEntry.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/bucket/SqliteBucketStorage.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/bucket/SyncDataBatch.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/bucket/SyncDataBucket.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/stream/AbstractRemote.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/stream/AbstractStreamingSyncImplementation.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/client/sync/stream/streaming-sync-types.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/db/Column.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/db/DBAdapter.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/db/crud/SyncStatus.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/db/crud/UploadQueueStatus.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/db/schema/Index.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/db/schema/IndexedColumn.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/db/schema/Schema.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/db/schema/Table.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/db/schema/TableV2.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/index.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/utils/BaseObserver.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/utils/mutex.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/lib/utils/strings.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/node_modules/uuid/index.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/node_modules/uuid/lib/bytesToUuid.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/node_modules/uuid/lib/rng-browser.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/node_modules/uuid/v1.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-common/node_modules/uuid/v4.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-web/lib/src/db/adapters/wa-sqlite/WASQLiteDBAdapter.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-web/lib/src/db/sync/WebRemote.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-web/lib/src/db/sync/WebStreamingSyncImplementation.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-web/lib/src/worker/db/open-worker-database.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-web/lib/src/worker/sync/BroadcastLogger.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-web/lib/src/worker/sync/SharedSyncImplementation.js","webpack://PowerSync Angular Demo/./node_modules/@journeyapps/powersync-sdk-web/lib/src/worker/sync/SharedSyncImplementation.worker.js","webpack://PowerSync Angular Demo/./node_modules/can-namespace/can-namespace.js","webpack://PowerSync Angular Demo/./node_modules/can-ndjson-stream/can-ndjson-stream.js","webpack://PowerSync Angular Demo/./node_modules/event-iterator/lib/dom.js","webpack://PowerSync Angular Demo/./node_modules/event-iterator/lib/event-iterator.js","webpack://PowerSync Angular Demo/./node_modules/js-logger/src/logger.js","webpack://PowerSync Angular Demo/./node_modules/lodash/_Symbol.js","webpack://PowerSync Angular Demo/./node_modules/lodash/_baseGetTag.js","webpack://PowerSync Angular Demo/./node_modules/lodash/_baseTrim.js","webpack://PowerSync Angular Demo/./node_modules/lodash/_freeGlobal.js","webpack://PowerSync Angular Demo/./node_modules/lodash/_getRawTag.js","webpack://PowerSync Angular Demo/./node_modules/lodash/_objectToString.js","webpack://PowerSync Angular Demo/./node_modules/lodash/_root.js","webpack://PowerSync Angular Demo/./node_modules/lodash/_trimmedEndIndex.js","webpack://PowerSync Angular Demo/./node_modules/lodash/debounce.js","webpack://PowerSync Angular Demo/./node_modules/lodash/isObject.js","webpack://PowerSync Angular Demo/./node_modules/lodash/isObjectLike.js","webpack://PowerSync Angular Demo/./node_modules/lodash/isSymbol.js","webpack://PowerSync Angular Demo/./node_modules/lodash/now.js","webpack://PowerSync Angular Demo/./node_modules/lodash/throttle.js","webpack://PowerSync Angular Demo/./node_modules/lodash/toNumber.js","webpack://PowerSync Angular Demo/./node_modules/async-mutex/index.mjs","webpack://PowerSync Angular Demo/webpack/bootstrap","webpack://PowerSync Angular Demo/webpack/runtime/chunk loaded","webpack://PowerSync Angular Demo/webpack/runtime/compat get default export","webpack://PowerSync Angular Demo/webpack/runtime/define property getters","webpack://PowerSync Angular Demo/webpack/runtime/ensure chunk","webpack://PowerSync Angular Demo/webpack/runtime/get javascript chunk filename","webpack://PowerSync Angular Demo/webpack/runtime/get mini-css chunk filename","webpack://PowerSync Angular Demo/webpack/runtime/global","webpack://PowerSync Angular Demo/webpack/runtime/hasOwnProperty shorthand","webpack://PowerSync Angular Demo/webpack/runtime/make namespace object","webpack://PowerSync Angular Demo/webpack/runtime/publicPath","webpack://PowerSync Angular Demo/webpack/runtime/importScripts chunk loading","webpack://PowerSync Angular Demo/webpack/runtime/startup chunk dependencies","webpack://PowerSync Angular Demo/webpack/before-startup","webpack://PowerSync Angular Demo/webpack/startup","webpack://PowerSync Angular Demo/webpack/after-startup"],"sourcesContent":["import { Mutex } from 'async-mutex';\nimport { EventIterator } from 'event-iterator';\nimport Logger from 'js-logger';\nimport throttle from 'lodash/throttle';\nimport { isBatchedUpdateNotification } from '../db/DBAdapter';\nimport { UploadQueueStats } from '../db/crud/UploadQueueStatus';\nimport { BaseObserver } from '../utils/BaseObserver';\nimport { mutexRunExclusive } from '../utils/mutex';\nimport { quoteIdentifier } from '../utils/strings';\nimport { PSInternalTable } from './sync/bucket/BucketStorageAdapter';\nimport { CrudBatch } from './sync/bucket/CrudBatch';\nimport { CrudEntry } from './sync/bucket/CrudEntry';\nimport { CrudTransaction } from './sync/bucket/CrudTransaction';\nimport { DEFAULT_CRUD_UPLOAD_THROTTLE_MS } from './sync/stream/AbstractStreamingSyncImplementation';\nconst POWERSYNC_TABLE_MATCH = /(^ps_data__|^ps_data_local__)/;\nconst DEFAULT_DISCONNECT_CLEAR_OPTIONS = {\n    clearLocal: true\n};\nexport const DEFAULT_POWERSYNC_CLOSE_OPTIONS = {\n    disconnect: true\n};\nexport const DEFAULT_WATCH_THROTTLE_MS = 30;\nexport const DEFAULT_POWERSYNC_DB_OPTIONS = {\n    retryDelay: 5000,\n    logger: Logger.get('PowerSyncDatabase'),\n    crudUploadThrottleMs: DEFAULT_CRUD_UPLOAD_THROTTLE_MS\n};\n/**\n * Requesting nested or recursive locks can block the application in some circumstances.\n * This default lock timeout will act as a failsafe to throw an error if a lock cannot\n * be obtained.\n */\nexport const DEFAULT_LOCK_TIMEOUT_MS = 120_000; // 2 mins\nexport class AbstractPowerSyncDatabase extends BaseObserver {\n    options;\n    /**\n     * Transactions should be queued in the DBAdapter, but we also want to prevent\n     * calls to `.execute` while an async transaction is running.\n     */\n    static transactionMutex = new Mutex();\n    /**\n     * Returns true if the connection is closed.\n     */\n    closed;\n    ready;\n    /**\n     * Current connection status.\n     */\n    currentStatus;\n    syncStreamImplementation;\n    sdkVersion;\n    bucketStorageAdapter;\n    syncStatusListenerDisposer;\n    _isReadyPromise;\n    _schema;\n    constructor(options) {\n        super();\n        this.options = options;\n        this.bucketStorageAdapter = this.generateBucketStorageAdapter();\n        this.closed = false;\n        this.currentStatus = undefined;\n        this.options = { ...DEFAULT_POWERSYNC_DB_OPTIONS, ...options };\n        this._schema = options.schema;\n        this.ready = false;\n        this.sdkVersion = '';\n        // Start async init\n        this._isReadyPromise = this.initialize();\n    }\n    /**\n     * Schema used for the local database.\n     */\n    get schema() {\n        return this._schema;\n    }\n    /**\n     * The underlying database.\n     *\n     * For the most part, behavior is the same whether querying on the underlying database, or on {@link AbstractPowerSyncDatabase}.\n     */\n    get database() {\n        return this.options.database;\n    }\n    /**\n     * Whether a connection to the PowerSync service is currently open.\n     */\n    get connected() {\n        return this.currentStatus?.connected || false;\n    }\n    /**\n     * @returns A promise which will resolve once initialization is completed.\n     */\n    async waitForReady() {\n        if (this.ready) {\n            return;\n        }\n        await this._isReadyPromise;\n    }\n    /**\n     * Entry point for executing initialization logic.\n     * This is to be automatically executed in the constructor.\n     */\n    async initialize() {\n        await this._initialize();\n        await this.bucketStorageAdapter.init();\n        const version = await this.options.database.execute('SELECT powersync_rs_version()');\n        this.sdkVersion = version.rows?.item(0)['powersync_rs_version()'] ?? '';\n        await this.updateSchema(this.options.schema);\n        this.ready = true;\n        this.iterateListeners((cb) => cb.initialized?.());\n    }\n    /**\n     * Replace the schema with a new version. This is for advanced use cases - typically the schema should just be specified once in the constructor.\n     *\n     * Cannot be used while connected - this should only be called before {@link AbstractPowerSyncDatabase.connect}.\n     */\n    async updateSchema(schema) {\n        if (this.syncStreamImplementation) {\n            throw new Error('Cannot update schema while connected');\n        }\n        /**\n         * TODO\n         * Validations only show a warning for now.\n         * The next major release should throw an exception.\n         */\n        try {\n            schema.validate();\n        }\n        catch (ex) {\n            this.options.logger?.warn('Schema validation failed. Unexpected behaviour could occur', ex);\n        }\n        this._schema = schema;\n        await this.database.execute('SELECT powersync_replace_schema(?)', [JSON.stringify(this.schema.toJSON())]);\n    }\n    /**\n     * Wait for initialization to complete.\n     * While initializing is automatic, this helps to catch and report initialization errors.\n     */\n    async init() {\n        return this.waitForReady();\n    }\n    /**\n     * Connects to stream of events from the PowerSync instance.\n     */\n    async connect(connector) {\n        await this.waitForReady();\n        // close connection if one is open\n        await this.disconnect();\n        if (this.closed) {\n            throw new Error('Cannot connect using a closed client');\n        }\n        this.syncStreamImplementation = this.generateSyncStreamImplementation(connector);\n        this.syncStatusListenerDisposer = this.syncStreamImplementation.registerListener({\n            statusChanged: (status) => {\n                this.currentStatus = status;\n                this.iterateListeners((cb) => cb.statusChanged?.(status));\n            }\n        });\n        await this.syncStreamImplementation.waitForReady();\n        this.syncStreamImplementation.triggerCrudUpload();\n        this.syncStreamImplementation.connect();\n    }\n    /**\n     * Close the sync connection.\n     *\n     * Use {@link connect} to connect again.\n     */\n    async disconnect() {\n        await this.syncStreamImplementation?.disconnect();\n        this.syncStatusListenerDisposer?.();\n        await this.syncStreamImplementation?.dispose();\n        this.syncStreamImplementation = undefined;\n    }\n    /**\n     *  Disconnect and clear the database.\n     *  Use this when logging out.\n     *  The database can still be queried after this is called, but the tables\n     *  would be empty.\n     *\n     * To preserve data in local-only tables, set clearLocal to false.\n     */\n    async disconnectAndClear(options = DEFAULT_DISCONNECT_CLEAR_OPTIONS) {\n        await this.disconnect();\n        await this.waitForReady();\n        const { clearLocal } = options;\n        // TODO DB name, verify this is necessary with extension\n        await this.database.writeTransaction(async (tx) => {\n            await tx.execute(`DELETE FROM ${PSInternalTable.OPLOG}`);\n            await tx.execute(`DELETE FROM ${PSInternalTable.CRUD}`);\n            await tx.execute(`DELETE FROM ${PSInternalTable.BUCKETS}`);\n            const tableGlob = clearLocal ? 'ps_data_*' : 'ps_data__*';\n            const existingTableRows = await tx.execute(`\n      SELECT name FROM sqlite_master WHERE type='table' AND name GLOB ?\n      `, [tableGlob]);\n            if (!existingTableRows.rows?.length) {\n                return;\n            }\n            for (const row of existingTableRows.rows._array) {\n                await tx.execute(`DELETE FROM ${quoteIdentifier(row.name)} WHERE 1`);\n            }\n        });\n    }\n    /**\n     * Close the database, releasing resources.\n     *\n     * Also disconnects any active connection.\n     *\n     * Once close is called, this connection cannot be used again - a new one\n     * must be constructed.\n     */\n    async close(options = DEFAULT_POWERSYNC_CLOSE_OPTIONS) {\n        await this.waitForReady();\n        const { disconnect } = options;\n        if (disconnect) {\n            await this.disconnect();\n        }\n        await this.syncStreamImplementation?.dispose();\n        this.database.close();\n        this.closed = true;\n    }\n    /**\n     * Get upload queue size estimate and count.\n     */\n    async getUploadQueueStats(includeSize) {\n        return this.readTransaction(async (tx) => {\n            if (includeSize) {\n                const result = await tx.execute(`SELECT SUM(cast(data as blob) + 20) as size, count(*) as count FROM ${PSInternalTable.CRUD}`);\n                const row = result.rows.item(0);\n                return new UploadQueueStats(row?.count ?? 0, row?.size ?? 0);\n            }\n            else {\n                const result = await tx.execute(`SELECT count(*) as count FROM ${PSInternalTable.CRUD}`);\n                const row = result.rows.item(0);\n                return new UploadQueueStats(row?.count ?? 0);\n            }\n        });\n    }\n    /**\n     * Get a batch of crud data to upload.\n     *\n     * Returns null if there is no data to upload.\n     *\n     * Use this from the {@link PowerSyncBackendConnector.uploadData} callback.\n     *\n     * Once the data have been successfully uploaded, call {@link CrudBatch.complete} before\n     * requesting the next batch.\n     *\n     * Use {@link limit} to specify the maximum number of updates to return in a single\n     * batch.\n     *\n     * This method does include transaction ids in the result, but does not group\n     * data by transaction. One batch may contain data from multiple transactions,\n     * and a single transaction may be split over multiple batches.\n     */\n    async getCrudBatch(limit) {\n        const result = await this.getAll(`SELECT id, tx_id, data FROM ${PSInternalTable.CRUD} ORDER BY id ASC LIMIT ?`, [limit + 1]);\n        const all = result.map((row) => CrudEntry.fromRow(row)) ?? [];\n        let haveMore = false;\n        if (all.length > limit) {\n            all.pop();\n            haveMore = true;\n        }\n        if (all.length == 0) {\n            return null;\n        }\n        const last = all[all.length - 1];\n        return new CrudBatch(all, haveMore, async (writeCheckpoint) => this.handleCrudCheckpoint(last.clientId, writeCheckpoint));\n    }\n    /**\n     * Get the next recorded transaction to upload.\n     *\n     * Returns null if there is no data to upload.\n     *\n     * Use this from the {@link PowerSyncBackendConnector.uploadData} callback.\n     *\n     * Once the data have been successfully uploaded, call {@link CrudTransaction.complete} before\n     * requesting the next transaction.\n     *\n     * Unlike {@link getCrudBatch}, this only returns data from a single transaction at a time.\n     * All data for the transaction is loaded into memory.\n     */\n    async getNextCrudTransaction() {\n        return await this.readTransaction(async (tx) => {\n            const first = await tx.getOptional(`SELECT id, tx_id, data FROM ${PSInternalTable.CRUD} ORDER BY id ASC LIMIT 1`);\n            if (!first) {\n                return null;\n            }\n            const txId = first.tx_id;\n            let all;\n            if (!txId) {\n                all = [CrudEntry.fromRow(first)];\n            }\n            else {\n                const result = await tx.getAll(`SELECT id, tx_id, data FROM ${PSInternalTable.CRUD} WHERE tx_id = ? ORDER BY id ASC`, [txId]);\n                all = result.map((row) => CrudEntry.fromRow(row));\n            }\n            const last = all[all.length - 1];\n            return new CrudTransaction(all, async (writeCheckpoint) => this.handleCrudCheckpoint(last.clientId, writeCheckpoint), txId);\n        });\n    }\n    async handleCrudCheckpoint(lastClientId, writeCheckpoint) {\n        return this.writeTransaction(async (tx) => {\n            await tx.execute(`DELETE FROM ${PSInternalTable.CRUD} WHERE id <= ?`, [lastClientId]);\n            if (writeCheckpoint) {\n                const check = await tx.execute(`SELECT 1 FROM ${PSInternalTable.CRUD} LIMIT 1`);\n                if (!check.rows?.length) {\n                    await tx.execute(`UPDATE ${PSInternalTable.BUCKETS} SET target_op = ? WHERE name='$local'`, [\n                        writeCheckpoint\n                    ]);\n                }\n            }\n            else {\n                await tx.execute(`UPDATE ${PSInternalTable.BUCKETS} SET target_op = ? WHERE name='$local'`, [\n                    this.bucketStorageAdapter.getMaxOpId()\n                ]);\n            }\n        });\n    }\n    /**\n     * Execute a write (INSERT/UPDATE/DELETE) query\n     * and optionally return results.\n     */\n    async execute(sql, parameters) {\n        await this.waitForReady();\n        return this.database.execute(sql, parameters);\n    }\n    /**\n     *  Execute a read-only query and return results.\n     */\n    async getAll(sql, parameters) {\n        await this.waitForReady();\n        return this.database.getAll(sql, parameters);\n    }\n    /**\n     * Execute a read-only query and return the first result, or null if the ResultSet is empty.\n     */\n    async getOptional(sql, parameters) {\n        await this.waitForReady();\n        return this.database.getOptional(sql, parameters);\n    }\n    /**\n     * Execute a read-only query and return the first result, error if the ResultSet is empty.\n     */\n    async get(sql, parameters) {\n        await this.waitForReady();\n        return this.database.get(sql, parameters);\n    }\n    /**\n     * Takes a read lock, without starting a transaction.\n     * In most cases, {@link readTransaction} should be used instead.\n     */\n    async readLock(callback) {\n        await this.waitForReady();\n        return mutexRunExclusive(AbstractPowerSyncDatabase.transactionMutex, () => callback(this.database));\n    }\n    /**\n     * Takes a global lock, without starting a transaction.\n     * In most cases, {@link writeTransaction} should be used instead.\n     */\n    async writeLock(callback) {\n        await this.waitForReady();\n        return mutexRunExclusive(AbstractPowerSyncDatabase.transactionMutex, async () => {\n            const res = await callback(this.database);\n            return res;\n        });\n    }\n    /**\n     * Open a read-only transaction.\n     * Read transactions can run concurrently to a write transaction.\n     * Changes from any write transaction are not visible to read transactions started before it.\n     */\n    async readTransaction(callback, lockTimeout = DEFAULT_LOCK_TIMEOUT_MS) {\n        await this.waitForReady();\n        return this.database.readTransaction(async (tx) => {\n            const res = await callback({ ...tx });\n            await tx.rollback();\n            return res;\n        }, { timeoutMs: lockTimeout });\n    }\n    /**\n     * Open a read-write transaction.\n     * This takes a global lock - only one write transaction can execute against the database at a time.\n     * Statements within the transaction must be done on the provided {@link Transaction} interface.\n     */\n    async writeTransaction(callback, lockTimeout = DEFAULT_LOCK_TIMEOUT_MS) {\n        await this.waitForReady();\n        return this.database.writeTransaction(async (tx) => {\n            const res = await callback(tx);\n            await tx.commit();\n            return res;\n        }, { timeoutMs: lockTimeout });\n    }\n    watch(sql, parameters, handlerOrOptions, maybeOptions) {\n        if (handlerOrOptions && typeof handlerOrOptions === 'object' && 'onResult' in handlerOrOptions) {\n            const handler = handlerOrOptions;\n            const options = maybeOptions;\n            return this.watchWithCallback(sql, parameters, handler, options);\n        }\n        const options = handlerOrOptions;\n        return this.watchWithAsyncGenerator(sql, parameters, options);\n    }\n    /**\n     * Execute a read query every time the source tables are modified.\n     * Use {@link SQLWatchOptions.throttleMs} to specify the minimum interval between queries.\n     * Source tables are automatically detected using `EXPLAIN QUERY PLAN`.\n     *\n     * Note that the `onChange` callback member of the handler is required.\n     */\n    watchWithCallback(sql, parameters, handler, options) {\n        const { onResult, onError = this.options.logger?.error } = handler ?? {};\n        if (!onResult) {\n            throw new Error('onResult is required');\n        }\n        (async () => {\n            try {\n                // Fetch initial data\n                onResult(await this.executeReadOnly(sql, parameters));\n                const resolvedTables = await this.resolveTables(sql, parameters, options);\n                this.onChangeWithCallback({ onChange: async () => onResult(await this.executeReadOnly(sql, parameters)), onError }, {\n                    ...(options ?? {}),\n                    tables: resolvedTables\n                });\n            }\n            catch (error) {\n                onError?.(error);\n            }\n        })();\n    }\n    /**\n     * Execute a read query every time the source tables are modified.\n     * Use {@link SQLWatchOptions.throttleMs} to specify the minimum interval between queries.\n     * Source tables are automatically detected using `EXPLAIN QUERY PLAN`.\n     */\n    watchWithAsyncGenerator(sql, parameters, options) {\n        return new EventIterator((eventOptions) => {\n            (async () => {\n                // Fetch initial data\n                eventOptions.push(await this.executeReadOnly(sql, parameters));\n                const resolvedTables = await this.resolveTables(sql, parameters, options);\n                for await (const event of this.onChangeWithAsyncGenerator({\n                    ...(options ?? {}),\n                    tables: resolvedTables\n                })) {\n                    eventOptions.push(await this.executeReadOnly(sql, parameters));\n                }\n            })();\n        });\n    }\n    async resolveTables(sql, parameters, options) {\n        const resolvedTables = options?.tables ? [...options.tables] : [];\n        if (!options?.tables) {\n            const explained = await this.getAll(`EXPLAIN ${sql}`, parameters);\n            const rootPages = explained\n                .filter((row) => row.opcode == 'OpenRead' && row.p3 == 0 && typeof row.p2 == 'number')\n                .map((row) => row.p2);\n            const tables = await this.getAll(`SELECT DISTINCT tbl_name FROM sqlite_master WHERE rootpage IN (SELECT json_each.value FROM json_each(?))`, [JSON.stringify(rootPages)]);\n            for (let table of tables) {\n                resolvedTables.push(table.tbl_name.replace(POWERSYNC_TABLE_MATCH, ''));\n            }\n        }\n        return resolvedTables;\n    }\n    onChange(handlerOrOptions, maybeOptions) {\n        if (handlerOrOptions && typeof handlerOrOptions === 'object' && 'onChange' in handlerOrOptions) {\n            const handler = handlerOrOptions;\n            const options = maybeOptions;\n            return this.onChangeWithCallback(handler, options);\n        }\n        const options = handlerOrOptions;\n        return this.onChangeWithAsyncGenerator(options);\n    }\n    /**\n    * Invoke the provided callback on any changes to any of the specified tables.\n    *\n    * This is preferred over {@link watchWithCallback} when multiple queries need to be performed\n    * together when data is changed.\n    *\n    * Note that the `onChange` callback member of the handler is required.\n    *\n    * Returns dispose function to stop watching.\n    */\n    onChangeWithCallback(handler, options) {\n        const { onChange, onError = this.options.logger?.error } = handler ?? {};\n        if (!onChange) {\n            throw new Error('onChange is required');\n        }\n        const resolvedOptions = options ?? {};\n        const watchedTables = new Set(resolvedOptions.tables ?? []);\n        const changedTables = new Set();\n        const throttleMs = resolvedOptions.throttleMs ?? DEFAULT_WATCH_THROTTLE_MS;\n        const flushTableUpdates = throttle(() => this.handleTableChanges(changedTables, watchedTables, (intersection) => {\n            onChange({ changedTables: intersection });\n        }), throttleMs, { leading: false, trailing: true });\n        const dispose = this.database.registerListener({\n            tablesUpdated: async (update) => {\n                try {\n                    const { rawTableNames } = resolvedOptions;\n                    this.processTableUpdates(update, rawTableNames, changedTables);\n                    flushTableUpdates();\n                }\n                catch (error) {\n                    onError?.(error);\n                }\n            }\n        });\n        resolvedOptions.signal?.addEventListener('abort', () => {\n            dispose();\n        });\n        return () => dispose();\n    }\n    /**\n     * Create a Stream of changes to any of the specified tables.\n     *\n     * This is preferred over {@link watchWithAsyncGenerator} when multiple queries need to be performed\n     * together when data is changed.\n     *\n     * Note, do not declare this as `async *onChange` as it will not work in React Native\n     */\n    onChangeWithAsyncGenerator(options) {\n        const resolvedOptions = options ?? {};\n        return new EventIterator((eventOptions) => {\n            const dispose = this.onChangeWithCallback({\n                onChange: (event) => { eventOptions.push(event); },\n                onError: (error) => { eventOptions.fail(error); }\n            }, options);\n            resolvedOptions.signal?.addEventListener('abort', () => {\n                eventOptions.stop();\n                // Maybe fail?\n            });\n            return () => dispose();\n        });\n    }\n    handleTableChanges(changedTables, watchedTables, onDetectedChanges) {\n        if (changedTables.size > 0) {\n            const intersection = Array.from(changedTables.values()).filter((change) => watchedTables.has(change));\n            if (intersection.length) {\n                onDetectedChanges(intersection);\n            }\n        }\n        changedTables.clear();\n    }\n    processTableUpdates(updateNotification, rawTableNames, changedTables) {\n        const tables = isBatchedUpdateNotification(updateNotification) ? updateNotification.tables : [updateNotification.table];\n        const filteredTables = rawTableNames ? tables : tables.filter((t) => !!t.match(POWERSYNC_TABLE_MATCH));\n        if (!filteredTables.length) {\n            return;\n        }\n        // Remove any PowerSync table prefixes if necessary\n        const mappedTableNames = rawTableNames\n            ? filteredTables\n            : filteredTables.map((t) => t.replace(POWERSYNC_TABLE_MATCH, ''));\n        for (let table of mappedTableNames) {\n            changedTables.add(table);\n        }\n    }\n    /**\n     * @ignore\n     */\n    async executeReadOnly(sql, params) {\n        await this.waitForReady();\n        return this.database.readLock((tx) => tx.execute(sql, params));\n    }\n}\n//# sourceMappingURL=AbstractPowerSyncDatabase.js.map","import Logger from 'js-logger';\nexport class AbstractPowerSyncDatabaseOpenFactory {\n    options;\n    constructor(options) {\n        this.options = options;\n        options.logger = options.logger ?? Logger.get(`PowerSync ${this.options.dbFilename}`);\n    }\n    /**\n     * Schema used for the local database.\n     */\n    get schema() {\n        return this.options.schema;\n    }\n    generateOptions() {\n        return {\n            database: this.openDB(),\n            ...this.options\n        };\n    }\n    getInstance() {\n        const options = this.generateOptions();\n        return this.generateInstance(options);\n    }\n}\n//# sourceMappingURL=AbstractPowerSyncOpenFactory.js.map","export {};\n//# sourceMappingURL=PowerSyncBackendConnector.js.map","export {};\n//# sourceMappingURL=PowerSyncCredentials.js.map","export var PSInternalTable;\n(function (PSInternalTable) {\n    PSInternalTable[\"DATA\"] = \"ps_data\";\n    PSInternalTable[\"CRUD\"] = \"ps_crud\";\n    PSInternalTable[\"BUCKETS\"] = \"ps_buckets\";\n    PSInternalTable[\"OPLOG\"] = \"ps_oplog\";\n})(PSInternalTable || (PSInternalTable = {}));\n//# sourceMappingURL=BucketStorageAdapter.js.map","/**\n * A batch of client-side changes.\n */\nexport class CrudBatch {\n    crud;\n    haveMore;\n    complete;\n    constructor(\n    /**\n     * List of client-side changes.\n     */\n    crud, \n    /**\n     * true if there are more changes in the local queue.\n     */\n    haveMore, \n    /**\n     * Call to remove the changes from the local queue, once successfully uploaded.\n     */\n    complete) {\n        this.crud = crud;\n        this.haveMore = haveMore;\n        this.complete = complete;\n    }\n}\n//# sourceMappingURL=CrudBatch.js.map","/**\n * Type of local change.\n */\nexport var UpdateType;\n(function (UpdateType) {\n    /** Insert or replace existing row. All non-null columns are included in the data. Generated by INSERT statements. */\n    UpdateType[\"PUT\"] = \"PUT\";\n    /** Update existing row. Contains the id, and value of each changed column. Generated by UPDATE statements. */\n    UpdateType[\"PATCH\"] = \"PATCH\";\n    /** Delete existing row. Contains the id. Generated by DELETE statements. */\n    UpdateType[\"DELETE\"] = \"DELETE\";\n})(UpdateType || (UpdateType = {}));\n/**\n * A single client-side change.\n */\nexport class CrudEntry {\n    /**\n     * Auto-incrementing client-side id.\n     */\n    clientId;\n    /**\n     * ID of the changed row.\n     */\n    id;\n    /**\n     * Type of change.\n     */\n    op;\n    /**\n     * Data associated with the change.\n     */\n    opData;\n    /**\n     * Table that contained the change.\n     */\n    table;\n    /**\n     * Auto-incrementing transaction id. This is the same for all operations within the same transaction.\n     */\n    transactionId;\n    static fromRow(dbRow) {\n        const data = JSON.parse(dbRow.data);\n        return new CrudEntry(parseInt(dbRow.id), data.op, data.type, data.id, dbRow.tx_id, data.data);\n    }\n    constructor(clientId, op, table, id, transactionId, opData) {\n        this.clientId = clientId;\n        this.id = id;\n        this.op = op;\n        this.opData = opData;\n        this.table = table;\n        this.transactionId = transactionId;\n    }\n    /**\n     * Converts the change to JSON format.\n     */\n    toJSON() {\n        return {\n            op_id: this.clientId,\n            op: this.op,\n            type: this.table,\n            id: this.id,\n            tx_id: this.transactionId,\n            data: this.opData\n        };\n    }\n    equals(entry) {\n        return JSON.stringify(this.toComparisonArray()) == JSON.stringify(entry.toComparisonArray());\n    }\n    /**\n     * The hash code for this object.\n     * @deprecated This should not be necessary in the JS SDK.\n     * Use the  @see CrudEntry#equals method instead.\n     * TODO remove in the next major release.\n     */\n    hashCode() {\n        return JSON.stringify(this.toComparisonArray());\n    }\n    /**\n     * Generates an array for use in deep comparison operations\n     */\n    toComparisonArray() {\n        return [this.transactionId, this.clientId, this.op, this.table, this.id, this.opData];\n    }\n}\n//# sourceMappingURL=CrudEntry.js.map","import { CrudBatch } from './CrudBatch';\nexport class CrudTransaction extends CrudBatch {\n    crud;\n    complete;\n    transactionId;\n    constructor(\n    /**\n     * List of client-side changes.\n     */\n    crud, \n    /**\n     * Call to remove the changes from the local queue, once successfully uploaded.\n     */\n    complete, \n    /**\n     * If null, this contains a list of changes recorded without an explicit transaction associated.\n     */\n    transactionId) {\n        super(crud, false, complete);\n        this.crud = crud;\n        this.complete = complete;\n        this.transactionId = transactionId;\n    }\n}\n//# sourceMappingURL=CrudTransaction.js.map","export var OpTypeEnum;\n(function (OpTypeEnum) {\n    OpTypeEnum[OpTypeEnum[\"CLEAR\"] = 1] = \"CLEAR\";\n    OpTypeEnum[OpTypeEnum[\"MOVE\"] = 2] = \"MOVE\";\n    OpTypeEnum[OpTypeEnum[\"PUT\"] = 3] = \"PUT\";\n    OpTypeEnum[OpTypeEnum[\"REMOVE\"] = 4] = \"REMOVE\";\n})(OpTypeEnum || (OpTypeEnum = {}));\n/**\n * Used internally for sync buckets.\n */\nexport class OpType {\n    value;\n    static fromJSON(jsonValue) {\n        return new OpType(OpTypeEnum[jsonValue]);\n    }\n    constructor(value) {\n        this.value = value;\n    }\n    toJSON() {\n        return Object.entries(OpTypeEnum).find(([, value]) => value === this.value)[0];\n    }\n}\n//# sourceMappingURL=OpType.js.map","import { OpType } from './OpType';\nexport class OplogEntry {\n    op_id;\n    op;\n    checksum;\n    subkey;\n    object_type;\n    object_id;\n    data;\n    static fromRow(row) {\n        return new OplogEntry(row.op_id, OpType.fromJSON(row.op), row.checksum, typeof row.subkey == 'string' ? row.subkey : JSON.stringify(row.subkey), row.object_type, row.object_id, row.data);\n    }\n    constructor(op_id, op, checksum, subkey, object_type, object_id, data) {\n        this.op_id = op_id;\n        this.op = op;\n        this.checksum = checksum;\n        this.subkey = subkey;\n        this.object_type = object_type;\n        this.object_id = object_id;\n        this.data = data;\n    }\n    toJSON() {\n        return {\n            op_id: this.op_id,\n            op: this.op.toJSON(),\n            object_type: this.object_type,\n            object_id: this.object_id,\n            checksum: this.checksum,\n            data: this.data,\n            subkey: JSON.stringify(this.subkey)\n        };\n    }\n}\n//# sourceMappingURL=OplogEntry.js.map","import { v4 as uuid } from 'uuid';\nimport { extractTableUpdates } from '../../../db/DBAdapter';\nimport { PSInternalTable } from './BucketStorageAdapter';\nimport { OpTypeEnum } from './OpType';\nimport { CrudEntry } from './CrudEntry';\nimport Logger from 'js-logger';\nimport { BaseObserver } from '../../../utils/BaseObserver';\nconst COMPACT_OPERATION_INTERVAL = 1_000;\nexport class SqliteBucketStorage extends BaseObserver {\n    db;\n    mutex;\n    logger;\n    static MAX_OP_ID = '9223372036854775807';\n    tableNames;\n    pendingBucketDeletes;\n    _hasCompletedSync;\n    updateListener;\n    /**\n     * Count up, and do a compact on startup.\n     */\n    compactCounter = COMPACT_OPERATION_INTERVAL;\n    constructor(db, mutex, logger = Logger.get('SqliteBucketStorage')) {\n        super();\n        this.db = db;\n        this.mutex = mutex;\n        this.logger = logger;\n        this._hasCompletedSync = false;\n        this.pendingBucketDeletes = true;\n        this.tableNames = new Set();\n        this.updateListener = db.registerListener({\n            tablesUpdated: (update) => {\n                const tables = extractTableUpdates(update);\n                if (tables.includes(PSInternalTable.CRUD)) {\n                    this.iterateListeners((l) => l.crudUpdate?.());\n                }\n            }\n        });\n    }\n    async init() {\n        this._hasCompletedSync = false;\n        const existingTableRows = await this.db.execute(`SELECT name FROM sqlite_master WHERE type='table' AND name GLOB 'ps_data_*'`);\n        for (const row of existingTableRows.rows?._array ?? []) {\n            this.tableNames.add(row.name);\n        }\n    }\n    async dispose() {\n        this.updateListener?.();\n    }\n    getMaxOpId() {\n        return SqliteBucketStorage.MAX_OP_ID;\n    }\n    /**\n     * Reset any caches.\n     */\n    startSession() { }\n    async getBucketStates() {\n        const result = await this.db.execute('SELECT name as bucket, cast(last_op as TEXT) as op_id FROM ps_buckets WHERE pending_delete = 0');\n        return result.rows?._array ?? [];\n    }\n    async saveSyncData(batch) {\n        await this.writeTransaction(async (tx) => {\n            let count = 0;\n            for (const b of batch.buckets) {\n                const result = await tx.execute('INSERT INTO powersync_operations(op, data) VALUES(?, ?)', [\n                    'save',\n                    JSON.stringify({ buckets: [b.toJSON()] })\n                ]);\n                this.logger.debug('saveSyncData', JSON.stringify(result));\n                count += b.data.length;\n            }\n            this.compactCounter += count;\n        });\n    }\n    async removeBuckets(buckets) {\n        for (const bucket of buckets) {\n            await this.deleteBucket(bucket);\n        }\n    }\n    /**\n     * Mark a bucket for deletion.\n     */\n    async deleteBucket(bucket) {\n        // Delete a bucket, but allow it to be re-created.\n        // To achieve this, we rename the bucket to a new temp name, and change all ops to remove.\n        // By itself, this new bucket would ensure that the previous objects are deleted if they contain no more references.\n        // If the old bucket is re-added, this new bucket would have no effect.\n        const newName = `$delete_${bucket}_${uuid()}`;\n        this.logger.debug('Deleting bucket', bucket);\n        // This\n        await this.writeTransaction(async (tx) => {\n            await tx.execute(`UPDATE ps_oplog SET op=${OpTypeEnum.REMOVE}, data=NULL WHERE op=${OpTypeEnum.PUT} AND superseded=0 AND bucket=?`, [bucket]);\n            // Rename bucket\n            await tx.execute('UPDATE ps_oplog SET bucket=? WHERE bucket=?', [newName, bucket]);\n            await tx.execute('DELETE FROM ps_buckets WHERE name = ?', [bucket]);\n            await tx.execute('INSERT INTO ps_buckets(name, pending_delete, last_op) SELECT ?, 1, IFNULL(MAX(op_id), 0) FROM ps_oplog WHERE bucket = ?', [newName, newName]);\n        });\n        this.logger.debug('done deleting bucket');\n        this.pendingBucketDeletes = true;\n    }\n    async hasCompletedSync() {\n        if (this._hasCompletedSync) {\n            return true;\n        }\n        const r = await this.db.execute(`SELECT name, last_applied_op FROM ps_buckets WHERE last_applied_op > 0 LIMIT 1`);\n        const completed = !!r.rows?.length;\n        if (completed) {\n            this._hasCompletedSync = true;\n        }\n        return completed;\n    }\n    async syncLocalDatabase(checkpoint) {\n        const r = await this.validateChecksums(checkpoint);\n        if (!r.checkpointValid) {\n            this.logger.error('Checksums failed for', r.checkpointFailures);\n            for (const b of r.checkpointFailures ?? []) {\n                await this.deleteBucket(b);\n            }\n            return { ready: false, checkpointValid: false, checkpointFailures: r.checkpointFailures };\n        }\n        const bucketNames = checkpoint.buckets.map((b) => b.bucket);\n        await this.writeTransaction(async (tx) => {\n            await tx.execute(`UPDATE ps_buckets SET last_op = ? WHERE name IN (SELECT json_each.value FROM json_each(?))`, [\n                checkpoint.last_op_id,\n                JSON.stringify(bucketNames)\n            ]);\n            if (checkpoint.write_checkpoint) {\n                await tx.execute(\"UPDATE ps_buckets SET last_op = ? WHERE name = '$local'\", [checkpoint.write_checkpoint]);\n            }\n        });\n        const valid = await this.updateObjectsFromBuckets(checkpoint);\n        if (!valid) {\n            this.logger.debug('Not at a consistent checkpoint - cannot update local db');\n            return { ready: false, checkpointValid: true };\n        }\n        await this.forceCompact();\n        return {\n            ready: true,\n            checkpointValid: true\n        };\n    }\n    /**\n     * Atomically update the local state to the current checkpoint.\n     *\n     * This includes creating new tables, dropping old tables, and copying data over from the oplog.\n     */\n    async updateObjectsFromBuckets(checkpoint) {\n        return this.writeTransaction(async (tx) => {\n            const { insertId: result } = await tx.execute('INSERT INTO powersync_operations(op, data) VALUES(?, ?)', [\n                'sync_local',\n                ''\n            ]);\n            return result == 1;\n        });\n    }\n    async validateChecksums(checkpoint) {\n        const rs = await this.db.execute('SELECT powersync_validate_checkpoint(?) as result', [JSON.stringify(checkpoint)]);\n        const resultItem = rs.rows?.item(0);\n        this.logger.debug('validateChecksums result item', resultItem);\n        if (!resultItem) {\n            return {\n                checkpointValid: false,\n                ready: false,\n                checkpointFailures: []\n            };\n        }\n        const result = JSON.parse(resultItem['result']);\n        if (result['valid']) {\n            return { ready: true, checkpointValid: true };\n        }\n        else {\n            return {\n                checkpointValid: false,\n                ready: false,\n                checkpointFailures: result['failed_buckets']\n            };\n        }\n    }\n    /**\n     * Force a compact, for tests.\n     */\n    async forceCompact() {\n        this.compactCounter = COMPACT_OPERATION_INTERVAL;\n        this.pendingBucketDeletes = true;\n        await this.autoCompact();\n    }\n    async autoCompact() {\n        await this.deletePendingBuckets();\n        await this.clearRemoveOps();\n    }\n    async deletePendingBuckets() {\n        if (this.pendingBucketDeletes !== false) {\n            await this.writeTransaction(async (tx) => {\n                await tx.execute('DELETE FROM ps_oplog WHERE bucket IN (SELECT name FROM ps_buckets WHERE pending_delete = 1 AND last_applied_op = last_op AND last_op >= target_op)');\n                await tx.execute('DELETE FROM ps_buckets WHERE pending_delete = 1 AND last_applied_op = last_op AND last_op >= target_op');\n            });\n            // Executed once after start-up, and again when there are pending deletes.\n            this.pendingBucketDeletes = false;\n        }\n    }\n    async clearRemoveOps() {\n        if (this.compactCounter < COMPACT_OPERATION_INTERVAL) {\n            return;\n        }\n        await this.writeTransaction(async (tx) => {\n            await tx.execute('INSERT INTO powersync_operations(op, data) VALUES (?, ?)', ['clear_remove_ops', '']);\n        });\n        this.compactCounter = 0;\n    }\n    async updateLocalTarget(cb) {\n        const rs1 = await this.db.execute(\"SELECT target_op FROM ps_buckets WHERE name = '$local' AND target_op = ?\", [\n            SqliteBucketStorage.MAX_OP_ID\n        ]);\n        if (!rs1.rows?.length) {\n            // Nothing to update\n            return false;\n        }\n        const rs = await this.db.execute(\"SELECT seq FROM sqlite_sequence WHERE name = 'ps_crud'\");\n        if (!rs.rows?.length) {\n            // Nothing to update\n            return false;\n        }\n        const seqBefore = rs.rows?.item(0)['seq'];\n        const opId = await cb();\n        this.logger.debug(`[updateLocalTarget] Updating target to checkpoint ${opId}`);\n        return this.writeTransaction(async (tx) => {\n            const anyData = await tx.execute('SELECT 1 FROM ps_crud LIMIT 1');\n            if (anyData.rows?.length) {\n                // if isNotEmpty\n                this.logger.debug('updateLocalTarget', 'ps crud is not empty');\n                return false;\n            }\n            const rs = await tx.execute(\"SELECT seq FROM sqlite_sequence WHERE name = 'ps_crud'\");\n            if (!rs.rows?.length) {\n                // assert isNotEmpty\n                throw new Error('SQlite Sequence should not be empty');\n            }\n            const seqAfter = rs.rows?.item(0)['seq'];\n            this.logger.debug('seqAfter', JSON.stringify(rs.rows?.item(0)));\n            if (seqAfter != seqBefore) {\n                this.logger.debug('seqAfter != seqBefore', seqAfter, seqBefore);\n                // New crud data may have been uploaded since we got the checkpoint. Abort.\n                return false;\n            }\n            const response = await tx.execute(\"UPDATE ps_buckets SET target_op = ? WHERE name='$local'\", [opId]);\n            this.logger.debug(['[updateLocalTarget] Response from updating target_op ', JSON.stringify(response)]);\n            return true;\n        });\n    }\n    async hasCrud() {\n        const anyData = await this.db.execute('SELECT 1 FROM ps_crud LIMIT 1');\n        return !!anyData.rows?.length;\n    }\n    /**\n     * Get a batch of objects to send to the server.\n     * When the objects are successfully sent to the server, call .complete()\n     */\n    async getCrudBatch(limit = 100) {\n        if (!(await this.hasCrud())) {\n            return null;\n        }\n        const crudResult = await this.db.execute('SELECT * FROM ps_crud ORDER BY id ASC LIMIT ?', [limit]);\n        const all = [];\n        for (const row of crudResult.rows?._array ?? []) {\n            all.push(CrudEntry.fromRow(row));\n        }\n        if (all.length === 0) {\n            return null;\n        }\n        const last = all[all.length - 1];\n        return {\n            crud: all,\n            haveMore: true,\n            complete: async (writeCheckpoint) => {\n                return this.writeTransaction(async (tx) => {\n                    await tx.execute('DELETE FROM ps_crud WHERE id <= ?', [last.clientId]);\n                    if (writeCheckpoint) {\n                        const crudResult = await tx.execute('SELECT 1 FROM ps_crud LIMIT 1');\n                        if (crudResult.rows?.length) {\n                            await tx.execute(\"UPDATE ps_buckets SET target_op = ? WHERE name='$local'\", [writeCheckpoint]);\n                        }\n                    }\n                    else {\n                        await tx.execute(\"UPDATE ps_buckets SET target_op = ? WHERE name='$local'\", [this.getMaxOpId()]);\n                    }\n                });\n            }\n        };\n    }\n    async writeTransaction(callback, options) {\n        return this.db.writeTransaction(callback, options);\n    }\n    /**\n     * Set a target checkpoint.\n     */\n    async setTargetCheckpoint(checkpoint) {\n        // No-op for now\n    }\n}\n//# sourceMappingURL=SqliteBucketStorage.js.map","import { SyncDataBucket } from './SyncDataBucket';\n// TODO JSON\nexport class SyncDataBatch {\n    buckets;\n    static fromJSON(json) {\n        return new SyncDataBatch(json.buckets.map((bucket) => SyncDataBucket.fromRow(bucket)));\n    }\n    constructor(buckets) {\n        this.buckets = buckets;\n    }\n}\n//# sourceMappingURL=SyncDataBatch.js.map","import { OplogEntry } from './OplogEntry';\nexport const MAX_OP_ID = '9223372036854775807';\nexport class SyncDataBucket {\n    bucket;\n    data;\n    has_more;\n    after;\n    next_after;\n    static fromRow(row) {\n        return new SyncDataBucket(row.bucket, row.data.map((entry) => OplogEntry.fromRow(entry)), row.has_more ?? false, row.after, row.next_after);\n    }\n    constructor(bucket, data, \n    /**\n     * True if the response does not contain all the data for this bucket, and another request must be made.\n     */\n    has_more, \n    /**\n     * The `after` specified in the request.\n     */\n    after, \n    /**\n     * Use this for the next request.\n     */\n    next_after) {\n        this.bucket = bucket;\n        this.data = data;\n        this.has_more = has_more;\n        this.after = after;\n        this.next_after = next_after;\n    }\n    toJSON() {\n        return {\n            bucket: this.bucket,\n            has_more: this.has_more,\n            after: this.after,\n            next_after: this.next_after,\n            data: this.data.map((entry) => entry.toJSON())\n        };\n    }\n}\n//# sourceMappingURL=SyncDataBucket.js.map","import Logger from 'js-logger';\n// Refresh at least 30 sec before it expires\nconst REFRESH_CREDENTIALS_SAFETY_PERIOD_MS = 30_000;\nexport const DEFAULT_REMOTE_LOGGER = Logger.get('PowerSyncRemote');\nexport class AbstractRemote {\n    connector;\n    logger;\n    credentials = null;\n    constructor(connector, logger = DEFAULT_REMOTE_LOGGER) {\n        this.connector = connector;\n        this.logger = logger;\n    }\n    async getCredentials() {\n        const { expiresAt } = this.credentials ?? {};\n        if (expiresAt && expiresAt > new Date(new Date().valueOf() + REFRESH_CREDENTIALS_SAFETY_PERIOD_MS)) {\n            return this.credentials;\n        }\n        this.credentials = await this.connector.fetchCredentials();\n        return this.credentials;\n    }\n    async buildRequest(path) {\n        const credentials = await this.getCredentials();\n        if (credentials != null && (credentials.endpoint == null || credentials.endpoint == '')) {\n            throw new Error('PowerSync endpoint not configured');\n        }\n        else if (credentials?.token == null || credentials?.token == '') {\n            const error = new Error(`Not signed in`);\n            error.status = 401;\n            throw error;\n        }\n        return {\n            url: credentials.endpoint + path,\n            headers: {\n                'content-type': 'application/json',\n                Authorization: `Token ${credentials.token}`\n            }\n        };\n    }\n    isAvailable() {\n        return true;\n    }\n}\n//# sourceMappingURL=AbstractRemote.js.map","import throttle from 'lodash/throttle';\nimport Logger from 'js-logger';\nimport { isStreamingKeepalive, isStreamingSyncCheckpoint, isStreamingSyncCheckpointComplete, isStreamingSyncCheckpointDiff, isStreamingSyncData } from './streaming-sync-types';\nimport ndjsonStream from 'can-ndjson-stream';\nimport { SyncStatus } from '../../../db/crud/SyncStatus';\nimport { SyncDataBucket } from '../bucket/SyncDataBucket';\nimport { BaseObserver } from '../../../utils/BaseObserver';\nexport var LockType;\n(function (LockType) {\n    LockType[\"CRUD\"] = \"crud\";\n    LockType[\"SYNC\"] = \"sync\";\n})(LockType || (LockType = {}));\nexport const DEFAULT_CRUD_UPLOAD_THROTTLE_MS = 1000;\nexport const DEFAULT_STREAMING_SYNC_OPTIONS = {\n    retryDelayMs: 5000,\n    logger: Logger.get('PowerSyncStream'),\n    crudUploadThrottleMs: DEFAULT_CRUD_UPLOAD_THROTTLE_MS\n};\nexport class AbstractStreamingSyncImplementation extends BaseObserver {\n    _lastSyncedAt;\n    options;\n    abortController;\n    crudUpdateListener;\n    syncStatus;\n    triggerCrudUpload;\n    constructor(options) {\n        super();\n        this.options = { ...DEFAULT_STREAMING_SYNC_OPTIONS, ...options };\n        this.syncStatus = new SyncStatus({\n            connected: false,\n            lastSyncedAt: undefined,\n            dataFlow: {\n                uploading: false,\n                downloading: false\n            }\n        });\n        this.abortController = null;\n        this.triggerCrudUpload = throttle(() => {\n            if (!this.syncStatus.connected || this.syncStatus.dataFlowStatus.uploading) {\n                return;\n            }\n            this._uploadAllCrud();\n        }, this.options.crudUploadThrottleMs, { trailing: true });\n    }\n    async waitForReady() { }\n    waitForStatus(status) {\n        return new Promise((resolve) => {\n            const l = this.registerListener({\n                statusChanged: (updatedStatus) => {\n                    /**\n                     * Match only the partial status options provided in the\n                     * matching status\n                     */\n                    const matchPartialObject = (compA, compB) => {\n                        return Object.entries(compA).every(([key, value]) => {\n                            const comparisonBValue = compB[key];\n                            if (typeof value == 'object' && typeof comparisonBValue == 'object') {\n                                return matchPartialObject(value, comparisonBValue);\n                            }\n                            return value == comparisonBValue;\n                        });\n                    };\n                    if (matchPartialObject(status, updatedStatus.toJSON())) {\n                        resolve();\n                        l?.();\n                    }\n                }\n            });\n        });\n    }\n    get lastSyncedAt() {\n        const lastSynced = this.syncStatus.lastSyncedAt;\n        return lastSynced && new Date(lastSynced);\n    }\n    get isConnected() {\n        return this.syncStatus.connected;\n    }\n    get logger() {\n        return this.options.logger;\n    }\n    async dispose() {\n        this.crudUpdateListener?.();\n        this.crudUpdateListener = undefined;\n    }\n    async hasCompletedSync() {\n        return this.options.adapter.hasCompletedSync();\n    }\n    async getWriteCheckpoint() {\n        const response = await this.options.remote.get('/write-checkpoint2.json');\n        return response['data']['write_checkpoint'];\n    }\n    async _uploadAllCrud() {\n        return this.obtainLock({\n            type: LockType.CRUD,\n            callback: async () => {\n                this.updateSyncStatus({\n                    dataFlow: {\n                        uploading: true\n                    }\n                });\n                while (true) {\n                    try {\n                        const done = await this.uploadCrudBatch();\n                        if (done) {\n                            break;\n                        }\n                    }\n                    catch (ex) {\n                        this.updateSyncStatus({\n                            connected: false,\n                            dataFlow: {\n                                uploading: false\n                            }\n                        });\n                        await this.delayRetry();\n                        break;\n                    }\n                    finally {\n                        this.updateSyncStatus({\n                            dataFlow: {\n                                uploading: false\n                            }\n                        });\n                    }\n                }\n            }\n        });\n    }\n    async uploadCrudBatch() {\n        const hasCrud = await this.options.adapter.hasCrud();\n        if (hasCrud) {\n            await this.options.uploadCrud();\n            return false;\n        }\n        else {\n            await this.options.adapter.updateLocalTarget(() => this.getWriteCheckpoint());\n            return true;\n        }\n    }\n    async connect() {\n        if (this.abortController) {\n            await this.disconnect();\n        }\n        this.abortController = new AbortController();\n        this.streamingSync(this.abortController.signal);\n        return this.waitForStatus({ connected: true });\n    }\n    async disconnect() {\n        if (!this.abortController) {\n            throw new Error('Disconnect not possible');\n        }\n        this.abortController.abort('Disconnected');\n        this.abortController = null;\n        this.updateSyncStatus({ connected: false });\n    }\n    /**\n     * @deprecated use [connect instead]\n     */\n    async streamingSync(signal) {\n        if (!signal) {\n            this.abortController = new AbortController();\n            signal = this.abortController.signal;\n        }\n        /**\n         * Listen for CRUD updates and trigger upstream uploads\n         */\n        this.crudUpdateListener = this.options.adapter.registerListener({\n            crudUpdate: () => this.triggerCrudUpload()\n        });\n        /**\n         * Create a new abort controller which aborts items downstream.\n         * This is needed to close any previous connections on exception.\n         */\n        let nestedAbortController = new AbortController();\n        signal.addEventListener('abort', () => {\n            nestedAbortController.abort();\n            this.crudUpdateListener?.();\n            this.crudUpdateListener = undefined;\n            this.updateSyncStatus({\n                connected: false,\n                dataFlow: {\n                    downloading: false\n                }\n            });\n        });\n        while (true) {\n            try {\n                if (signal?.aborted) {\n                    break;\n                }\n                const { retry } = await this.streamingSyncIteration(nestedAbortController.signal);\n                if (!retry) {\n                    break;\n                }\n                // Continue immediately\n            }\n            catch (ex) {\n                this.logger.error(ex);\n                this.updateSyncStatus({\n                    connected: false\n                });\n                // On error, wait a little before retrying\n                await this.delayRetry();\n            }\n            finally {\n                // Abort any open network requests. Create a new nested controller for retry.\n                nestedAbortController.abort();\n                nestedAbortController = new AbortController();\n            }\n        }\n        // Mark as disconnected if here\n        if (this.abortController) {\n            await this.disconnect();\n        }\n    }\n    async streamingSyncIteration(signal, progress) {\n        return await this.obtainLock({\n            type: LockType.SYNC,\n            signal,\n            callback: async () => {\n                this.logger.debug('Streaming sync iteration started');\n                this.options.adapter.startSession();\n                const bucketEntries = await this.options.adapter.getBucketStates();\n                const initialBuckets = new Map();\n                bucketEntries.forEach((entry) => {\n                    initialBuckets.set(entry.bucket, entry.op_id);\n                });\n                const req = Array.from(initialBuckets.entries()).map(([bucket, after]) => ({\n                    name: bucket,\n                    after: after\n                }));\n                // These are compared by reference\n                let targetCheckpoint = null;\n                let validatedCheckpoint = null;\n                let appliedCheckpoint = null;\n                let bucketSet = new Set(initialBuckets.keys());\n                for await (const line of this.streamingSyncRequest({\n                    buckets: req,\n                    include_checksum: true,\n                    raw_data: true\n                }, signal)) {\n                    // A connection is active and messages are being received\n                    if (!this.syncStatus.connected) {\n                        // There is a connection now\n                        Promise.resolve().then(() => this.triggerCrudUpload());\n                        this.updateSyncStatus({\n                            connected: true\n                        });\n                    }\n                    if (isStreamingSyncCheckpoint(line)) {\n                        targetCheckpoint = line.checkpoint;\n                        const bucketsToDelete = new Set(bucketSet);\n                        const newBuckets = new Set();\n                        for (const checksum of line.checkpoint.buckets) {\n                            newBuckets.add(checksum.bucket);\n                            bucketsToDelete.delete(checksum.bucket);\n                        }\n                        if (bucketsToDelete.size > 0) {\n                            this.logger.debug('Removing buckets', [...bucketsToDelete]);\n                        }\n                        bucketSet = newBuckets;\n                        await this.options.adapter.removeBuckets([...bucketsToDelete]);\n                        await this.options.adapter.setTargetCheckpoint(targetCheckpoint);\n                    }\n                    else if (isStreamingSyncCheckpointComplete(line)) {\n                        this.logger.debug('Checkpoint complete', targetCheckpoint);\n                        const result = await this.options.adapter.syncLocalDatabase(targetCheckpoint);\n                        if (!result.checkpointValid) {\n                            // This means checksums failed. Start again with a new checkpoint.\n                            // TODO: better back-off\n                            await new Promise((resolve) => setTimeout(resolve, 50));\n                            return { retry: true };\n                        }\n                        else if (!result.ready) {\n                            // Checksums valid, but need more data for a consistent checkpoint.\n                            // Continue waiting.\n                            // landing here the whole time\n                        }\n                        else {\n                            appliedCheckpoint = targetCheckpoint;\n                            this.logger.debug('validated checkpoint', appliedCheckpoint);\n                            this.updateSyncStatus({\n                                connected: true,\n                                lastSyncedAt: new Date(),\n                                dataFlow: {\n                                    downloading: false\n                                }\n                            });\n                        }\n                        validatedCheckpoint = targetCheckpoint;\n                    }\n                    else if (isStreamingSyncCheckpointDiff(line)) {\n                        // TODO: It may be faster to just keep track of the diff, instead of the entire checkpoint\n                        if (targetCheckpoint == null) {\n                            throw new Error('Checkpoint diff without previous checkpoint');\n                        }\n                        const diff = line.checkpoint_diff;\n                        const newBuckets = new Map();\n                        for (const checksum of targetCheckpoint.buckets) {\n                            newBuckets.set(checksum.bucket, checksum);\n                        }\n                        for (const checksum of diff.updated_buckets) {\n                            newBuckets.set(checksum.bucket, checksum);\n                        }\n                        for (const bucket of diff.removed_buckets) {\n                            newBuckets.delete(bucket);\n                        }\n                        const newCheckpoint = {\n                            last_op_id: diff.last_op_id,\n                            buckets: [...newBuckets.values()],\n                            write_checkpoint: diff.write_checkpoint\n                        };\n                        targetCheckpoint = newCheckpoint;\n                        bucketSet = new Set(newBuckets.keys());\n                        const bucketsToDelete = diff.removed_buckets;\n                        if (bucketsToDelete.length > 0) {\n                            this.logger.debug('Remove buckets', bucketsToDelete);\n                        }\n                        await this.options.adapter.removeBuckets(bucketsToDelete);\n                        await this.options.adapter.setTargetCheckpoint(targetCheckpoint);\n                    }\n                    else if (isStreamingSyncData(line)) {\n                        const { data } = line;\n                        this.updateSyncStatus({\n                            dataFlow: {\n                                downloading: true\n                            }\n                        });\n                        await this.options.adapter.saveSyncData({ buckets: [SyncDataBucket.fromRow(data)] });\n                    }\n                    else if (isStreamingKeepalive(line)) {\n                        const remaining_seconds = line.token_expires_in;\n                        if (remaining_seconds == 0) {\n                            // Connection would be closed automatically right after this\n                            this.logger.debug('Token expiring; reconnect');\n                            return { retry: true };\n                        }\n                        this.triggerCrudUpload();\n                    }\n                    else {\n                        this.logger.debug('Sync complete');\n                        if (targetCheckpoint === appliedCheckpoint) {\n                            this.updateSyncStatus({\n                                connected: true,\n                                lastSyncedAt: new Date()\n                            });\n                        }\n                        else if (validatedCheckpoint === targetCheckpoint) {\n                            const result = await this.options.adapter.syncLocalDatabase(targetCheckpoint);\n                            if (!result.checkpointValid) {\n                                // This means checksums failed. Start again with a new checkpoint.\n                                // TODO: better back-off\n                                await new Promise((resolve) => setTimeout(resolve, 50));\n                                return { retry: false };\n                            }\n                            else if (!result.ready) {\n                                // Checksums valid, but need more data for a consistent checkpoint.\n                                // Continue waiting.\n                            }\n                            else {\n                                appliedCheckpoint = targetCheckpoint;\n                                this.updateSyncStatus({\n                                    connected: true,\n                                    lastSyncedAt: new Date(),\n                                    dataFlow: {\n                                        downloading: false\n                                    }\n                                });\n                            }\n                        }\n                    }\n                    progress?.();\n                }\n                this.logger.debug('Stream input empty');\n                // Connection closed. Likely due to auth issue.\n                return { retry: true };\n            }\n        });\n    }\n    async *streamingSyncRequest(req, signal) {\n        const body = await this.options.remote.postStreaming('/sync/stream', req, {}, signal);\n        const stream = ndjsonStream(body);\n        const reader = stream.getReader();\n        try {\n            while (true) {\n                // Read from the stream\n                const { done, value } = await reader.read();\n                // Exit if we're done\n                if (done)\n                    return;\n                // Else yield the chunk\n                yield value;\n            }\n        }\n        finally {\n            reader.releaseLock();\n        }\n    }\n    updateSyncStatus(options) {\n        const updatedStatus = new SyncStatus({\n            connected: options.connected ?? this.syncStatus.connected,\n            lastSyncedAt: options.lastSyncedAt ?? this.syncStatus.lastSyncedAt,\n            dataFlow: {\n                ...this.syncStatus.dataFlowStatus,\n                ...options.dataFlow\n            }\n        });\n        if (!this.syncStatus.isEqual(updatedStatus)) {\n            this.syncStatus = updatedStatus;\n            this.iterateListeners((cb) => cb.statusChanged?.(updatedStatus));\n        }\n    }\n    async delayRetry() {\n        return new Promise((resolve) => setTimeout(resolve, this.options.retryDelayMs));\n    }\n}\n//# sourceMappingURL=AbstractStreamingSyncImplementation.js.map","export function isStreamingSyncData(line) {\n    return line.data != null;\n}\nexport function isStreamingKeepalive(line) {\n    return line.token_expires_in != null;\n}\nexport function isStreamingSyncCheckpoint(line) {\n    return line.checkpoint != null;\n}\nexport function isStreamingSyncCheckpointComplete(line) {\n    return line.checkpoint_complete != null;\n}\nexport function isStreamingSyncCheckpointDiff(line) {\n    return line.checkpoint_diff != null;\n}\nexport function isContinueCheckpointRequest(request) {\n    return (Array.isArray(request.buckets) &&\n        typeof request.checkpoint_token == 'string');\n}\nexport function isSyncNewCheckpointRequest(request) {\n    return typeof request.request_checkpoint == 'object';\n}\n//# sourceMappingURL=streaming-sync-types.js.map","// https://www.sqlite.org/lang_expr.html#castexpr\nexport var ColumnType;\n(function (ColumnType) {\n    ColumnType[\"TEXT\"] = \"TEXT\";\n    ColumnType[\"INTEGER\"] = \"INTEGER\";\n    ColumnType[\"REAL\"] = \"REAL\";\n})(ColumnType || (ColumnType = {}));\nexport class Column {\n    options;\n    constructor(options) {\n        this.options = options;\n    }\n    get name() {\n        return this.options.name;\n    }\n    get type() {\n        return this.options.type;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            type: this.type\n        };\n    }\n}\n//# sourceMappingURL=Column.js.map","/**\n * Set of generic interfaces to allow PowerSync compatibility with\n * different SQLite DB implementations.\n */\n/**\n * Update table operation numbers from SQLite\n */\nexport var RowUpdateType;\n(function (RowUpdateType) {\n    RowUpdateType[RowUpdateType[\"SQLITE_INSERT\"] = 18] = \"SQLITE_INSERT\";\n    RowUpdateType[RowUpdateType[\"SQLITE_DELETE\"] = 9] = \"SQLITE_DELETE\";\n    RowUpdateType[RowUpdateType[\"SQLITE_UPDATE\"] = 23] = \"SQLITE_UPDATE\";\n})(RowUpdateType || (RowUpdateType = {}));\nexport function isBatchedUpdateNotification(update) {\n    return 'tables' in update;\n}\nexport function extractTableUpdates(update) {\n    return isBatchedUpdateNotification(update) ? update.tables : [update.table];\n}\n//# sourceMappingURL=DBAdapter.js.map","export class SyncStatus {\n    options;\n    constructor(options) {\n        this.options = options;\n    }\n    /**\n     * true if currently connected.\n     */\n    get connected() {\n        return this.options.connected ?? false;\n    }\n    /**\n     *  Time that a last sync has fully completed, if any.\n     *  Currently this is reset to null after a restart.\n     */\n    get lastSyncedAt() {\n        return this.options.lastSyncedAt;\n    }\n    /**\n     *  Upload/download status\n     */\n    get dataFlowStatus() {\n        return (this.options.dataFlow ?? {\n            /**\n             * true if actively downloading changes.\n             * This is only true when {@link connected} is also true.\n             */\n            downloading: false,\n            /**\n             * true if uploading changes.\n             */\n            uploading: false\n        });\n    }\n    isEqual(status) {\n        return JSON.stringify(this.options) == JSON.stringify(status.options);\n    }\n    getMessage() {\n        const dataFlow = this.dataFlowStatus;\n        return `SyncStatus<connected: ${this.connected} lastSyncedAt: ${this.lastSyncedAt}. Downloading: ${dataFlow.downloading}. Uploading: ${dataFlow.uploading}`;\n    }\n    toJSON() {\n        return {\n            connected: this.connected,\n            dataFlow: this.dataFlowStatus,\n            lastSyncedAt: this.lastSyncedAt\n        };\n    }\n}\n//# sourceMappingURL=SyncStatus.js.map","export class UploadQueueStats {\n    count;\n    size;\n    constructor(\n    /**\n     * Number of records in the upload queue.\n     */\n    count, \n    /**\n     * Size of the upload queue in bytes.\n     */\n    size = null) {\n        this.count = count;\n        this.size = size;\n    }\n    toString() {\n        if (this.size == null) {\n            return `UploadQueueStats<count:${this.count}>`;\n        }\n        else {\n            return `UploadQueueStats<count: $count size: ${this.size / 1024}kB>`;\n        }\n    }\n}\n//# sourceMappingURL=UploadQueueStatus.js.map","import { IndexedColumn } from './IndexedColumn';\nexport const DEFAULT_INDEX_OPTIONS = {\n    columns: []\n};\nexport class Index {\n    options;\n    static createAscending(options, columnNames) {\n        return new Index({\n            ...options,\n            columns: columnNames.map((name) => IndexedColumn.createAscending(name))\n        });\n    }\n    constructor(options) {\n        this.options = options;\n        this.options = { ...DEFAULT_INDEX_OPTIONS, ...options };\n    }\n    get name() {\n        return this.options.name;\n    }\n    get columns() {\n        return this.options.columns ?? [];\n    }\n    toJSON(table) {\n        return {\n            name: this.name,\n            columns: this.columns.map((c) => c.toJSON(table))\n        };\n    }\n}\n//# sourceMappingURL=Index.js.map","import { ColumnType } from '../Column';\nexport const DEFAULT_INDEX_COLUMN_OPTIONS = {\n    ascending: true\n};\nexport class IndexedColumn {\n    options;\n    static createAscending(column) {\n        return new IndexedColumn({\n            name: column,\n            ascending: true\n        });\n    }\n    constructor(options) {\n        this.options = { ...DEFAULT_INDEX_COLUMN_OPTIONS, ...options };\n    }\n    get name() {\n        return this.options.name;\n    }\n    get ascending() {\n        return this.options.ascending;\n    }\n    toJSON(table) {\n        return {\n            name: this.name,\n            ascending: this.ascending,\n            type: table.columns.find((column) => column.name === this.name)?.type ?? ColumnType.TEXT\n        };\n    }\n}\n//# sourceMappingURL=IndexedColumn.js.map","import { Table as ClassicTable } from './Table';\n/**\n * A schema is a collection of tables. It is used to define the structure of a database.\n */\nexport class Schema {\n    tables;\n    /*\n      Only available when constructing with mapped typed definition columns\n    */\n    types;\n    props;\n    constructor(tables) {\n        this.tables = tables;\n        if (Array.isArray(tables)) {\n            this.tables = tables;\n        }\n        else {\n            this.props = tables;\n            this.tables = this.convertToClassicTables(this.props);\n        }\n    }\n    validate() {\n        for (const table of this.tables) {\n            table.validate();\n        }\n    }\n    toJSON() {\n        return {\n            tables: this.tables.map((t) => t.toJSON())\n        };\n    }\n    convertToClassicTables(props) {\n        return Object.entries(props).map(([name, table]) => {\n            return ClassicTable.createTable(name, table);\n        });\n    }\n}\n//# sourceMappingURL=Schema.js.map","import { Column } from '../Column';\nexport const DEFAULT_TABLE_OPTIONS = {\n    indexes: [],\n    insertOnly: false,\n    localOnly: false\n};\nexport const InvalidSQLCharacters = /[\"'%,.#\\s[\\]]/;\nexport class Table {\n    options;\n    static createLocalOnly(options) {\n        return new Table({ ...options, localOnly: true, insertOnly: false });\n    }\n    static createInsertOnly(options) {\n        return new Table({ ...options, localOnly: false, insertOnly: true });\n    }\n    static createTable(name, table) {\n        return new Table({\n            name,\n            columns: Object.entries(table.columns).map(([name, col]) => new Column({ name, type: col.type })),\n            indexes: table.indexes,\n            localOnly: table.options.localOnly,\n            insertOnly: table.options.insertOnly,\n            viewName: table.options.viewName\n        });\n    }\n    constructor(options) {\n        this.options = { ...DEFAULT_TABLE_OPTIONS, ...options };\n    }\n    get name() {\n        return this.options.name;\n    }\n    get viewNameOverride() {\n        return this.options.viewName;\n    }\n    get viewName() {\n        return this.viewNameOverride ?? this.name;\n    }\n    get columns() {\n        return this.options.columns;\n    }\n    get indexes() {\n        return this.options.indexes ?? [];\n    }\n    get localOnly() {\n        return this.options.localOnly ?? false;\n    }\n    get insertOnly() {\n        return this.options.insertOnly ?? false;\n    }\n    get internalName() {\n        if (this.options.localOnly) {\n            return `ps_data_local__${this.name}`;\n        }\n        return `ps_data__${this.name}`;\n    }\n    get validName() {\n        if (InvalidSQLCharacters.test(this.name)) {\n            return false;\n        }\n        if (this.viewNameOverride != null && InvalidSQLCharacters.test(this.viewNameOverride)) {\n            return false;\n        }\n        return true;\n    }\n    validate() {\n        if (InvalidSQLCharacters.test(this.name)) {\n            throw new Error(`Invalid characters in table name: ${this.name}`);\n        }\n        if (this.viewNameOverride && InvalidSQLCharacters.test(this.viewNameOverride)) {\n            throw new Error(`Invalid characters in view name: ${this.viewNameOverride}`);\n        }\n        const columnNames = new Set();\n        columnNames.add('id');\n        for (const column of this.columns) {\n            const { name: columnName } = column;\n            if (column.name == 'id') {\n                throw new Error(`${this.name}: id column is automatically added, custom id columns are not supported`);\n            }\n            if (columnNames.has(columnName)) {\n                throw new Error(`Duplicate column ${columnName}`);\n            }\n            if (InvalidSQLCharacters.test(columnName)) {\n                throw new Error(`Invalid characters in column name: $name.${column}`);\n            }\n            columnNames.add(columnName);\n        }\n        const indexNames = new Set();\n        for (const index of this.indexes) {\n            if (indexNames.has(index.name)) {\n                throw new Error(`Duplicate index $name.${index}`);\n            }\n            if (InvalidSQLCharacters.test(index.name)) {\n                throw new Error(`Invalid characters in index name: $name.${index}`);\n            }\n            for (const column of index.columns) {\n                if (!columnNames.has(column.name)) {\n                    throw new Error(`Column ${column.name} not found for index ${index.name}`);\n                }\n            }\n            indexNames.add(index.name);\n        }\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            view_name: this.viewName,\n            local_only: this.localOnly,\n            insert_only: this.insertOnly,\n            columns: this.columns.map((c) => c.toJSON()),\n            indexes: this.indexes.map((e) => e.toJSON(this))\n        };\n    }\n}\n//# sourceMappingURL=Table.js.map","import { ColumnType } from '../Column';\nimport { Index } from './Index';\nimport { IndexedColumn } from './IndexedColumn';\nconst text = {\n    type: ColumnType.TEXT\n};\nconst integer = {\n    type: ColumnType.INTEGER\n};\nconst real = {\n    type: ColumnType.REAL\n};\nexport const column = {\n    text,\n    integer,\n    real\n};\n/*\n  Generate a new table from the columns and indexes\n*/\nexport class TableV2 {\n    columns;\n    options;\n    indexes;\n    constructor(columns, options = {}) {\n        this.columns = columns;\n        this.options = options;\n        if (options?.indexes) {\n            this.indexes = Object.entries(options.indexes).map(([name, columns]) => {\n                if (name.startsWith('-')) {\n                    return new Index({\n                        name: name.substring(1),\n                        columns: columns.map((c) => new IndexedColumn({ name: c, ascending: false }))\n                    });\n                }\n                return new Index({\n                    name: name,\n                    columns: columns.map((c) => new IndexedColumn({ name: c, ascending: true }))\n                });\n            });\n        }\n    }\n}\n//# sourceMappingURL=TableV2.js.map","export * from './client/AbstractPowerSyncDatabase';\nexport * from './client/AbstractPowerSyncOpenFactory';\nexport * from './client/connection/PowerSyncBackendConnector';\nexport * from './client/connection/PowerSyncCredentials';\nexport * from './client/sync/bucket/BucketStorageAdapter';\nexport * from './client/sync/bucket/CrudEntry';\nexport * from './client/sync/bucket/SqliteBucketStorage';\nexport * from './client/sync/bucket/CrudBatch';\nexport * from './client/sync/bucket/CrudTransaction';\nexport * from './client/sync/bucket/SyncDataBatch';\nexport * from './client/sync/bucket/SyncDataBucket';\nexport * from './client/sync/bucket/OpType';\nexport * from './client/sync/bucket/OplogEntry';\nexport * from './client/sync/stream/AbstractRemote';\nexport * from './client/sync/stream/AbstractStreamingSyncImplementation';\nexport * from './client/sync/stream/streaming-sync-types';\nexport * from './db/crud/SyncStatus';\nexport * from './db/crud/UploadQueueStatus';\nexport * from './db/schema/Schema';\nexport * from './db/schema/Table';\nexport * from './db/schema/Index';\nexport * from './db/schema/IndexedColumn';\nexport * from './db/crud/SyncStatus';\nexport * from './db/crud/UploadQueueStatus';\nexport * from './db/DBAdapter';\nexport * from './db/Column';\nexport * from './db/schema/TableV2';\nexport * from './utils/BaseObserver';\nexport * from './utils/strings';\n//# sourceMappingURL=index.js.map","import { v4 } from 'uuid';\nexport class BaseObserver {\n    listeners;\n    constructor() {\n        this.listeners = {};\n    }\n    /**\n     * Register a listener for updates to the PowerSync client.\n     */\n    registerListener(listener) {\n        const id = v4();\n        this.listeners[id] = listener;\n        return () => {\n            delete this.listeners[id];\n        };\n    }\n    iterateListeners(cb) {\n        for (const i in this.listeners) {\n            cb(this.listeners[i]);\n        }\n    }\n}\n//# sourceMappingURL=BaseObserver.js.map","/**\n * Wrapper for async-mutex runExclusive, which allows for a timeout on each exclusive lock.\n */\nexport async function mutexRunExclusive(mutex, callback, options) {\n    return new Promise((resolve, reject) => {\n        const timeout = options?.timeoutMs;\n        let timedOut = false;\n        const timeoutId = timeout\n            ? setTimeout(() => {\n                timedOut = true;\n                reject(new Error('Timeout waiting for lock'));\n            }, timeout)\n            : undefined;\n        mutex.runExclusive(async () => {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            if (timedOut)\n                return;\n            try {\n                resolve(await callback());\n            }\n            catch (ex) {\n                reject(ex);\n            }\n        });\n    });\n}\n//# sourceMappingURL=mutex.js.map","export function quoteString(s) {\n    return `'${s.replaceAll(\"'\", \"''\")}'`;\n}\nexport function quoteJsonPath(path) {\n    return quoteString(`$.${path}`);\n}\nexport function quoteIdentifier(s) {\n    return `\"${s.replaceAll('\"', '\"\"')}\"`;\n}\n//# sourceMappingURL=strings.js.map","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { BaseObserver } from '@journeyapps/powersync-sdk-common';\nimport * as Comlink from 'comlink';\nimport Logger from 'js-logger';\nimport { getWorkerDatabaseOpener } from '../../../worker/db/open-worker-database';\n/**\n * Adapter for WA-SQLite\n */\nexport class WASQLiteDBAdapter extends BaseObserver {\n    constructor(options) {\n        super();\n        this.options = options;\n        /**\n         * Wraps the worker execute function, awaiting for it to be available\n         */\n        this._execute = (sql, bindings) => __awaiter(this, void 0, void 0, function* () {\n            yield this.initialized;\n            const result = yield this.workerMethods.execute(sql, bindings);\n            return Object.assign(Object.assign({}, result), { rows: Object.assign(Object.assign({}, result.rows), { item: (idx) => result.rows._array[idx] }) });\n        });\n        this.logger = Logger.get('WASQLite');\n        this.dbGetHelpers = null;\n        this.workerMethods = null;\n        this.initialized = this.init();\n        this.dbGetHelpers = this.generateDBHelpers({ execute: this._execute.bind(this) });\n    }\n    get name() {\n        return this.options.dbFilename;\n    }\n    get flags() {\n        var _a;\n        return (_a = this.options.flags) !== null && _a !== void 0 ? _a : {};\n    }\n    getWorker() { }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { enableMultiTabs } = this.flags;\n            if (!enableMultiTabs) {\n                this.logger.warn('Multiple tabs are not enabled in this browser');\n            }\n            const dbOpener = this.options.workerPort\n                ? Comlink.wrap(this.options.workerPort)\n                : getWorkerDatabaseOpener(this.options.dbFilename, enableMultiTabs);\n            this.workerMethods = yield dbOpener(this.options.dbFilename);\n            this.workerMethods.registerOnTableChange(Comlink.proxy((opType, tableName, rowId) => {\n                this.iterateListeners((cb) => { var _a; return (_a = cb.tablesUpdated) === null || _a === void 0 ? void 0 : _a.call(cb, { opType, table: tableName, rowId }); });\n            }));\n        });\n    }\n    execute(query, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.writeLock((ctx) => ctx.execute(query, params));\n        });\n    }\n    /**\n     * Attempts to close the connection.\n     * Shared workers might not actually close the connection if other\n     * tabs are still using it.\n     */\n    close() {\n        var _a, _b;\n        (_b = (_a = this.workerMethods) === null || _a === void 0 ? void 0 : _a.close) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n    getAll(sql, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.initialized;\n            return this.dbGetHelpers.getAll(sql, parameters);\n        });\n    }\n    getOptional(sql, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.initialized;\n            return this.dbGetHelpers.getOptional(sql, parameters);\n        });\n    }\n    get(sql, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.initialized;\n            return this.dbGetHelpers.get(sql, parameters);\n        });\n    }\n    readLock(fn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.initialized;\n            return this.acquireLock(() => __awaiter(this, void 0, void 0, function* () { return fn(this.generateDBHelpers({ execute: this._execute })); }));\n        });\n    }\n    writeLock(fn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.initialized;\n            return this.acquireLock(() => __awaiter(this, void 0, void 0, function* () { return fn(this.generateDBHelpers({ execute: this._execute })); }));\n        });\n    }\n    acquireLock(callback) {\n        return navigator.locks.request(`db-lock-${this.options.dbFilename}`, callback);\n    }\n    readTransaction(fn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.readLock(this.wrapTransaction(fn));\n        });\n    }\n    writeTransaction(fn, options) {\n        return this.writeLock(this.wrapTransaction(fn));\n    }\n    /**\n     * Wraps a lock context into a transaction context\n     */\n    wrapTransaction(cb) {\n        return (tx) => __awaiter(this, void 0, void 0, function* () {\n            yield this._execute('BEGIN TRANSACTION');\n            let finalized = false;\n            const commit = () => __awaiter(this, void 0, void 0, function* () {\n                if (finalized) {\n                    return { rowsAffected: 0 };\n                }\n                finalized = true;\n                return this._execute('COMMIT');\n            });\n            const rollback = () => {\n                finalized = true;\n                return this._execute('ROLLBACK');\n            };\n            try {\n                const result = yield cb(Object.assign(Object.assign({}, tx), { commit,\n                    rollback }));\n                if (!finalized) {\n                    yield commit();\n                }\n                return result;\n            }\n            catch (ex) {\n                this.logger.debug('Caught ex in transaction', ex);\n                yield rollback();\n                throw ex;\n            }\n        });\n    }\n    generateDBHelpers(tx) {\n        return Object.assign(Object.assign({}, tx), { \n            /**\n             *  Execute a read-only query and return results\n             */\n            getAll(sql, parameters) {\n                var _a, _b;\n                return __awaiter(this, void 0, void 0, function* () {\n                    const res = yield tx.execute(sql, parameters);\n                    return (_b = (_a = res.rows) === null || _a === void 0 ? void 0 : _a._array) !== null && _b !== void 0 ? _b : [];\n                });\n            },\n            /**\n             * Execute a read-only query and return the first result, or null if the ResultSet is empty.\n             */\n            getOptional(sql, parameters) {\n                var _a, _b;\n                return __awaiter(this, void 0, void 0, function* () {\n                    const res = yield tx.execute(sql, parameters);\n                    return (_b = (_a = res.rows) === null || _a === void 0 ? void 0 : _a.item(0)) !== null && _b !== void 0 ? _b : null;\n                });\n            },\n            /**\n             * Execute a read-only query and return the first result, error if the ResultSet is empty.\n             */\n            get(sql, parameters) {\n                var _a;\n                return __awaiter(this, void 0, void 0, function* () {\n                    const res = yield tx.execute(sql, parameters);\n                    const first = (_a = res.rows) === null || _a === void 0 ? void 0 : _a.item(0);\n                    if (!first) {\n                        throw new Error('Result set is empty');\n                    }\n                    return first;\n                });\n            } });\n    }\n}\n//# sourceMappingURL=WASQLiteDBAdapter.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AbstractRemote } from '@journeyapps/powersync-sdk-common';\nexport class WebRemote extends AbstractRemote {\n    post(path, data, headers = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const request = yield this.buildRequest(path);\n            const res = yield fetch(request.url, {\n                method: 'POST',\n                headers: Object.assign(Object.assign({}, headers), request.headers),\n                body: JSON.stringify(data)\n            });\n            if (!res.ok) {\n                throw new Error(`Received ${res.status} - ${res.statusText} when posting to ${path}: ${yield res.text()}}`);\n            }\n            return res.json();\n        });\n    }\n    get(path, headers) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const request = yield this.buildRequest(path);\n            const res = yield fetch(request.url, {\n                method: 'GET',\n                headers: Object.assign(Object.assign({}, headers), request.headers)\n            });\n            if (!res.ok) {\n                throw new Error(`Received ${res.status} - ${res.statusText} when getting from ${path}: ${yield res.text()}}`);\n            }\n            return res.json();\n        });\n    }\n    postStreaming(path, data, headers = {}, signal) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const request = yield this.buildRequest(path);\n            const res = yield fetch(request.url, {\n                method: 'POST',\n                headers: Object.assign(Object.assign({}, headers), request.headers),\n                body: JSON.stringify(data),\n                signal,\n                cache: 'no-store'\n            });\n            if (!res.ok || !res.body) {\n                const text = yield res.text();\n                console.error(`Could not POST streaming to ${path} - ${res.status} - ${res.statusText}: ${text}`);\n                const error = new Error(`HTTP ${res.statusText}: ${text}`);\n                error.status = res.status;\n                throw error;\n            }\n            /**\n             * The can-ndjson-stream does not handle aborted streams well on web.\n             * This will intercept the readable stream and close the stream if\n             * aborted.\n             */\n            const reader = res.body.getReader();\n            const outputStream = new ReadableStream({\n                start(controller) {\n                    return processStream();\n                    function processStream() {\n                        return __awaiter(this, void 0, void 0, function* () {\n                            if (signal === null || signal === void 0 ? void 0 : signal.aborted) {\n                                controller.close();\n                            }\n                            try {\n                                const { done, value } = yield reader.read();\n                                // When no more data needs to be consumed, close the stream\n                                if (done) {\n                                    controller.close();\n                                    return;\n                                }\n                                // Enqueue the next data chunk into our target stream\n                                controller.enqueue(value);\n                                return processStream();\n                            }\n                            catch (ex) {\n                                controller.close();\n                            }\n                        });\n                    }\n                }\n            });\n            // Create a new response out of the intercepted stream\n            return new Response(outputStream).body;\n        });\n    }\n}\n//# sourceMappingURL=WebRemote.js.map","import { AbstractStreamingSyncImplementation, LockType } from '@journeyapps/powersync-sdk-common';\nexport class WebStreamingSyncImplementation extends AbstractStreamingSyncImplementation {\n    constructor(options) {\n        // Super will store and provide default values for options\n        super(options);\n    }\n    get webOptions() {\n        return this.options;\n    }\n    obtainLock(lockOptions) {\n        const identifier = `streaming-sync-${lockOptions.type}-${this.webOptions.identifier}`;\n        lockOptions.type == LockType.SYNC && console.debug('requesting lock for ', identifier);\n        return navigator.locks.request(identifier, { signal: lockOptions.signal }, lockOptions.callback);\n    }\n}\n//# sourceMappingURL=WebStreamingSyncImplementation.js.map","import * as Comlink from 'comlink';\n/**\n * Opens a shared or dedicated worker which exposes opening of database connections\n */\nexport function openWorkerDatabasePort(workerIdentifier, multipleTabs = true) {\n    /**\n     *  Webpack V5 can bundle the worker automatically if the full Worker constructor syntax is used\n     *  https://webpack.js.org/guides/web-workers/\n     *  This enables multi tab support by default, but falls back if SharedWorker is not available\n     *  (in the case of Android)\n     */\n    return multipleTabs\n        ? new SharedWorker(new URL('./SharedWASQLiteDB.worker.js', import.meta.url), {\n            /* @vite-ignore */\n            name: `shared-DB-worker-${workerIdentifier}`,\n            type: 'module'\n        }).port\n        : new Worker(new URL('./WASQLiteDB.worker.js', import.meta.url), {\n            /* @vite-ignore */\n            name: `DB-worker-${workerIdentifier}`,\n            type: 'module'\n        });\n}\n/**\n * @returns A function which allows for opening database connections inside\n * a worker.\n */\nexport function getWorkerDatabaseOpener(workerIdentifier, multipleTabs = true) {\n    return Comlink.wrap(openWorkerDatabasePort(workerIdentifier, multipleTabs));\n}\n//# sourceMappingURL=open-worker-database.js.map","import Logger from 'js-logger';\n/**\n * Broadcasts logs to all clients\n */\nexport class BroadcastLogger {\n    constructor(clients) {\n        this.clients = clients;\n        this.TRACE = Logger.TRACE;\n        this.DEBUG = Logger.DEBUG;\n        this.INFO = Logger.INFO;\n        this.TIME = Logger.TIME;\n        this.WARN = Logger.WARN;\n        this.ERROR = Logger.ERROR;\n        this.OFF = Logger.OFF;\n    }\n    trace(...x) {\n        console.trace(...x);\n        this.clients.forEach((p) => p.clientProvider.trace(...x));\n    }\n    debug(...x) {\n        console.debug(...x);\n        this.clients.forEach((p) => p.clientProvider.debug(...x));\n    }\n    info(...x) {\n        console.info(...x);\n        this.clients.forEach((p) => p.clientProvider.info(...x));\n    }\n    log(...x) {\n        console.log(...x);\n        this.sanitizeArgs(x, (params) => this.clients.forEach((p) => p.clientProvider.log(...params)));\n    }\n    warn(...x) {\n        console.warn(...x);\n        this.sanitizeArgs(x, (params) => this.clients.forEach((p) => p.clientProvider.warn(...params)));\n    }\n    error(...x) {\n        console.error(...x);\n        this.sanitizeArgs(x, (params) => this.clients.forEach((p) => p.clientProvider.error(...params)));\n    }\n    time(label) {\n        console.time(label);\n        this.clients.forEach((p) => p.clientProvider.time(label));\n    }\n    timeEnd(label) {\n        console.timeEnd(label);\n        this.clients.forEach((p) => p.clientProvider.timeEnd(label));\n    }\n    setLevel(level) {\n        // Levels are not adjustable on this level.\n    }\n    getLevel() {\n        // Levels are not adjustable on this level.\n        return Logger.INFO;\n    }\n    enabledFor(level) {\n        // Levels are not adjustable on this level.\n        return true;\n    }\n    /**\n     * Guards against any logging errors.\n     * We don't want a logging exception to cause further issues upstream\n     */\n    sanitizeArgs(x, handler) {\n        const sanitizedParams = x.map((param) => {\n            try {\n                // Try and clone here first. If it fails it won't be passable over a MessagePort\n                return structuredClone(x);\n            }\n            catch (ex) {\n                console.error(ex);\n                return 'Could not serialize log params. Check shared worker logs for more details.';\n            }\n        });\n        return handler(...sanitizedParams);\n    }\n}\n//# sourceMappingURL=BroadcastLogger.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as Comlink from 'comlink';\nimport { BaseObserver, SqliteBucketStorage, SyncStatus } from '@journeyapps/powersync-sdk-common';\nimport { WebStreamingSyncImplementation } from '../../db/sync/WebStreamingSyncImplementation';\nimport { Mutex } from 'async-mutex';\nimport { WebRemote } from '../../db/sync/WebRemote';\nimport { WASQLiteDBAdapter } from '../../db/adapters/wa-sqlite/WASQLiteDBAdapter';\nimport { BroadcastLogger } from './BroadcastLogger';\n/**\n * Manual message events for shared sync clients\n */\nexport var SharedSyncClientEvent;\n(function (SharedSyncClientEvent) {\n    /**\n     * This client requests the shared sync manager should\n     * close it's connection to the client.\n     */\n    SharedSyncClientEvent[\"CLOSE_CLIENT\"] = \"close-client\";\n})(SharedSyncClientEvent || (SharedSyncClientEvent = {}));\n/**\n * Shared sync implementation which runs inside a shared webworker\n */\nexport class SharedSyncImplementation extends BaseObserver {\n    constructor() {\n        super();\n        this.ports = [];\n        this.isInitialized = new Promise((resolve) => {\n            const callback = this.registerListener({\n                initialized: () => {\n                    resolve();\n                    callback === null || callback === void 0 ? void 0 : callback();\n                }\n            });\n        });\n        this.syncStatus = new SyncStatus({});\n        this.broadCastLogger = new BroadcastLogger(this.ports);\n    }\n    waitForStatus(status) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.waitForReady();\n            return this.syncStreamClient.waitForStatus(status);\n        });\n    }\n    get lastSyncedAt() {\n        var _a;\n        return (_a = this.syncStreamClient) === null || _a === void 0 ? void 0 : _a.lastSyncedAt;\n    }\n    get isConnected() {\n        var _a, _b;\n        return (_b = (_a = this.syncStreamClient) === null || _a === void 0 ? void 0 : _a.isConnected) !== null && _b !== void 0 ? _b : false;\n    }\n    waitForReady() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.isInitialized;\n        });\n    }\n    /**\n     * Configures the DBAdapter connection and a streaming sync client.\n     */\n    init(dbWorkerPort, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.syncStreamClient) {\n                // Cannot modify already existing sync implementation\n                return;\n            }\n            this.syncStreamClient = new WebStreamingSyncImplementation(Object.assign(Object.assign({ adapter: new SqliteBucketStorage(new WASQLiteDBAdapter({\n                    dbFilename: params.dbName,\n                    workerPort: dbWorkerPort,\n                    flags: { enableMultiTabs: true },\n                    logger: this.broadCastLogger\n                }), new Mutex(), this.broadCastLogger), remote: new WebRemote({\n                    fetchCredentials: () => __awaiter(this, void 0, void 0, function* () {\n                        const lastPort = this.ports[this.ports.length - 1];\n                        return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                            const abortController = new AbortController();\n                            this.fetchCredentialsController = {\n                                controller: abortController,\n                                activePort: lastPort\n                            };\n                            abortController.signal.onabort = reject;\n                            try {\n                                resolve(yield lastPort.clientProvider.fetchCredentials());\n                            }\n                            catch (ex) {\n                                reject(ex);\n                            }\n                            finally {\n                                this.fetchCredentialsController = undefined;\n                            }\n                        }));\n                    })\n                }), uploadCrud: () => __awaiter(this, void 0, void 0, function* () {\n                    const lastPort = this.ports[this.ports.length - 1];\n                    return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                        const abortController = new AbortController();\n                        this.uploadDataController = {\n                            controller: abortController,\n                            activePort: lastPort\n                        };\n                        // Resolving will make it retry\n                        abortController.signal.onabort = () => resolve();\n                        try {\n                            resolve(yield lastPort.clientProvider.uploadCrud());\n                        }\n                        catch (ex) {\n                            reject(ex);\n                        }\n                        finally {\n                            this.uploadDataController = undefined;\n                        }\n                    }));\n                }) }, params.streamOptions), { \n                // Logger cannot be transferred just yet\n                logger: this.broadCastLogger }));\n            this.syncStreamClient.registerListener({\n                statusChanged: (status) => {\n                    this.updateAllStatuses(status.toJSON());\n                }\n            });\n            this.iterateListeners((l) => { var _a; return (_a = l.initialized) === null || _a === void 0 ? void 0 : _a.call(l); });\n        });\n    }\n    dispose() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.waitForReady();\n            (_a = this.statusListener) === null || _a === void 0 ? void 0 : _a.call(this);\n            return (_b = this.syncStreamClient) === null || _b === void 0 ? void 0 : _b.dispose();\n        });\n    }\n    /**\n     * Connects to the PowerSync backend instance.\n     * Multiple tabs can safely call this in their initialization.\n     * The connection will simply be reconnected whenever a new tab\n     * connects.\n     */\n    connect() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.waitForReady();\n            this.disconnect();\n            this.abortController = new AbortController();\n            (_a = this.syncStreamClient) === null || _a === void 0 ? void 0 : _a.streamingSync(this.abortController.signal);\n        });\n    }\n    disconnect() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = this.abortController) === null || _a === void 0 ? void 0 : _a.abort('Disconnected');\n            this.updateAllStatuses({ connected: false });\n        });\n    }\n    /**\n     * Adds a new client tab's message port to the list of connected ports\n     */\n    addPort(port) {\n        var _a;\n        const portProvider = {\n            port,\n            clientProvider: Comlink.wrap(port)\n        };\n        this.ports.push(portProvider);\n        // Give the newly connected client the latest status\n        const status = (_a = this.syncStreamClient) === null || _a === void 0 ? void 0 : _a.syncStatus;\n        if (status) {\n            portProvider.clientProvider.statusChanged(status.toJSON());\n        }\n    }\n    /**\n     * Removes a message port client from this manager's managed\n     * clients.\n     */\n    removePort(port) {\n        const index = this.ports.findIndex((p) => p.port == port);\n        if (index < 0) {\n            console.warn(`Could not remove port ${port} since it is not present in active ports.`);\n            return;\n        }\n        const trackedPort = this.ports[index];\n        // Release proxy\n        trackedPort.clientProvider[Comlink.releaseProxy]();\n        this.ports.splice(index, 1);\n        /**\n         * The port might currently be in use. Any active functions might\n         * not resolve. Abort them here.\n         */\n        [this.fetchCredentialsController, this.uploadDataController].forEach((abortController) => {\n            if ((abortController === null || abortController === void 0 ? void 0 : abortController.activePort.port) == port) {\n                abortController.controller.abort();\n            }\n        });\n    }\n    triggerCrudUpload() {\n        this.waitForReady().then(() => { var _a; return (_a = this.syncStreamClient) === null || _a === void 0 ? void 0 : _a.triggerCrudUpload(); });\n    }\n    obtainLock(lockOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.waitForReady();\n            return this.syncStreamClient.obtainLock(lockOptions);\n        });\n    }\n    hasCompletedSync() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.waitForReady();\n            return this.syncStreamClient.hasCompletedSync();\n        });\n    }\n    getWriteCheckpoint() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.waitForReady();\n            return this.syncStreamClient.getWriteCheckpoint();\n        });\n    }\n    /**\n     * A method to update the all shared statuses for each\n     * client.\n     */\n    updateAllStatuses(status) {\n        this.syncStatus = new SyncStatus(status);\n        this.ports.forEach((p) => p.clientProvider.statusChanged(status));\n    }\n    /**\n     * A function only used for unit tests which updates the internal\n     * sync stream client and all tab client's sync status\n     */\n    _testUpdateAllStatuses(status) {\n        if (!this.syncStreamClient) {\n            console.warn('no stream client has been initialized yet');\n        }\n        // Only assigning, don't call listeners for this test\n        this.syncStreamClient.syncStatus = new SyncStatus(status);\n        this.updateAllStatuses(status);\n    }\n}\n//# sourceMappingURL=SharedSyncImplementation.js.map","import * as Comlink from 'comlink';\nimport { SharedSyncImplementation, SharedSyncClientEvent } from './SharedSyncImplementation';\nimport Logger from 'js-logger';\nconst _self = self;\nLogger.useDefaults();\nconst sharedSyncImplementation = new SharedSyncImplementation();\n_self.onconnect = function (event) {\n    const port = event.ports[0];\n    /**\n     * Adds an extra listener which can remove this port\n     * from the list of monitored ports.\n     */\n    port.addEventListener('message', (event) => {\n        const payload = event.data;\n        if ((payload === null || payload === void 0 ? void 0 : payload.event) == SharedSyncClientEvent.CLOSE_CLIENT) {\n            console.log('closing shared for port', port);\n            sharedSyncImplementation.removePort(port);\n        }\n    });\n    Comlink.expose(sharedSyncImplementation, port);\n    sharedSyncImplementation.addPort(port);\n};\n//# sourceMappingURL=SharedSyncImplementation.worker.js.map","module.exports = {};\n","\"use strict\";\n/*exported ndjsonStream*/\n\nvar namespace = require('can-namespace');\n\nvar ndjsonStream = function(response) {\n  // For cancellation\n  var is_reader, cancellationRequest = false;\n  return new ReadableStream({\n    start: function(controller) {\n      var reader = response.getReader();\n      is_reader = reader;\n      var decoder = new TextDecoder();\n      var data_buf = \"\";\n\n      reader.read().then(function processResult(result) {\n        if (result.done) {\n          if (cancellationRequest) {\n            // Immediately exit\n            return;\n          }\n\n          data_buf = data_buf.trim();\n          if (data_buf.length !== 0) {\n            try {\n              var data_l = JSON.parse(data_buf);\n              controller.enqueue(data_l);\n            } catch(e) {\n              controller.error(e);\n              return;\n            }\n          }\n          controller.close();\n          return;\n        }\n\n        var data = decoder.decode(result.value, {stream: true});\n        data_buf += data;\n        var lines = data_buf.split(\"\\n\");\n        for(var i = 0; i < lines.length - 1; ++i) {\n          var l = lines[i].trim();\n          if (l.length > 0) {\n            try {\n              var data_line = JSON.parse(l);\n              controller.enqueue(data_line);\n            } catch(e) {\n              controller.error(e);\n              cancellationRequest = true;\n              reader.cancel();\n              return;\n            }\n          }\n        }\n        data_buf = lines[lines.length-1];\n\n        return reader.read().then(processResult);\n      });\n\n    },\n    cancel: function(reason) {\n      console.log(\"Cancel registered due to \", reason);\n      cancellationRequest = true;\n      is_reader.cancel();\n    }\n  });\n};\n\nmodule.exports = namespace.ndjsonStream = ndjsonStream;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst event_iterator_1 = require(\"./event-iterator\");\nexports.EventIterator = event_iterator_1.EventIterator;\nfunction subscribe(event, options, evOptions) {\n    return new event_iterator_1.EventIterator(({ push }) => {\n        this.addEventListener(event, push, options);\n        return () => this.removeEventListener(event, push, options);\n    }, evOptions);\n}\nexports.subscribe = subscribe;\nexports.default = event_iterator_1.EventIterator;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass EventQueue {\n    constructor() {\n        this.pullQueue = [];\n        this.pushQueue = [];\n        this.eventHandlers = {};\n        this.isPaused = false;\n        this.isStopped = false;\n    }\n    push(value) {\n        if (this.isStopped)\n            return;\n        const resolution = { value, done: false };\n        if (this.pullQueue.length) {\n            const placeholder = this.pullQueue.shift();\n            if (placeholder)\n                placeholder.resolve(resolution);\n        }\n        else {\n            this.pushQueue.push(Promise.resolve(resolution));\n            if (this.highWaterMark !== undefined &&\n                this.pushQueue.length >= this.highWaterMark &&\n                !this.isPaused) {\n                this.isPaused = true;\n                if (this.eventHandlers.highWater) {\n                    this.eventHandlers.highWater();\n                }\n                else if (console) {\n                    console.warn(`EventIterator queue reached ${this.pushQueue.length} items`);\n                }\n            }\n        }\n    }\n    stop() {\n        if (this.isStopped)\n            return;\n        this.isStopped = true;\n        this.remove();\n        for (const placeholder of this.pullQueue) {\n            placeholder.resolve({ value: undefined, done: true });\n        }\n        this.pullQueue.length = 0;\n    }\n    fail(error) {\n        if (this.isStopped)\n            return;\n        this.isStopped = true;\n        this.remove();\n        if (this.pullQueue.length) {\n            for (const placeholder of this.pullQueue) {\n                placeholder.reject(error);\n            }\n            this.pullQueue.length = 0;\n        }\n        else {\n            const rejection = Promise.reject(error);\n            /* Attach error handler to avoid leaking an unhandled promise rejection. */\n            rejection.catch(() => { });\n            this.pushQueue.push(rejection);\n        }\n    }\n    remove() {\n        Promise.resolve().then(() => {\n            if (this.removeCallback)\n                this.removeCallback();\n        });\n    }\n    [Symbol.asyncIterator]() {\n        return {\n            next: (value) => {\n                const result = this.pushQueue.shift();\n                if (result) {\n                    if (this.lowWaterMark !== undefined &&\n                        this.pushQueue.length <= this.lowWaterMark &&\n                        this.isPaused) {\n                        this.isPaused = false;\n                        if (this.eventHandlers.lowWater) {\n                            this.eventHandlers.lowWater();\n                        }\n                    }\n                    return result;\n                }\n                else if (this.isStopped) {\n                    return Promise.resolve({ value: undefined, done: true });\n                }\n                else {\n                    return new Promise((resolve, reject) => {\n                        this.pullQueue.push({ resolve, reject });\n                    });\n                }\n            },\n            return: () => {\n                this.isStopped = true;\n                this.pushQueue.length = 0;\n                this.remove();\n                return Promise.resolve({ value: undefined, done: true });\n            },\n        };\n    }\n}\nclass EventIterator {\n    constructor(listen, { highWaterMark = 100, lowWaterMark = 1 } = {}) {\n        const queue = new EventQueue();\n        queue.highWaterMark = highWaterMark;\n        queue.lowWaterMark = lowWaterMark;\n        queue.removeCallback =\n            listen({\n                push: value => queue.push(value),\n                stop: () => queue.stop(),\n                fail: error => queue.fail(error),\n                on: (event, fn) => {\n                    queue.eventHandlers[event] = fn;\n                },\n            }) || (() => { });\n        this[Symbol.asyncIterator] = () => queue[Symbol.asyncIterator]();\n        Object.freeze(this);\n    }\n}\nexports.EventIterator = EventIterator;\nexports.default = EventIterator;\n","/*!\r\n * js-logger - http://github.com/jonnyreeves/js-logger\r\n * Jonny Reeves, http://jonnyreeves.co.uk/\r\n * js-logger may be freely distributed under the MIT license.\r\n */\r\n(function (global) {\r\n\t\"use strict\";\r\n\r\n\t// Top level module for the global, static logger instance.\r\n\tvar Logger = { };\r\n\r\n\t// For those that are at home that are keeping score.\r\n\tLogger.VERSION = \"1.6.1\";\r\n\r\n\t// Function which handles all incoming log messages.\r\n\tvar logHandler;\r\n\r\n\t// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.\r\n\tvar contextualLoggersByNameMap = {};\r\n\r\n\t// Polyfill for ES5's Function.bind.\r\n\tvar bind = function(scope, func) {\r\n\t\treturn function() {\r\n\t\t\treturn func.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\r\n\t// Super exciting object merger-matron 9000 adding another 100 bytes to your download.\r\n\tvar merge = function () {\r\n\t\tvar args = arguments, target = args[0], key, i;\r\n\t\tfor (i = 1; i < args.length; i++) {\r\n\t\t\tfor (key in args[i]) {\r\n\t\t\t\tif (!(key in target) && args[i].hasOwnProperty(key)) {\r\n\t\t\t\t\ttarget[key] = args[i][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t// Helper to define a logging level object; helps with optimisation.\r\n\tvar defineLogLevel = function(value, name) {\r\n\t\treturn { value: value, name: name };\r\n\t};\r\n\r\n\t// Predefined logging levels.\r\n\tLogger.TRACE = defineLogLevel(1, 'TRACE');\r\n\tLogger.DEBUG = defineLogLevel(2, 'DEBUG');\r\n\tLogger.INFO = defineLogLevel(3, 'INFO');\r\n\tLogger.TIME = defineLogLevel(4, 'TIME');\r\n\tLogger.WARN = defineLogLevel(5, 'WARN');\r\n\tLogger.ERROR = defineLogLevel(8, 'ERROR');\r\n\tLogger.OFF = defineLogLevel(99, 'OFF');\r\n\r\n\t// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently\r\n\t// of each other.\r\n\tvar ContextualLogger = function(defaultContext) {\r\n\t\tthis.context = defaultContext;\r\n\t\tthis.setLevel(defaultContext.filterLevel);\r\n\t\tthis.log = this.info;  // Convenience alias.\r\n\t};\r\n\r\n\tContextualLogger.prototype = {\r\n\t\t// Changes the current logging level for the logging instance.\r\n\t\tsetLevel: function (newLevel) {\r\n\t\t\t// Ensure the supplied Level object looks valid.\r\n\t\t\tif (newLevel && \"value\" in newLevel) {\r\n\t\t\t\tthis.context.filterLevel = newLevel;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// Gets the current logging level for the logging instance\r\n\t\tgetLevel: function () {\r\n\t\t\treturn this.context.filterLevel;\r\n\t\t},\r\n\r\n\t\t// Is the logger configured to output messages at the supplied level?\r\n\t\tenabledFor: function (lvl) {\r\n\t\t\tvar filterLevel = this.context.filterLevel;\r\n\t\t\treturn lvl.value >= filterLevel.value;\r\n\t\t},\r\n\r\n\t\ttrace: function () {\r\n\t\t\tthis.invoke(Logger.TRACE, arguments);\r\n\t\t},\r\n\r\n\t\tdebug: function () {\r\n\t\t\tthis.invoke(Logger.DEBUG, arguments);\r\n\t\t},\r\n\r\n\t\tinfo: function () {\r\n\t\t\tthis.invoke(Logger.INFO, arguments);\r\n\t\t},\r\n\r\n\t\twarn: function () {\r\n\t\t\tthis.invoke(Logger.WARN, arguments);\r\n\t\t},\r\n\r\n\t\terror: function () {\r\n\t\t\tthis.invoke(Logger.ERROR, arguments);\r\n\t\t},\r\n\r\n\t\ttime: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'start' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttimeEnd: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'end' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Invokes the logger callback if it's not being filtered.\r\n\t\tinvoke: function (level, msgArgs) {\r\n\t\t\tif (logHandler && this.enabledFor(level)) {\r\n\t\t\t\tlogHandler(msgArgs, merge({ level: level }, this.context));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Protected instance which all calls to the to level `Logger` module will be routed through.\r\n\tvar globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });\r\n\r\n\t// Configure the global Logger instance.\r\n\t(function() {\r\n\t\t// Shortcut for optimisers.\r\n\t\tvar L = Logger;\r\n\r\n\t\tL.enabledFor = bind(globalLogger, globalLogger.enabledFor);\r\n\t\tL.trace = bind(globalLogger, globalLogger.trace);\r\n\t\tL.debug = bind(globalLogger, globalLogger.debug);\r\n\t\tL.time = bind(globalLogger, globalLogger.time);\r\n\t\tL.timeEnd = bind(globalLogger, globalLogger.timeEnd);\r\n\t\tL.info = bind(globalLogger, globalLogger.info);\r\n\t\tL.warn = bind(globalLogger, globalLogger.warn);\r\n\t\tL.error = bind(globalLogger, globalLogger.error);\r\n\r\n\t\t// Don't forget the convenience alias!\r\n\t\tL.log = L.info;\r\n\t}());\r\n\r\n\t// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments\r\n\t// object with the supplied log messages and the second being a context object which contains a hash of stateful\r\n\t// parameters which the logging function can consume.\r\n\tLogger.setHandler = function (func) {\r\n\t\tlogHandler = func;\r\n\t};\r\n\r\n\t// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.\r\n\t// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).\r\n\tLogger.setLevel = function(level) {\r\n\t\t// Set the globalLogger's level.\r\n\t\tglobalLogger.setLevel(level);\r\n\r\n\t\t// Apply this level to all registered contextual loggers.\r\n\t\tfor (var key in contextualLoggersByNameMap) {\r\n\t\t\tif (contextualLoggersByNameMap.hasOwnProperty(key)) {\r\n\t\t\t\tcontextualLoggersByNameMap[key].setLevel(level);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Gets the global logging filter level\r\n\tLogger.getLevel = function() {\r\n\t\treturn globalLogger.getLevel();\r\n\t};\r\n\r\n\t// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,\r\n\t// default context and log handler.\r\n\tLogger.get = function (name) {\r\n\t\t// All logger instances are cached so they can be configured ahead of use.\r\n\t\treturn contextualLoggersByNameMap[name] ||\r\n\t\t\t(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));\r\n\t};\r\n\r\n\t// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will\r\n\t// write to the window's console object (if present); the optional options object can be used to customise the\r\n\t// formatter used to format each log message.\r\n\tLogger.createDefaultHandler = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\toptions.formatter = options.formatter || function defaultMessageFormatter(messages, context) {\r\n\t\t\t// Prepend the logger's name to the log message for easy identification.\r\n\t\t\tif (context.name) {\r\n\t\t\t\tmessages.unshift(\"[\" + context.name + \"]\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments\r\n\t\t// that don't offer a native console method.\r\n\t\tvar timerStartTimeByLabelMap = {};\r\n\r\n\t\t// Support for IE8+ (and other, slightly more sane environments)\r\n\t\tvar invokeConsoleMethod = function (hdlr, messages) {\r\n\t\t\tFunction.prototype.apply.call(hdlr, console, messages);\r\n\t\t};\r\n\r\n\t\t// Check for the presence of a logger.\r\n\t\tif (typeof console === \"undefined\") {\r\n\t\t\treturn function () { /* no console */ };\r\n\t\t}\r\n\r\n\t\treturn function(messages, context) {\r\n\t\t\t// Convert arguments object to Array.\r\n\t\t\tmessages = Array.prototype.slice.call(messages);\r\n\r\n\t\t\tvar hdlr = console.log;\r\n\t\t\tvar timerLabel;\r\n\r\n\t\t\tif (context.level === Logger.TIME) {\r\n\t\t\t\ttimerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];\r\n\r\n\t\t\t\tif (messages[1] === 'start') {\r\n\t\t\t\t\tif (console.time) {\r\n\t\t\t\t\t\tconsole.time(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttimerStartTimeByLabelMap[timerLabel] = new Date().getTime();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (console.timeEnd) {\r\n\t\t\t\t\t\tconsole.timeEnd(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinvokeConsoleMethod(hdlr, [ timerLabel + ': ' +\r\n\t\t\t\t\t\t\t(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Delegate through to custom warn/error loggers if present on the console.\r\n\t\t\t\tif (context.level === Logger.WARN && console.warn) {\r\n\t\t\t\t\thdlr = console.warn;\r\n\t\t\t\t} else if (context.level === Logger.ERROR && console.error) {\r\n\t\t\t\t\thdlr = console.error;\r\n\t\t\t\t} else if (context.level === Logger.INFO && console.info) {\r\n\t\t\t\t\thdlr = console.info;\r\n\t\t\t\t} else if (context.level === Logger.DEBUG && console.debug) {\r\n\t\t\t\t\thdlr = console.debug;\r\n\t\t\t\t} else if (context.level === Logger.TRACE && console.trace) {\r\n\t\t\t\t\thdlr = console.trace;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.formatter(messages, context);\r\n\t\t\t\tinvokeConsoleMethod(hdlr, messages);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Configure and example a Default implementation which writes to the `window.console` (if present).  The\r\n\t// `options` hash can be used to configure the default logLevel and provide a custom message formatter.\r\n\tLogger.useDefaults = function(options) {\r\n\t\tLogger.setLevel(options && options.defaultLevel || Logger.DEBUG);\r\n\t\tLogger.setHandler(Logger.createDefaultHandler(options));\r\n\t};\r\n\r\n\t// Createa an alias to useDefaults to avoid reaking a react-hooks rule.\r\n\tLogger.setDefaults = Logger.useDefaults;\r\n\r\n\t// Export to popular environments boilerplate.\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(Logger);\r\n\t}\r\n\telse if (typeof module !== 'undefined' && module.exports) {\r\n\t\tmodule.exports = Logger;\r\n\t}\r\n\telse {\r\n\t\tLogger._prevLogger = global.Logger;\r\n\r\n\t\tLogger.noConflict = function () {\r\n\t\t\tglobal.Logger = Logger._prevLogger;\r\n\t\t\treturn Logger;\r\n\t\t};\r\n\r\n\t\tglobal.Logger = Logger;\r\n\t}\r\n}(this));\r\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","const E_TIMEOUT = new Error('timeout while waiting for mutex to become available');\nconst E_ALREADY_LOCKED = new Error('mutex already locked');\nconst E_CANCELED = new Error('request for lock canceled');\n\nvar __awaiter$2 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Semaphore {\n    constructor(_value, _cancelError = E_CANCELED) {\n        this._value = _value;\n        this._cancelError = _cancelError;\n        this._weightedQueues = [];\n        this._weightedWaiters = [];\n    }\n    acquire(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        return new Promise((resolve, reject) => {\n            if (!this._weightedQueues[weight - 1])\n                this._weightedQueues[weight - 1] = [];\n            this._weightedQueues[weight - 1].push({ resolve, reject });\n            this._dispatch();\n        });\n    }\n    runExclusive(callback, weight = 1) {\n        return __awaiter$2(this, void 0, void 0, function* () {\n            const [value, release] = yield this.acquire(weight);\n            try {\n                return yield callback(value);\n            }\n            finally {\n                release();\n            }\n        });\n    }\n    waitForUnlock(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        return new Promise((resolve) => {\n            if (!this._weightedWaiters[weight - 1])\n                this._weightedWaiters[weight - 1] = [];\n            this._weightedWaiters[weight - 1].push(resolve);\n            this._dispatch();\n        });\n    }\n    isLocked() {\n        return this._value <= 0;\n    }\n    getValue() {\n        return this._value;\n    }\n    setValue(value) {\n        this._value = value;\n        this._dispatch();\n    }\n    release(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        this._value += weight;\n        this._dispatch();\n    }\n    cancel() {\n        this._weightedQueues.forEach((queue) => queue.forEach((entry) => entry.reject(this._cancelError)));\n        this._weightedQueues = [];\n    }\n    _dispatch() {\n        var _a;\n        for (let weight = this._value; weight > 0; weight--) {\n            const queueEntry = (_a = this._weightedQueues[weight - 1]) === null || _a === void 0 ? void 0 : _a.shift();\n            if (!queueEntry)\n                continue;\n            const previousValue = this._value;\n            const previousWeight = weight;\n            this._value -= weight;\n            weight = this._value + 1;\n            queueEntry.resolve([previousValue, this._newReleaser(previousWeight)]);\n        }\n        this._drainUnlockWaiters();\n    }\n    _newReleaser(weight) {\n        let called = false;\n        return () => {\n            if (called)\n                return;\n            called = true;\n            this.release(weight);\n        };\n    }\n    _drainUnlockWaiters() {\n        for (let weight = this._value; weight > 0; weight--) {\n            if (!this._weightedWaiters[weight - 1])\n                continue;\n            this._weightedWaiters[weight - 1].forEach((waiter) => waiter());\n            this._weightedWaiters[weight - 1] = [];\n        }\n    }\n}\n\nvar __awaiter$1 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Mutex {\n    constructor(cancelError) {\n        this._semaphore = new Semaphore(1, cancelError);\n    }\n    acquire() {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            const [, releaser] = yield this._semaphore.acquire();\n            return releaser;\n        });\n    }\n    runExclusive(callback) {\n        return this._semaphore.runExclusive(() => callback());\n    }\n    isLocked() {\n        return this._semaphore.isLocked();\n    }\n    waitForUnlock() {\n        return this._semaphore.waitForUnlock();\n    }\n    release() {\n        if (this._semaphore.isLocked())\n            this._semaphore.release();\n    }\n    cancel() {\n        return this._semaphore.cancel();\n    }\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction withTimeout(sync, timeout, timeoutError = E_TIMEOUT) {\n    return {\n        acquire: (weight) => {\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                let isTimeout = false;\n                const handle = setTimeout(() => {\n                    isTimeout = true;\n                    reject(timeoutError);\n                }, timeout);\n                try {\n                    const ticket = yield sync.acquire(weight);\n                    if (isTimeout) {\n                        const release = Array.isArray(ticket) ? ticket[1] : ticket;\n                        release();\n                    }\n                    else {\n                        clearTimeout(handle);\n                        resolve(ticket);\n                    }\n                }\n                catch (e) {\n                    if (!isTimeout) {\n                        clearTimeout(handle);\n                        reject(e);\n                    }\n                }\n            }));\n        },\n        runExclusive(callback, weight) {\n            return __awaiter(this, void 0, void 0, function* () {\n                let release = () => undefined;\n                try {\n                    const ticket = yield this.acquire(weight);\n                    if (Array.isArray(ticket)) {\n                        release = ticket[1];\n                        return yield callback(ticket[0]);\n                    }\n                    else {\n                        release = ticket;\n                        return yield callback();\n                    }\n                }\n                finally {\n                    release();\n                }\n            });\n        },\n        release(weight) {\n            sync.release(weight);\n        },\n        cancel() {\n            return sync.cancel();\n        },\n        waitForUnlock: (weight) => {\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => {\n                const handle = setTimeout(() => reject(timeoutError), timeout);\n                sync.waitForUnlock(weight).then(() => {\n                    clearTimeout(handle);\n                    resolve();\n                });\n            });\n        },\n        isLocked: () => sync.isLocked(),\n        getValue: () => sync.getValue(),\n        setValue: (value) => sync.setValue(value),\n    };\n}\n\n// eslint-disable-next-lisne @typescript-eslint/explicit-module-boundary-types\nfunction tryAcquire(sync, alreadyAcquiredError = E_ALREADY_LOCKED) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return withTimeout(sync, 0, alreadyAcquiredError);\n}\n\nexport { E_ALREADY_LOCKED, E_CANCELED, E_TIMEOUT, Mutex, Semaphore, tryAcquire, withTimeout };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendors-node_modules_comlink_dist_esm_comlink_mjs-node_modules_babel_runtime_helpers_esm_asyn-8dcd04\"], () => (__webpack_require__(\"./node_modules/@journeyapps/powersync-sdk-web/lib/src/worker/sync/SharedSyncImplementation.worker.js\")))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = self.location + \"\";\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t\"vendors-node_modules_journeyapps_powersync-sdk-web_lib_src_worker_sync_SharedSyncImplementati-f231e0\": 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkPowerSync_Angular_Demo\"] = self[\"webpackChunkPowerSync_Angular_Demo\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(\"vendors-node_modules_comlink_dist_esm_comlink_mjs-node_modules_babel_runtime_helpers_esm_asyn-8dcd04\").then(next);\n};","","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n",""],"names":["Mutex","EventIterator","Logger","throttle","isBatchedUpdateNotification","UploadQueueStats","BaseObserver","mutexRunExclusive","quoteIdentifier","PSInternalTable","CrudBatch","CrudEntry","CrudTransaction","DEFAULT_CRUD_UPLOAD_THROTTLE_MS","POWERSYNC_TABLE_MATCH","DEFAULT_DISCONNECT_CLEAR_OPTIONS","clearLocal","DEFAULT_POWERSYNC_CLOSE_OPTIONS","disconnect","DEFAULT_WATCH_THROTTLE_MS","DEFAULT_POWERSYNC_DB_OPTIONS","retryDelay","logger","get","crudUploadThrottleMs","DEFAULT_LOCK_TIMEOUT_MS","AbstractPowerSyncDatabase","options","transactionMutex","closed","ready","currentStatus","syncStreamImplementation","sdkVersion","bucketStorageAdapter","syncStatusListenerDisposer","_isReadyPromise","_schema","constructor","generateBucketStorageAdapter","undefined","schema","initialize","database","connected","waitForReady","_this","_asyncToGenerator","_this2","_initialize","init","version","execute","rows","item","updateSchema","iterateListeners","cb","initialized","_this3","Error","validate","ex","warn","JSON","stringify","toJSON","_this4","connect","connector","_this5","generateSyncStreamImplementation","registerListener","statusChanged","status","triggerCrudUpload","_this6","dispose","disconnectAndClear","_this7","writeTransaction","_ref","tx","OPLOG","CRUD","BUCKETS","tableGlob","existingTableRows","length","row","_array","name","_x","apply","arguments","close","_this8","getUploadQueueStats","includeSize","_this9","readTransaction","_ref2","result","count","size","_x2","getCrudBatch","limit","_this10","getAll","all","map","fromRow","haveMore","pop","last","_ref3","writeCheckpoint","handleCrudCheckpoint","clientId","_x3","getNextCrudTransaction","_this11","_ref4","first","getOptional","txId","tx_id","_ref5","_x5","_x4","lastClientId","_this12","_ref6","check","getMaxOpId","_x6","sql","parameters","_this13","_this14","_this15","_this16","readLock","callback","_this17","writeLock","_this18","res","lockTimeout","_this19","_ref8","rollback","_x7","timeoutMs","_this20","_ref9","commit","_x8","watch","handlerOrOptions","maybeOptions","handler","watchWithCallback","watchWithAsyncGenerator","_this21","onResult","onError","error","executeReadOnly","resolvedTables","resolveTables","onChangeWithCallback","onChange","_ref11","tables","_this22","eventOptions","push","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","_iterator","_asyncIterator","onChangeWithAsyncGenerator","_step","next","done","event","value","err","return","_this23","explained","rootPages","filter","opcode","p3","p2","table","tbl_name","replace","_this24","resolvedOptions","watchedTables","Set","changedTables","throttleMs","flushTableUpdates","handleTableChanges","intersection","leading","trailing","tablesUpdated","_ref13","update","rawTableNames","processTableUpdates","_x9","signal","addEventListener","fail","stop","onDetectedChanges","Array","from","values","change","has","clear","updateNotification","filteredTables","t","match","mappedTableNames","add","params","_this25","AbstractPowerSyncDatabaseOpenFactory","dbFilename","generateOptions","openDB","getInstance","generateInstance","crud","complete","UpdateType","id","op","opData","transactionId","dbRow","data","parse","parseInt","type","op_id","equals","entry","toComparisonArray","hashCode","OpTypeEnum","OpType","fromJSON","jsonValue","Object","entries","find","OplogEntry","checksum","subkey","object_type","object_id","v4","uuid","extractTableUpdates","COMPACT_OPERATION_INTERVAL","SqliteBucketStorage","db","mutex","MAX_OP_ID","tableNames","pendingBucketDeletes","_hasCompletedSync","updateListener","compactCounter","includes","l","crudUpdate","startSession","getBucketStates","saveSyncData","batch","b","buckets","debug","removeBuckets","bucket","deleteBucket","newName","REMOVE","PUT","hasCompletedSync","r","completed","syncLocalDatabase","checkpoint","validateChecksums","checkpointValid","checkpointFailures","bucketNames","last_op_id","write_checkpoint","valid","updateObjectsFromBuckets","forceCompact","insertId","rs","resultItem","autoCompact","deletePendingBuckets","clearRemoveOps","updateLocalTarget","rs1","seqBefore","opId","_ref7","anyData","seqAfter","response","hasCrud","crudResult","setTargetCheckpoint","SyncDataBucket","SyncDataBatch","json","has_more","after","next_after","REFRESH_CREDENTIALS_SAFETY_PERIOD_MS","DEFAULT_REMOTE_LOGGER","AbstractRemote","credentials","getCredentials","expiresAt","Date","valueOf","fetchCredentials","buildRequest","path","endpoint","token","url","headers","Authorization","isAvailable","isStreamingKeepalive","isStreamingSyncCheckpoint","isStreamingSyncCheckpointComplete","isStreamingSyncCheckpointDiff","isStreamingSyncData","ndjsonStream","SyncStatus","LockType","DEFAULT_STREAMING_SYNC_OPTIONS","retryDelayMs","AbstractStreamingSyncImplementation","_lastSyncedAt","abortController","crudUpdateListener","syncStatus","lastSyncedAt","dataFlow","uploading","downloading","dataFlowStatus","_uploadAllCrud","waitForStatus","Promise","resolve","updatedStatus","matchPartialObject","compA","compB","every","key","comparisonBValue","lastSynced","isConnected","adapter","getWriteCheckpoint","remote","obtainLock","updateSyncStatus","uploadCrudBatch","delayRetry","uploadCrud","AbortController","streamingSync","abort","nestedAbortController","aborted","retry","streamingSyncIteration","progress","SYNC","bucketEntries","initialBuckets","Map","forEach","set","req","targetCheckpoint","validatedCheckpoint","appliedCheckpoint","bucketSet","keys","streamingSyncRequest","include_checksum","raw_data","line","then","bucketsToDelete","newBuckets","delete","setTimeout","diff","checkpoint_diff","updated_buckets","removed_buckets","newCheckpoint","remaining_seconds","token_expires_in","_wrapAsyncGenerator","body","_awaitAsyncGenerator","postStreaming","stream","reader","getReader","read","releaseLock","isEqual","checkpoint_complete","isContinueCheckpointRequest","request","isArray","checkpoint_token","isSyncNewCheckpointRequest","request_checkpoint","ColumnType","Column","RowUpdateType","getMessage","toString","IndexedColumn","DEFAULT_INDEX_OPTIONS","columns","Index","createAscending","columnNames","c","DEFAULT_INDEX_COLUMN_OPTIONS","ascending","column","TEXT","Table","ClassicTable","Schema","types","props","convertToClassicTables","createTable","DEFAULT_TABLE_OPTIONS","indexes","insertOnly","localOnly","InvalidSQLCharacters","createLocalOnly","createInsertOnly","col","viewName","viewNameOverride","internalName","validName","test","columnName","indexNames","index","view_name","local_only","insert_only","e","text","integer","INTEGER","real","REAL","TableV2","startsWith","substring","listeners","listener","i","_mutexRunExclusive","reject","timeout","timedOut","timeoutId","runExclusive","clearTimeout","quoteString","s","replaceAll","quoteJsonPath","v1","require","module","exports","byteToHex","substr","bytesToUuid","buf","offset","bth","join","getRandomValues","crypto","bind","msCrypto","window","rnds8","Uint8Array","whatwgRNG","rnds","mathRNG","Math","random","rng","_nodeId","_clockseq","_lastMSecs","_lastNSecs","node","clockseq","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","n","ii","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","rejected","Comlink","getWorkerDatabaseOpener","WASQLiteDBAdapter","_execute","bindings","workerMethods","assign","idx","dbGetHelpers","generateDBHelpers","flags","_a","getWorker","enableMultiTabs","dbOpener","workerPort","wrap","registerOnTableChange","proxy","opType","tableName","rowId","call","query","ctx","_b","fn","acquireLock","navigator","locks","wrapTransaction","finalized","rowsAffected","WebRemote","post","fetch","method","ok","statusText","cache","console","outputStream","ReadableStream","start","controller","processStream","enqueue","Response","WebStreamingSyncImplementation","webOptions","lockOptions","identifier","openWorkerDatabasePort","workerIdentifier","multipleTabs","SharedWorker","URL","import","meta","port","Worker","BroadcastLogger","clients","TRACE","DEBUG","INFO","TIME","WARN","ERROR","OFF","trace","x","p","clientProvider","info","log","sanitizeArgs","time","label","timeEnd","setLevel","level","getLevel","enabledFor","sanitizedParams","param","structuredClone","SharedSyncClientEvent","SharedSyncImplementation","ports","isInitialized","broadCastLogger","syncStreamClient","dbWorkerPort","dbName","lastPort","fetchCredentialsController","activePort","onabort","uploadDataController","streamOptions","updateAllStatuses","statusListener","addPort","portProvider","removePort","findIndex","trackedPort","releaseProxy","splice","_testUpdateAllStatuses","_self","self","useDefaults","sharedSyncImplementation","onconnect","payload","CLOSE_CLIENT","expose","namespace","is_reader","cancellationRequest","decoder","TextDecoder","data_buf","processResult","trim","data_l","decode","lines","split","data_line","cancel","reason","defineProperty","event_iterator_1","subscribe","evOptions","removeEventListener","default","EventQueue","pullQueue","pushQueue","eventHandlers","isPaused","isStopped","resolution","placeholder","shift","highWaterMark","highWater","remove","rejection","catch","removeCallback","Symbol","asyncIterator","lowWaterMark","lowWater","listen","queue","on","freeze","global","VERSION","logHandler","contextualLoggersByNameMap","scope","func","merge","args","target","hasOwnProperty","defineLogLevel","ContextualLogger","defaultContext","context","filterLevel","prototype","newLevel","lvl","invoke","msgArgs","globalLogger","L","setHandler","createDefaultHandler","formatter","defaultMessageFormatter","messages","unshift","timerStartTimeByLabelMap","invokeConsoleMethod","hdlr","Function","slice","timerLabel","defaultLevel","setDefaults","define","amd","_prevLogger","noConflict","root","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","toStringTag","baseGetTag","trimmedEndIndex","reTrimStart","baseTrim","string","freeGlobal","objectProto","nativeObjectToString","isOwn","tag","unmasked","freeSelf","reWhitespace","charAt","isObject","now","toNumber","FUNC_ERROR_TEXT","nativeMax","max","nativeMin","min","debounce","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","maxing","TypeError","invokeFunc","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","flush","debounced","isInvoking","isObjectLike","symbolTag","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","other","isBinary","E_TIMEOUT","E_ALREADY_LOCKED","E_CANCELED","__awaiter$2","Semaphore","_value","_cancelError","_weightedQueues","_weightedWaiters","acquire","weight","_dispatch","release","waitForUnlock","isLocked","getValue","setValue","queueEntry","previousValue","previousWeight","_newReleaser","_drainUnlockWaiters","called","waiter","__awaiter$1","cancelError","_semaphore","releaser","withTimeout","sync","timeoutError","isTimeout","handle","ticket","tryAcquire","alreadyAcquiredError"],"sourceRoot":""}